<div class="standard"><a id="magicparlabel-2653"><span style="font-size:large;"></span></a>

<div class="Frameless"><a id="magicparlabel-2653"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-2653"></a><a id="magicparlabel-2657">![image: 0_Volumes_USB_TFE_entete.png](./naturalcorner_files/0_Volumes_USB_TFE_entete.png)</a></div>

<a id="magicparlabel-2657"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-2657"></a><a id="magicparlabel-2658">_<span style="font-size:x-large;">Institut supérieur de formation continue d’Etterbeek</span>_</a></div>

<a id="magicparlabel-2658"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-2658"></a><a id="magicparlabel-2659">_Enseignement de Promotion Sociale_</a></div>

<a id="magicparlabel-2659"></a>

<div style="height:5ex"><a id="magicparlabel-2659"></a>

<div style="height:5ex"><a id="magicparlabel-2659"></a>

<div style="height:5ex"><a id="magicparlabel-2659"></a>

<div style="height:5ex"><a id="magicparlabel-2659"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-2659"></a><a id="magicparlabel-2664">**<span style="font-size:x-large;">Natural Corner, l'App au service du bio :</span>**</a></div>

<a id="magicparlabel-2664"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-2664"></a><a id="magicparlabel-2665">**<span style="font-size:x-large;">une application full-stack avec backend en PHP et frontend AngularJS au moyen du service cloud Google App Engine</span>**</a></div>

<a id="magicparlabel-2665"></a>

<div style="height:5ex"><a id="magicparlabel-2665"></a>

<div style="height:5ex"><a id="magicparlabel-2665"></a>

<div style="height:5ex"><a id="magicparlabel-2665"></a>

<div style="height:5ex"><a id="magicparlabel-2665"></a>

<div style="height:5ex"><a id="magicparlabel-2665"></a>

<div style="height:5ex"><a id="magicparlabel-2665"></a>

<div style="height:5ex"><a id="magicparlabel-2665"></a>

<div style="height:5ex"><a id="magicparlabel-2665"></a>

<div style="height:5ex"><a id="magicparlabel-2665"></a>

<div style="height:5ex"><a id="magicparlabel-2665"></a>

<div style="height:5ex"><a id="magicparlabel-2665"></a>

<div style="height:5ex"><a id="magicparlabel-2665"></a>

<div style="height:5ex"><a id="magicparlabel-2665"></a>

<div style="height:5ex"><a id="magicparlabel-2665"></a>

<div style="height:5ex"><a id="magicparlabel-2665">

<div style="height:5ex">

<div style="height:5ex">

<div class="plain_layout" style="text-align: right;"><a id="magicparlabel-2683"><span style="font-size:large;">Daniel Imeri</span></a></div>

<a id="magicparlabel-2683"></a>

<div class="plain_layout" style="text-align: right;"><a id="magicparlabel-2683"></a><a id="magicparlabel-2684"><u>Directeur de suivi:</u> **Christophe Lemaigre**</a></div>

<a id="magicparlabel-2684"></a>

<div class="plain_layout" style="text-align: right;"><a id="magicparlabel-2684"></a><a id="magicparlabel-2685"><span style="font-size:large;">Année scolaire : 2015-2016</span> _Travail de fin d'études présenté en vue_</a></div>

<a id="magicparlabel-2685"></a>

<div class="plain_layout" style="text-align: right;"><a id="magicparlabel-2685"></a><a id="magicparlabel-2686">_de l’obtention du titre de Bachelier en informatique_</a></div>

<a id="magicparlabel-2686"></a>

<div class="plain_layout" style="text-align: right;"><a id="magicparlabel-2686"></a><a id="magicparlabel-2687">_de gestion_</a></div>

<a id="magicparlabel-2687"></a></div>

</div>

<a id="magicparlabel-2687"></a>

<div class="standard"><a id="magicparlabel-2687"></a><a id="magicparlabel-2688">
</a></div>

<a id="magicparlabel-2688"></a>

<div class="toc"><a id="magicparlabel-2688">

## Table des matières

</a>

<div class="lyxtoc-1"><a id="magicparlabel-2688"></a>[Chapitre 1 Introduction](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-2690)</div>

</div>

</a>

<div class="lyxtoc-0"><a id="magicparlabel-2665">[Partie I Méthodologie et architecture](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-2729)</a>

<div class="lyxtoc-1"><a id="magicparlabel-2665"></a>[Chapitre 2 Méthodologie](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-2730)

<div class="lyxtoc-2">[2.1 UP simplifié](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-2731)</div>

</div>

<div class="lyxtoc-1">[Chapitre 3 Architecture](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-2753)

<div class="lyxtoc-2">[3.1 Choix technologiques](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-2754)</div>

<div class="lyxtoc-2">[3.2 Framework](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-2816)</div>

<div class="lyxtoc-2">[3.3 Outils logiciels](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-2908)</div>

</div>

</div>

<div class="lyxtoc-0">[Partie II Fonctionnalités de l'application Natural Corner](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-2954)

<div class="lyxtoc-1">[Chapitre 4 Expression initiale des besoins](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-2955)

<div class="lyxtoc-2">[4.1 Vision du projet](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-2956)</div>

<div class="lyxtoc-2">[4.2 Analyse métier](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-2961)</div>

<div class="lyxtoc-2">[4.3 Exigences fonctionnelles](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3010)</div>

<div class="lyxtoc-2">[4.4 Exigences non fonctionnelles](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3026)</div>

<div class="lyxtoc-2">[4.5 Exigences de performance](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3031)</div>

<div class="lyxtoc-2">[4.6 Contraintes de conception](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3033)</div>

</div>

<div class="lyxtoc-1">[Chapitre 5 Cas d'utilisation](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3042)

<div class="lyxtoc-2">[5.1 Use case des utilisateurs](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3048)</div>

<div class="lyxtoc-2">[5.2 Use case des employés](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3060)</div>

<div class="lyxtoc-2">[5.3 Use case secondaire](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3073)</div>

<div class="lyxtoc-2">[5.4 Classement des cas d'utilisation et planification du projet en itération](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3086)</div>

</div>

<div class="lyxtoc-1">[Chapitre 6 Maquette](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3280)

<div class="lyxtoc-2">[6.1 Captures d'écran](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3282)</div>

</div>

</div>

<div class="lyxtoc-0">[Partie III Spécifications détaillées des exigences](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3307)

<div class="lyxtoc-1">[Chapitre 7 Descriptions des cas d'utilisation et diagrammes de séquence système](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3308)

<div class="lyxtoc-2">[7.1 UC Créer son compte client](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3314)</div>

<div class="lyxtoc-2">[7.2 UC Gérer son compte client](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3379)</div>

<div class="lyxtoc-2">[7.3 UC Recherche des produits](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3442)</div>

<div class="lyxtoc-2">[7.4 UC Gérer son panier](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3514)</div>

<div class="lyxtoc-2">[7.5 UC Commander](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3576)</div>

<div class="lyxtoc-2">[7.6 UC Maintenir le catalogue](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3633)</div>

</div>

</div>

<div class="lyxtoc-0">[Partie IV Classes d'analyse et base de données](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3687)

<div class="lyxtoc-1">[Chapitre 8 Conception objet des classes d'analyse](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3688)

<div class="lyxtoc-2">[8.1 Classes d'analyse](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3689)</div>

</div>

<div class="lyxtoc-1">[Chapitre 9 Base de données](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3779)

<div class="lyxtoc-2">[9.1 Conception](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3780)</div>

<div class="lyxtoc-2">[9.2 Modèle conceptuel de données (MCD)](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3838)</div>

<div class="lyxtoc-2">[9.3 Modèle logique de données (MLD)](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3849)</div>

<div class="lyxtoc-2">[9.4 Réflexions sur la conception de la base de données](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3869)</div>

</div>

</div>

<div class="lyxtoc-0">[Partie V Réalisation des cas d'utilisation](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3899)

<div class="lyxtoc-1">[Chapitre 10 Conception et implémentation des UC](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3900)

<div class="lyxtoc-2">[10.1 UC "Créer son compte client" et "Gérer son compte client"](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-3901)</div>

<div class="lyxtoc-2">[10.2 UC "Recherche des produits"](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-4302)</div>

<div class="lyxtoc-2">[10.3 UC "Gérer son panier"](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-4496)</div>

<div class="lyxtoc-2">[10.4 UC "Commander"](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-4613)</div>

<div class="lyxtoc-2">[10.5 UC "Maintenir catalogue"](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-4664)</div>

</div>

<div class="lyxtoc-1">[Chapitre 11 Création de l'API et utilisation de AngularJS](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-4758)

<div class="lyxtoc-2">[11.1 API REST](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-4759)</div>

<div class="lyxtoc-2">[11.2 AngularJS](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-4916)</div>

</div>

<div class="lyxtoc-1">[Chapitre 12 Conclusion](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-4959)</div>

<div class="lyxtoc-1">[Annexe A Dump du code MySQL généré par JMerisse (et corrigé manuellement)](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-5010)</div>

<div class="lyxtoc-1">[Annexe B Conventions pour les diagrammes de navigation](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-5128)</div>

<div class="lyxtoc-1">[Annexe C Créer les tests avec PHPUnit](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-5140)</div>

<div class="lyxtoc-1">[Annexe D Déployer une application en PHP sur Google App Engine](file:///Volumes/USB/TFE/TFE.xhtml#magicparlabel-5257)</div>

</div>

# <a id="magicparlabel-2690">

<div class="chapter_label">Chapitre 1</div>

Introduction</a>

<a id="magicparlabel-2690"></a>

<div class="standard"><a id="magicparlabel-2690"></a><a id="magicparlabel-2691">Natural Corner est un magasin bio du centre ville ouvert depuis environ 7 ans et qui propose une large variété d'articles bio allant des légumes et fruits aux produits cosmétiques en passant par les laits aux amendes</a>

<div class="foot"><a id="magicparlabel-2691"><span class="foot_label">1</span></a>

<div class="foot_inner"><a id="magicparlabel-2691"></a>

<div class="plain_layout"><a id="magicparlabel-2691"></a><a id="magicparlabel-2695"><span class="flex_url">http://www.naturalcorner.be/</span></a></div>

<a id="magicparlabel-2695"></a></div>

</div>

<a id="magicparlabel-2695">. Cette boutique bio jouit d'une jolie réputation et ne cesse d'améliorer son offre.</a></div>

<a id="magicparlabel-2695"></a>

<div class="standard"><a id="magicparlabel-2695"></a><a id="magicparlabel-2700">Lorsque j'ai eu une première entrevue avec le gérant du magasin Natural Corner, il m'a fait part de son envie de pouvoir un peu moderniser son magasin par le biais du numérique et proposer une nouvelle image résolument moderne à la clientèle. Je lui ai alors suggéré de créer une application web ou smartphone dans l'optique de l'écriture de mon travail de fin d'études. L'idée était que les clients aimeraient bénéficier du comfort d'une précommande en ligne avant d'aller récupérer leur panier. Enthousiasmé par cette ébauche de projet, je l'ai rapidement proposé comme sujet de mémoire.</a></div>

<a id="magicparlabel-2700"></a>

<div class="standard"><a id="magicparlabel-2700"></a><a id="magicparlabel-2701">Les deux raisons principales qui m’ont amené à choisir le sujet d’une application web pour la vente en ligne d’un magasin bio sont d’une part, d’un point de vue technique, mon désir d’approfondir le domaine du développement web, et d’autre part, mon intérêt pour ce nouveau marché des produits bio proposant des alternatives de consommation intéressantes et des opportunités indéniables au niveau commercial.</a></div>

<a id="magicparlabel-2701"></a>

<div class="standard"><a id="magicparlabel-2701"></a><a id="magicparlabel-2702">Avec de nouvelles technologies proposées, la programmation web semble être arrivée à une certaine maturité. Les services PaaS offrent aux developpeurs web des outils leur permettant de se passer d’une bonne partie de l’infrastructure et de sa configuration pour se concentrer sur le code et l’expérience des utilisateurs. Je perçois dans ces technologies la possibilité d’une très grande autonomie pour le développeur. Il est aussi intéressant de constater qu’une série de framework orienté web en langage javascript, aussi bien frontend que backend, innondent le marché (meteorjs, angularjs, nodejs, backbonejs,...) et qu’il s’agit sans doute d’un signe d'engouement pour ce type de programmation. La puissance croissante des moteurs javascript des navigateurs et la pile HTML5 proposant des services très nombreux, la possibilité d’être, à l’instar des applications Java, dans une certaine mesure “cross-plateforme”, et la nécessité de pouvoir offrir une expérience UI similaire sur les différents appareils (Android, IOS, Windows phone, ChromeBook, laptop) poussent les technologies web à s’améliorer sans cesse.</a></div>

<a id="magicparlabel-2702"></a>

<div class="standard"><a id="magicparlabel-2702"></a><a id="magicparlabel-2703">Dans un tel contexte, j’aimerais expérimenter un ensemble de choix de langages qui peuvent apporter une solution élégante à une question récurrente dans le développement des applications web. Comment envisager la création d’une application web qui pourra rester évolutive et “maintenable” lors d’une migration vers une application pour smartphone sous Android ou IOS? La réponse à cette question est en partie l’objet de mon TFE. La solution réside de le découplage du front-end et du back-end par l’intermédiaire d’un service web REST (qui envoie sous forme de requête http des objets au format JSON).</a></div>

<a id="magicparlabel-2703"></a>

<div class="standard"><a id="magicparlabel-2703"></a><a id="magicparlabel-2704">A ce jour le marché du bio répond à une forte demande. Bien qu’encore élitiste, ce marché semble grandir sans cesse, permettant aux consommateurs exigents quant à la qualité des produits et à l’impact écologique de leur mode de vie de consommer conformément à leurs principes. Etant personnellement attentif aux problèmes d’environnement, je vois dans le marché bio la possibilité d’une remise en question de notre mode de consommation sans entrer en contradiction avec le commerce tel qu’il fonctionne traditionnellement. De plus, l’idée de proposer aux clients des produits frais et sains n’est pas pour me déplaire.</a></div>

<a id="magicparlabel-2704"></a>

<div class="standard"><a id="magicparlabel-2704"></a><a id="magicparlabel-2705">La création d'une application web multipltaforme, cependant, semble un challenge difficile à relever. En effet, il s'agit non seulement de créer une application dont la logique serveur propose une persistence des données et les calculs nécessaires au service de vente, mais aussi une partie cliente qui devra proposer sous une forme conviviale le catalogue des produits du magasin Natural Corner. Après des semaines de développements et d'analyses, il a été finalement décidé de créer une partie serveur pouvant servir de base multiplateforme pour n'importe quelle application cliente de façon modulaire.</a></div>

<a id="magicparlabel-2705"></a>

<div class="standard"><a id="magicparlabel-2705"></a><a id="magicparlabel-2706">L'enjeu de ce travail de fin d'étude est de proposer une solution complète “full stack”, c'est-à-dire allant de la base de donnée à une application cliente, le backend au frontend, munie d'un déploiement sur le Cloud qui permettra de répondre à la demande initiale du gérant du magasin. Tout cela passera par la mise en place d'un framework orienté objet pour assurer la maintenabilité de l'application.</a></div>

<a id="magicparlabel-2706"></a>

<div class="standard"><a id="magicparlabel-2706"></a><a id="magicparlabel-2707">Il est toutefois important de ne pas avoir les yeux plus grands que le ventre et de rester humble dans ses objectifs. Je n'ai pas l'ambition d'égaler une équipe de développement de plusieurs développeurs et analystes spécialisés dans des techniques pointues. Mon objectif principale est de créer les bases solides d'une application WEB qui sera réutilisable et aisément maintenable. Sa capacité à proposer un frontend sera réalisée par la mise en place d'une API de type REST suffisamment flexible pour accueillir par exemple une application Android, iOS ou AngularJS.</a></div>

<a id="magicparlabel-2707"></a>

<div class="standard"><a id="magicparlabel-2707"></a><a id="magicparlabel-2708">Comment réaliser ce programme en partant de zéro sans prendre trop de risques? Il s'agit de mener l'analyse depuis le recueil des besoins jusqu'à l'écriture des diagrammes UML dans l'optique d'arriver à une description fidèle de l'application. Alors seulement l'écriture du code devient aisée et limpide car elle correspond aux différents points de vue conceptuels de l'analyste, transformés de la manière la plus adéquate en code par le programmeur.</a></div>

<a id="magicparlabel-2708"></a>

<div class="standard"><a id="magicparlabel-2708"></a><a id="magicparlabel-2709">La coopération avec le gérant du magasin Natural Corner fut très profitable pour l'écriture de ces diagrammes UML, qui ne sont que la traduction de la logique métier du magasin. J'ai eu plusieurs interview dans lesquels j'ai récupéré et consignés ses attentes.</a></div>

<a id="magicparlabel-2709"></a>

<div class="standard"><a id="magicparlabel-2709"></a><a id="magicparlabel-2710">Il s'agit donc avant tout d'un travail d'analyse en ce sens que son résultat doit être indépendant de tout langage, framework ou architecture logicielle. Cette démarche ne présuppose tout au plus que l'équipe de développement (dans ce cas, le rédacteur de ces lignes) se mette d'accord sur le design pattern d'architecture MVC pour l'écriture du logiciel.</a></div>

<a id="magicparlabel-2710"></a>

<div class="standard"><a id="magicparlabel-2710"></a><a id="magicparlabel-2711">L'implémentation passe par la mise en oeuvre d'un framework Model-View-Controler qui n'existe pas en tant que tel dans le langage de programmation choisi. Ce fut la part du travail la plus ardue mais aussi la plus intéressante en ce sens qu'elle est la jonction entre le mode de pensée orienté objet et son abstraction intrinsèque à la réalité technique du langage de programmation. Ce travail a dû se plier à l'exigence du travail patient du programmeur, fait d'essais et d'erreur, d'égarements plus ou moins longs et de persévérance dans ses objectifs. Au final, c'est une solution viable de l'implémentation de l'analyse et de ses diagrammes UML qui a vu le jour. Ce travail peut donc être considéré, en plus d'être l'application du magasin Natural Corner, comme la création d'un framework MVC PHP. Le déploiement, quant à lui, se fera sur le Cloud. Plus exactement sur un PaaS bien connu nommé Google App Engine. Ce PaaS</a>

<div class="foot"><a id="magicparlabel-2711"><span class="foot_label">2</span></a>

<div class="foot_inner"><a id="magicparlabel-2711"></a>

<div class="plain_layout"><a id="magicparlabel-2711"></a><a id="magicparlabel-2715">Rappelons qu'un Palteforme As A Service est un ensemble d'outils en ligne se basant sur la technologie Cloud pour accélérer la productivité du dévéloppeur d'une part, et de permettre une grande capacité d'adaption au traffic de l'application, d'autre part. Il est aussi possible de faire des choix technologiques rapides sans passer par des configurations complexes (comme passer d'une base de donnée SQL à une base de donnée Big Data No SQL par exemple).<span class="flex_url">https://fr.wikipedia.org/wiki/Plate-forme_en_tant_que_service</span></a></div>

<a id="magicparlabel-2715"></a></div>

</div>

<a id="magicparlabel-2715">propose une API complète et permet de déployer rapidement dans un contexte professionnel une application web.</a></div>

<a id="magicparlabel-2715"></a>

<div class="standard"><a id="magicparlabel-2715"></a><a id="magicparlabel-2720">Pour résumer ce travail, il s'agira du résultat de la création d'un framework MVC codé à partir de zero, pouvant s'utiliser avec un PaaS, permettant de créer une application côté serveur et muni d'une API basée sur la technologie REST. Une telle approche a l'ambition de répondre à la question actuelle du développement “full stack”. Elle correspond à la philosophie orientée objet en ce sens que le code n'est que l'aboutissement d'une réflexion d'analyse et l'architecture qu'une manière flexible d'implémenter par un procédé technique cette réfléxion. Cette application va aussi profiter des services Cloud à faible coût donnant au développeur des résultats se rapprochant le plus possible de la demande initiale du client</a>

<div class="foot"><a id="magicparlabel-2720"><span class="foot_label">3</span></a>

<div class="foot_inner"><a id="magicparlabel-2720"></a>

<div class="plain_layout"><a id="magicparlabel-2720"></a><a id="magicparlabel-2724">Le code de l'application se trouve sur le Git public <span class="flex_url">https://github.com/userdanydan/NaturalCorner/tree/GoodVersion</span></a></div>

<a id="magicparlabel-2724"></a></div>

</div>

<a id="magicparlabel-2724">.</a></div>

<a id="magicparlabel-2724"></a>

# <a id="magicparlabel-2724"></a><a id="magicparlabel-2729"><span class="part_label">Partie I</span> Méthodologie et architecture</a>

<a id="magicparlabel-2729"></a>

# <a id="magicparlabel-2729"></a><a id="magicparlabel-2730">

<div class="chapter_label">Chapitre 2</div>

Méthodologie</a>

<a id="magicparlabel-2730"></a>

## <a id="magicparlabel-2730"></a><a id="magicparlabel-2731"><span class="section_label">2.1</span> UP simplifié</a>

<a id="magicparlabel-2731"></a>

<div class="standard"><a id="magicparlabel-2731"></a><a id="magicparlabel-2732">La méthodologie utilisée est celle préconisée par le livre de Pascal Roques "UML2 Modéliser une application web"</a>

<div class="foot"><a id="magicparlabel-2732"><span class="foot_label">1</span></a>

<div class="foot_inner"><a id="magicparlabel-2732"></a>

<div class="plain_layout"><a id="magicparlabel-2732"></a><a id="magicparlabel-2736">Roques, P., UML2 Modéliser une application web, Eyrolles 4ème édition, 2008</a></div>

<a id="magicparlabel-2736"></a></div>

</div>

<a id="magicparlabel-2736">qui consiste à utiliser la méthode Unified Process dans une optique simplifiée pour s'adapter idéalement à l'analyse et la conceptualisation d'une application web. Une grande partie des schémas de ce travail sont directement inspirés de ce livre. Ce fut une occasion unique pour me familiariser avec les diagrammes UML et de les assimiler progressivement. La pratique m'a permis d'intégrer la logique sous-jacente de ces diagrammes et leurs connexions avec les besoins du client, la vision du logiciel et le code. Les premiers diagrammes pourront appraître comme de pâles copies des diagrammes du livre mais sont en fait une version adaptée à l'application Natural Corner. Plus j'avançais dans le travail, plus j'arrivais à me détacher du livre pour produire des schémas entièrement originaux (voir l'UC Maintenir catalogue), prouvant à mon sens l'acquisition de la compétence nécessaire pour le métier d'analyste-développeur.</a></div>

<a id="magicparlabel-2736"></a>

<div class="standard"><a id="magicparlabel-2736"></a><a id="magicparlabel-25468">Ce schéma résume la démarche du livre mentionné. En partant du recueil des besoins de l'utilisateur, il est possible de définir les cas d'utilisation, un diagramme de séquence système et une description détaillée. C'est l'objet de la partie "Fonctionnalités de l'application Natural Corner". Une maquette peut aussi être réalisée mais il n'a pas été nécessaire de perdre du temps pour une activité plutôt destinée à un graphiste. Ensuite, on peut produire un Diagramme des Classes Participantes qui est une première ébauche de la vision statique de l'application. A partir de ce DCP, on commence à réfléchir plus profondément à la dynamique interne à l'aide des diagrammes d'interaction. Un diagramme de navigation issu en principe de la maquette va être utile pour comprendre la manière dont la partie Vue du logiciel sera utilisée. Enfin, l'ensemble de ces points de vue va aboutir à l'écriture des diagrammes de classes de conception. Dans ma démarche, j'ajoute à cela l'écriture des tests unitaires à partir de ce schéma qui comporte le nom des méthodes des différentes classes. Finalement le code peut être écrit et l'application créée. Par ailleurs, la lecture du livre de référence en programmation orientée objet de Graig Larman</a>

<div class="foot"><a id="magicparlabel-25468"><span class="foot_label">2</span></a>

<div class="foot_inner"><a id="magicparlabel-25468"></a>

<div class="plain_layout"><a id="magicparlabel-25468"></a><a id="magicparlabel-25467">Larman, G., Applying UML and Patterns , An introduction to object-oriented analysis and design and unified process, Seconde edition, 2001</a></div>

<a id="magicparlabel-25467"></a></div>

</div>

<a id="magicparlabel-25467">a guidé la problématique d'assignation des responsabilités aux objets de l'analyse représentés sous forme de diagrammes UML.</a></div>

<a id="magicparlabel-25467"></a>

# <a id="magicparlabel-25467"></a><a id="magicparlabel-2753">

<div class="chapter_label">Chapitre 3</div>

Architecture</a>

<a id="magicparlabel-2753"></a>

## <a id="magicparlabel-2753"></a><a id="magicparlabel-2754"><span class="section_label">3.1</span> Choix technologiques</a>

<a id="magicparlabel-2754"></a>

### <a id="magicparlabel-2754"></a><a id="magicparlabel-2755"><span class="subsection_label">3.1.1</span> Choix du langage</a>

<a id="magicparlabel-2755"></a>

<div class="standard"><a id="magicparlabel-2755"></a><a id="magicparlabel-2756">J’ai choisi le langage PHP pour plusieurs raisons. Sa popularité (Facebook est programmé en PHP), la possibilité de programmer en orienté objet, le fait d’être libre de créer mon propre framework(par opposition à JavaEE ou .NET). C'est un langage de script, interprété, peu typé, laissant un certain laxisme pour la programmation. Le développement TDD</a>

<div class="foot"><a id="magicparlabel-2756"><span class="foot_label">1</span></a>

<div class="foot_inner"><a id="magicparlabel-2756"></a>

<div class="plain_layout"><a id="magicparlabel-2756"></a><a id="magicparlabel-2760"><span class="flex_url">https://fr.wikipedia.org/wiki/Test_driven_development</span></a></div>

<a id="magicparlabel-2760"></a></div>

</div>

<a id="magicparlabel-2760">orienté par les tests permet d’éviter certains écueils (Pas de compilateur pour corriger avant le runtime les erreurs de syntaxe). En contre-partie les performances sont moins bonnes qu'avec les langages compilés. Enfin, j'ajouterais mon expérience personnelle dans ce langage et le fait que le service PaaS que j’utilise autorise l’usage de PHP 5.5 (Google App Engine).</a></div>

<a id="magicparlabel-2760"></a>

###### <a id="magicparlabel-2760"></a><a id="magicparlabel-2765"><span class="subparagraph_label">PHP contre JavaEE</span></a>

<a id="magicparlabel-2765"></a>

<div class="standard"><a id="magicparlabel-2765"></a><a id="magicparlabel-2766">JavaEE très bon pour un grosse équipe car il sépare le travail entre différents groupes avec netteté. Les page .jsp nuisent à ma façon de créer le framework point de vue de la courbe d’apprentissage. Par ailleurs, il faut apprendre un framework Strut ou Spring MVC car JavaEE seul est rarement utilisé.</a></div>

<a id="magicparlabel-2766"></a>

###### <a id="magicparlabel-2766"></a><a id="magicparlabel-2767"><span class="subparagraph_label">PHP contre .NET</span></a>

<a id="magicparlabel-2767"></a>

<div class="standard"><a id="magicparlabel-2767"></a><a id="magicparlabel-2768">Très bon pour grosse équipe. Le XAML et le patron de conception architectural MVVM</a>

<div class="foot"><a id="magicparlabel-2768"><span class="foot_label">2</span></a>

<div class="foot_inner"><a id="magicparlabel-2768"></a>

<div class="plain_layout"><a id="magicparlabel-2768"></a><a id="magicparlabel-2772"><span class="flex_url">https://msdn.microsoft.com/en-us/library/hh848246.aspx</span></a></div>

<a id="magicparlabel-2772"></a></div>

</div>

<a id="magicparlabel-2772">sous jacent avec le langage C# qui est sans doute un des meilleurs langages orientés objet. Sa courbe d’apprentissage est acceptable mais quid d’une migration vers un nouvel appareil? Il y a aussi l'obligation de se plier au patron MVVM qui n’est pas le MVC, qui me semble plus adéquat pour l'analyse. Il y a aussi le fait qu'il faut utiliser les produits Microsoft (Visual Studio, I2S), ...</a></div>

<a id="magicparlabel-2772"></a>

###### <a id="magicparlabel-2772"></a><a id="magicparlabel-2777"><span class="subparagraph_label">PHP avec Angularjs, Android et iOS</span></a>

<a id="magicparlabel-2777"></a>

<div class="standard"><a id="magicparlabel-2777"></a><a id="magicparlabel-2778">Si la vue utilise un web service REST, il est découplé avec la frontend et permet de développer sans code PHP la vue. Angularjs</a>

<div class="foot"><a id="magicparlabel-2778"><span class="foot_label">3</span></a>

<div class="foot_inner"><a id="magicparlabel-2778"></a>

<div class="plain_layout"><a id="magicparlabel-2778"></a><a id="magicparlabel-2782"><span class="flex_url">https://angularjs.org/</span></a></div>

<a id="magicparlabel-2782"></a></div>

</div>

<a id="magicparlabel-2782">est un framework frontend qui permet d’étendre le HTML. Il utilise le patron MVC et le langage javascript. Il peut être utilisé en fragment en laissant de côté certains aspects techniques plus complexes. Une simple instruction en HTML permet de charger cette bibliothèque et ne demande donc rien de particulier pour les outils de développement. La documentation est excellente et l’équipe de Google dans une optique de promotion de ce framework fait un gros travail pour faciliter la courbe d’apprentissage. Si j’arrive à découpler convenablement le frontend du backend, je pourrai envisager une version Android voire IOS de cette application. Il ne s’agira en fait que d’une vue permettant aux utilisateurs de communiquer avec le backend écrit en PHP.</a></div>

<a id="magicparlabel-2782"></a>

###### <a id="magicparlabel-2782"></a><a id="magicparlabel-2787"><span class="subparagraph_label">Bootstrap</span></a>

<div class="foot"><a id="magicparlabel-2787"><span class="foot_label">4</span></a>

<div class="foot_inner"><a id="magicparlabel-2787"></a>

<div class="plain_layout"><a id="magicparlabel-2787"></a><a id="magicparlabel-2791"><span class="flex_url">https://getbootstrap.com/</span></a></div>

<a id="magicparlabel-2791"></a></div>

</div>

<a id="magicparlabel-2791"></a>

<a id="magicparlabel-2791"></a>

<div class="standard"><a id="magicparlabel-2791"></a><a id="magicparlabel-2796">Ce framework CSS est très utile et donne des rendus impressionnants avec un minimum d’effort. Il est “responsive” et permet de developper “mobile-oriented”.</a></div>

<a id="magicparlabel-2796"></a>

### <a id="magicparlabel-2796"></a><a id="magicparlabel-2797"><span class="subsection_label">3.1.2</span> Base de données</a>

<a id="magicparlabel-2797"></a>

###### <a id="magicparlabel-2797"></a><a id="magicparlabel-2798"><span class="subparagraph_label">MySQL</span></a>

<a id="magicparlabel-2798"></a>

<div class="standard"><a id="magicparlabel-2798"></a><a id="magicparlabel-2799">Très populaire, s’interface bien avec PHP, documentation claire, excellent tutoriel sur openclassroom</a>

<div class="foot"><a id="magicparlabel-2799"><span class="foot_label">5</span></a>

<div class="foot_inner"><a id="magicparlabel-2799"></a>

<div class="plain_layout"><a id="magicparlabel-2799"></a><a id="magicparlabel-2803"><span class="flex_url">https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql</span></a></div>

<a id="magicparlabel-2803"></a></div>

</div>

<a id="magicparlabel-2803">(ancienne étudiante de l’ULB), stackoverflow</a>

<div class="foot"><a id="magicparlabel-2803"><span class="foot_label">6</span></a>

<div class="foot_inner"><a id="magicparlabel-2803"></a>

<div class="plain_layout"><a id="magicparlabel-2803"></a><a id="magicparlabel-2811"><span class="flex_url">https://stackoverflow.com/</span></a></div>

<a id="magicparlabel-2811"></a></div>

</div>

<a id="magicparlabel-2811">déborde de questions et réponses sur ce gestionnaire de base de données, autant de bonnes raisons pour l'adopter. J’ai hésité car PostgreSQL est orienté objet et permet donc de se passer du mapping relationnel-objet. J’ai finalement décidé de ne pas utiliser d’ORM et de mettre en place les requêtes SQL adéquates. J’étais aussi attiré par une base de donnée no SQL comme mongoDB. Cependant, je pense que les données que je vais utiliser demande d’être structurées (par opposition aux enregistrements clé-valeur s’imbriquant et pouvant laisser la place à une certaine difficulté pour la maintenance et les requêtes), en particulier les lignes d’achat et les commandes, je préfère donc rester en SQL relationnel.</a></div>

<a id="magicparlabel-2811"></a>

## <a id="magicparlabel-2811"></a><a id="magicparlabel-2816"><span class="section_label">3.2</span> Framework</a>

<a id="magicparlabel-2816"></a>

<div class="standard"><a id="magicparlabel-2816"></a><a id="magicparlabel-2817">Pour rappel un Framework est un cadre de travail qui permet au programmeur de développer une application logicielle selon une certaine architecture basée sur un patron de conception. Cette architecture est munie la plupart du temps d'une API (pour les utilisateurs ou les formulaires par exemple) permettant d'augmenter la productivité du programmeur. Un travail professionnel dans le domaine de l'informatique de gestion suppose de nos jours pratiquement à chaque fois l'utilisation d'un framework. En PHP, il existe Symfony</a>

<div class="foot"><a id="magicparlabel-2817"><span class="foot_label">7</span></a>

<div class="foot_inner"><a id="magicparlabel-2817"></a>

<div class="plain_layout"><a id="magicparlabel-2817"></a><a id="magicparlabel-2821"><span class="flex_url">https://symfony.com/</span></a></div>

<a id="magicparlabel-2821"></a></div>

</div>

<a id="magicparlabel-2821">ou Zend</a>

<div class="foot"><a id="magicparlabel-2821"><span class="foot_label">8</span></a>

<div class="foot_inner"><a id="magicparlabel-2821"></a>

<div class="plain_layout"><a id="magicparlabel-2821"></a><a id="magicparlabel-2829"><span class="flex_url">http://framework.zend.com/</span></a></div>

<a id="magicparlabel-2829"></a></div>

</div>

<a id="magicparlabel-2829">(parmi des dizaines d'autres). Ils sont très demandés dans l'industrie logiciel. Cependant, ici, il n'est pas vraiment question de rentrer dans les détails d'un framework particulier, d'en acquérir les connaissances utiles pour le monde du travail et de rester ainsi bloqué dans un créneau pour le reste de sa carrière (pour autant que ce framework n'ait pas été dépassé par un autre). Il s'agit plutôt de comprendre la logique générale d'un framework en le créant soi-même, afin de rester maître en tout situation de l'outil technologique utilisé. En soi, les frameworks, mêmes s'ils diffèrent en langage de programmation et/ou en pattern de conception architectural, répondent toujours à la même logique fondamentale. Une fois comprise, il est possible de s'adapter rapidement (sans être trop optimiste toutefois, un framework comme Struts et JavaEE demande des mois d'études) à n'importe quel outils de création de logiciels. En adoptant cette logique, il s'agit de mettre à profit mes études d'informatique de gestion et de rester dans une démarche rationnelle quant aux outils de développement.</a></div>

<a id="magicparlabel-2829"></a>

### <a id="magicparlabel-2829"></a><a id="magicparlabel-2834"><span class="subsection_label">3.2.1</span> MVC</a>

<a id="magicparlabel-2834"></a>

<div class="standard"><a id="magicparlabel-2834"></a><a id="magicparlabel-2835">Le site du professeur B. Estellon</a>

<div class="foot"><a id="magicparlabel-2835"><span class="foot_label">9</span></a>

<div class="foot_inner"><a id="magicparlabel-2835"></a>

<div class="plain_layout"><a id="magicparlabel-2835"></a><a id="magicparlabel-2839"><span class="flex_url">http://pageperso.lif.univ-mrs.fr/~bertrand.estellon/web2/cours_mvc.pdf</span></a></div>

<a id="magicparlabel-2839"></a></div>

</div>

<a id="magicparlabel-2839">fournit pour ses étudiants une framework rudimentaire qui s'apparente à ce qu'on appelle un micro-framework</a>

<div class="foot"><a id="magicparlabel-2839"><span class="foot_label">10</span></a>

<div class="foot_inner"><a id="magicparlabel-2839"></a>

<div class="plain_layout"><a id="magicparlabel-2839"></a><a id="magicparlabel-2847"><span class="flex_url">https://en.wikipedia.org/wiki/Microframework</span></a></div>

<a id="magicparlabel-2847"></a></div>

</div>

<a id="magicparlabel-2847">. Selon l'article de Wikipedia, quatre fonctionalités sont assurées : 1) les comptes; 2) l'abstraction de la base de données; 3) la vérification des données introduites par l'utilisateur et 4) le template web</a>

<div class="foot"><a id="magicparlabel-2847"><span class="foot_label">11</span></a>

<div class="foot_inner"><a id="magicparlabel-2847"></a>

<div class="plain_layout"><a id="magicparlabel-2847"></a><a id="magicparlabel-2855">“It lacks most of the functionality which is common to expect in a full fledged web application framework, such as; Accounts, authentication, authorization, roles, etc. Database abstraction via a object-relational mapping. Input validation and input sanitation. Web template engine.”<span class="flex_url">https://en.wikipedia.org/wiki/Microframework</span></a></div>

<a id="magicparlabel-2855"></a></div>

</div>

<a id="magicparlabel-2855">. Eh bien, il s'agit des quatre fonctions que vont remplir ce framework. Voici un schéma expliquant le fonctionnement générale :</a></div>

<a id="magicparlabel-2855"></a>

<div class="float float-figure"><a id="magicparlabel-2855"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-2855"></a><a id="magicparlabel-25426">![image: 1_Volumes_USB_TFE_Screen_Shot_2016-03-31_at_18_11_35.png](./naturalcorner_files/1_Volumes_USB_TFE_Screen_Shot_2016-03-31_at_18_11_35.png)</a></div>

<a id="magicparlabel-25426"></a>

<div class="plain_layout"><a id="magicparlabel-25426"></a><a id="magicparlabel-2865"><span class="float-caption-Standard float-caption float-caption-standard">Figure 3.2.1:MVC</span></a></div>

<a id="magicparlabel-2865"></a></div>

<a id="magicparlabel-2865"></a>

<div class="standard"><a id="magicparlabel-2865"></a><a id="magicparlabel-2871">En PHP, le fichier index.php ressemble à ceci :</a></div>

<a id="magicparlabel-2871"></a>

<div class="float float-figure"><a id="magicparlabel-2871"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-2871"></a><a id="magicparlabel-2876">![image: 2_Volumes_USB_TFE_Screen_Shot_2016-05-15_at_22_53_25.png](./naturalcorner_files/2_Volumes_USB_TFE_Screen_Shot_2016-05-15_at_22_53_25.png) <span class="float-caption-Standard float-caption float-caption-standard">Figure 3.2.2:index.php</span></a></div>

<a id="magicparlabel-2876"></a></div>

<a id="magicparlabel-2876"></a>

<div class="standard"><a id="magicparlabel-2876"></a><a id="magicparlabel-2881">C'est la réalisation du patron de conception Front controller</a>

<div class="foot"><a id="magicparlabel-2881"><span class="foot_label">12</span></a>

<div class="foot_inner"><a id="magicparlabel-2881"></a>

<div class="plain_layout"><a id="magicparlabel-2881"></a><a id="magicparlabel-2885"><span class="flex_url">https://en.wikipedia.org/wiki/Front_controller</span></a></div>

<a id="magicparlabel-2885"></a></div>

</div>

<a id="magicparlabel-2885">. Il va centraliser les requêtes du protocole HTTP. Chaque requête est en même temps séparée par une action et une vue. Les lignes 35 à 40 ont été ajoutées pour récrire les URL. J'aimerais attirer l'attention du lecteur sur le fait que le langage PHP permet une très large marge de manoeuvre comparativement aux autres langages web comme JavaEE ou C# et donne vraiment un sentiment de liberté au développeur. Une idée est toujours réalisable avec un peu de recherche personnelle.</a></div>

<a id="magicparlabel-2885"></a>

### <a id="magicparlabel-2885"></a><a id="magicparlabel-2890"><span class="subsection_label">3.2.2</span> Framework "fait maison"</a>

<a id="magicparlabel-2890"></a>

<div class="standard"><a id="magicparlabel-2890"></a><a id="magicparlabel-2891">Un framework</a>

<div class="foot"><a id="magicparlabel-2891"><span class="foot_label">13</span></a>

<div class="foot_inner"><a id="magicparlabel-2891"></a>

<div class="plain_layout"><a id="magicparlabel-2891"></a><a id="magicparlabel-2895"><span class="flex_url">http://pageperso.lif.univ-mrs.fr/~bertrand.estellon/web2/</span></a></div>

<a id="magicparlabel-2895"></a></div>

</div>

<a id="magicparlabel-2895">fait par soi-même contient plusieurs avantages</a>

<div class="foot"><a id="magicparlabel-2895"><span class="foot_label">14</span></a>

<div class="foot_inner"><a id="magicparlabel-2895"></a>

<div class="plain_layout"><a id="magicparlabel-2895"></a><a id="magicparlabel-2903">Michael Peacock, PHP 5 Social Networking, Packt Publishing, 2010, p.14-15</a></div>

<a id="magicparlabel-2903"></a></div>

</div>

<a id="magicparlabel-2903">:</a></div>

<a id="magicparlabel-2903"></a>

<a id="magicparlabel-2903"></a>
<a id="magicparlabel-2904">*   Plus facile à mettre à jour et à maintenir puisque je l'ai construit.*   Pas de problèmes de licences.*   Pousse à une connaissance étendue de la conception orientée objet et des technologies WEB (PHP, requêtes http, css, javascript, HTML5, ...). D'une part, les choix d'implémentation doivent être réfléchis en fonction de la conception objet et de l'analyse, d'autre part des efforts de compréhensions supplémentaires sont nécessaires pour appréhender les différents concepts, que ce soit du point de vue du langage web (ici PHP et la pile HTML5) ou du déploiement sur l'internet. Rien n'est laissé à une couche logicielle pré-construite, très utile en terme de productivité certes mais occultant souvent les raisonnements sous-jacents et le bien fondé de l'utilisation de tel ou tel patron de conception. Il s'agit à mon avis d'un must dans une optique d'apprentissage.*   Le code est plus efficient puisqu'il ne s'embarasse pas des différents modules et couches logiciels des frameworks de l'industrie.</a>

<a id="magicparlabel-2904"></a>

## <a id="magicparlabel-2904"></a><a id="magicparlabel-2908"><span class="section_label">3.3</span> Outils logiciels</a>

<a id="magicparlabel-2908"></a>

<a id="magicparlabel-2908"></a>
<a id="magicparlabel-2909"></a>
*   <a id="magicparlabel-2909">Eclipse PHP</a>

    <div class="foot"><a id="magicparlabel-2909"><span class="foot_label">15</span></a>

    <div class="foot_inner"><a id="magicparlabel-2909"></a>

    <div class="plain_layout"><a id="magicparlabel-2909"></a><a id="magicparlabel-2913"><span class="flex_url">https://eclipse.org/pdt/</span></a></div>

    <a id="magicparlabel-2913"></a></div>

    </div>

    <a id="magicparlabel-2913">(version Mars) me convient car j’ai l’habitude de l’utiliser. Il est particulièrement populaire, open-source et agréable à utiliser. L’auto-completion est assurée et il prévoit des outils de développement pour le javascript et le html-css. Je peux utiliser si je désire le débuggueur (ici X-DEBUG). J’ai accès à un CVS (avec Github) grace à un module téléchargé et ajouté, je peux aussi faire des tests unitaires avec PHPUnit qui est interfacé dans ce EDI.</a>
<a id="magicparlabel-2913"></a>
*   <a id="magicparlabel-2913">Navigateur Chrome</a>

    <div class="foot"><a id="magicparlabel-2913"><span class="foot_label">16</span></a>

    <div class="foot_inner"><a id="magicparlabel-2913"></a>

    <div class="plain_layout"><a id="magicparlabel-2913"></a><a id="magicparlabel-2922"><span class="flex_url">https://www.google.com/chrome/browser/desktop/index.html</span></a></div>

    <a id="magicparlabel-2922"></a></div>

    </div>

    <a id="magicparlabel-2922">: offre des outils pour le développeur web, notamment une console javascript, une possibilité de voir le rendu sur différents devices (smartphones, tablettes)</a>
<a id="magicparlabel-2922"></a>
*   <a id="magicparlabel-2922">StarUML</a>

    <div class="foot"><a id="magicparlabel-2922"><span class="foot_label">17</span></a>

    <div class="foot_inner"><a id="magicparlabel-2922"></a>

    <div class="plain_layout"><a id="magicparlabel-2922"></a><a id="magicparlabel-2931"><span class="flex_url">http://staruml.io/</span></a></div>

    <a id="magicparlabel-2931"></a></div>

    </div>

    <a id="magicparlabel-2931">: ce logiciel permet de créer des diagrammes UML de qualité.</a>
<a id="magicparlabel-2931"></a>
*   <a id="magicparlabel-2931">Google App Engine</a>

    <div class="foot"><a id="magicparlabel-2931"><span class="foot_label">18</span></a>

    <div class="foot_inner"><a id="magicparlabel-2931"></a>

    <div class="plain_layout"><a id="magicparlabel-2931"></a><a id="magicparlabel-2940"><span class="flex_url">https://cloud.google.com/appengine/docs</span></a></div>

    <a id="magicparlabel-2940"></a></div>

    </div>

    <a id="magicparlabel-2940">: Ce service PaaS de Google est très intéressant car il permet de déployer sur le web une application très facilement. Il propose une base de données Google Cloud SQL (MySQL) et un certain nombre d’APIs plus ou moins intéressantes. Tout ce que j’apprends en déployant et maintenant une application web avec ce service cloud est utilisable sur n’importe quel autre service Cloud. Je pense profondément qu’il s’agira d’un plus indéniable pour ma carrière de développeur.</a>
<a id="magicparlabel-2940"></a>
*   <a id="magicparlabel-2940">On peut ajouter GitHub</a>

    <div class="foot"><a id="magicparlabel-2940"><span class="foot_label">19</span></a>

    <div class="foot_inner"><a id="magicparlabel-2940"></a>

    <div class="plain_layout"><a id="magicparlabel-2940"></a><a id="magicparlabel-2949"><span class="flex_url">https://github.com/userdanydan/NaturalCorner</span></a></div>

    <a id="magicparlabel-2949"></a></div>

    </div>

    <a id="magicparlabel-2949">, serveur open source et partagé pour git, permettant de garder un historique et des “forks” de mes versions de l’application.</a>
<a id="magicparlabel-2949"></a>

<a id="magicparlabel-2949"></a>

# <a id="magicparlabel-2949"></a><a id="magicparlabel-2954"><span class="part_label">Partie II</span> Fonctionnalités de l'application Natural Corner</a>

<a id="magicparlabel-2954"></a>

# <a id="magicparlabel-2954"></a><a id="magicparlabel-2955">

<div class="chapter_label">Chapitre 4</div>

Expression initiale des besoins</a>

<a id="magicparlabel-2955"></a>

## <a id="magicparlabel-2955"></a><a id="magicparlabel-2956"><span class="section_label">4.1</span> Vision du projet</a>

<a id="magicparlabel-2956"></a>

#### <a id="magicparlabel-2956"></a><a id="magicparlabel-2957"><span class="subsubsection_label">Demande initiale</span></a>

<a id="magicparlabel-2957"></a>

<div class="standard"><a id="magicparlabel-2957"></a><a id="magicparlabel-2958">Le gérant du magasin Natural Corner, spécialisé en produit bio, aimerait offrir à sa clientèle une application web utilisable sur tablette et smartphone pour leur permettre de pré-commander les produits frais. L’objectif fondamental est de permettre aux clients de chercher les produits frais par catégorie ou par mot-clé, en connaître le prix, de créer un panier virtuel et les pré commander éventuellement. L’application doit aussi permettre au gérant du magasin de faciliter l’écoulement des invendus en proposant une promotion journalière sur ces produits frais. Enfin, les produits devront afficher des informations en relation avec la fraîcheur, la qualité et le développement durable.</a></div>

<a id="magicparlabel-2958"></a>

#### <a id="magicparlabel-2958"></a><a id="magicparlabel-2959"><span class="subsubsection_label">Positionnement</span></a>

<a id="magicparlabel-2959"></a>

<div class="standard"><a id="magicparlabel-2959"></a><a id="magicparlabel-2960">L’application Natural Corner devra être la plateforme de commande des produits frais. Il existe déjà un site internet et ne devra pas le concurrencer. Le but du projet consiste à créer une étape supplémentaire dans le logique “bio” du magasin en rationalisant la commandes des produits frais en relation avec les fermes et producteurs proches du magasin. Une gestion à flux tendu et en relation avec les récoltes se rapproche de la philosophie “bio” et du développement durable. Se différencier des autres magasins “bio” en proposant un plus contemporain qui plaira à la jeune clientèle .</a></div>

<a id="magicparlabel-2960"></a>

## <a id="magicparlabel-2960"></a><a id="magicparlabel-2961"><span class="section_label">4.2</span> Analyse métier</a>

<a id="magicparlabel-2961"></a>

### <a id="magicparlabel-2961"></a><a id="magicparlabel-2962"><span class="subsection_label">4.2.1</span> Natural Corner</a>

<a id="magicparlabel-2962"></a>

<div class="standard"><a id="magicparlabel-2962"></a><a id="magicparlabel-2963">Le 26 avril 2009</a>

<div class="foot"><a id="magicparlabel-2963"><span class="foot_label">1</span></a>

<div class="foot_inner"><a id="magicparlabel-2963"></a>

<div class="plain_layout"><a id="magicparlabel-2963"></a><a id="magicparlabel-2967">Cette section est le fruit d'une discussion avec le gérant de Natural Corner</a></div>

<a id="magicparlabel-2967"></a></div>

</div>

<a id="magicparlabel-2967">, Natural Corner ouvre son enseigne au milieu de la ville de Bruxelles dans une situation idéale. Aboudi Ei, ancien restaurateur dans un restaurant de la place de la vieille halle au blé a été éduqué culinairement à l'utilisation des produits locaux. Pendant ses années de travail dans la restauration, il a appris que la qualité des aliments est au moins aussi importante que la maitrise de l'art de cuisiner. Il s'est pris de passion pour le bio et a voulu changer la direction de sa carrière professionnelle en réalisant le projet d'ouverture d'un magasin bio. Les autres passionnés pourront ainsi plus facilement se procurer des aliments de qualité.</a></div>

<a id="magicparlabel-2967"></a>

<div class="standard"><a id="magicparlabel-2967"></a><a id="magicparlabel-2968">A. Ei avait constaté en effet le manque criant de boutique bio dans le centre ville. Il n'y avait alors guère que le magasin bio de la rue des Chartreux pouvant proposer des produits bio labelisés. Le coin de la rue de l'escalier donnant sur la place de la vieille halle au blé était alors à vendre. Les locaux étaient un endroit idéal pour créer le magasin. Ce fut un succès quasi immédiat. Après quatre mois de travail ardu, à la rentrée, la clientèle s'est manifesté avec enthousiasme et le succès n'a fait qu'augmenter depuis. Ce succès vient du service et de l'écoute des clients. Le catalogue a changé de 90 pour cent depuis l'ouverture. Ce sont les discussions avec les clients, leurs attentes et leurs desirs qui ont été mis en avant. Le choix des produits était à chaque fois à l'origine d'une demande. La clientèle est particulièrement diversifiée, toutes les tranches d'âge viennent se procurer au magasin Natural Corner.</a></div>

<a id="magicparlabel-2968"></a>

### <a id="magicparlabel-2968"></a><a id="magicparlabel-2969"><span class="subsection_label">4.2.2</span> Logique métier</a>

<a id="magicparlabel-2969"></a>

<div class="standard"><a id="magicparlabel-2969"></a><a id="magicparlabel-2970">Du point de vue du business, on peut dire que Natural Corner fonctionne selon un circuit court à flux tendu, le stock est à son état minimum et les commandes maximisées de manière à garantir la fraîcheur des produits. Les dates doivent être les meilleurs proposées, aussi les quantités commandées sont petites. Cela représente beaucoup de travail physique, on peut compter plus de 50 commandes par semaine et les commandes de produits frais ont lieu tous les jours. Pour garantir la fraîcheur, les bacs sont régulièrement changés, les dates vérifiées systématiquement. Une ristourne à l'avantage du client est proposé lorsqu'un produit va être sur le point de perdre sa fraîcheur, ce qui facilité le roulement du stock.</a></div>

<a id="magicparlabel-2970"></a>

<div class="standard"><a id="magicparlabel-2970"></a><a id="magicparlabel-2971">Pour accomplir ce travail, le staff est réprésenté par un gérant et trois vendeurs. Le magasin Natural Corner bénéficie du label Biogarantie</a>

<div class="foot"><a id="magicparlabel-2971"><span class="foot_label">2</span></a>

<div class="foot_inner"><a id="magicparlabel-2971"></a>

<div class="plain_layout"><a id="magicparlabel-2971"></a><a id="magicparlabel-2975"><span class="flex_url">http://www.biogarantie.be/fr</span></a></div>

<a id="magicparlabel-2975"></a></div>

</div>

<a id="magicparlabel-2975">.</a></div>

<a id="magicparlabel-2975"></a>

<div class="float float-figure"><a id="magicparlabel-2975"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-2975"></a><a id="magicparlabel-2984">![image: 3_Volumes_USB_TFE_Screen_Shot_2016-05-16_at_10_05_24.png](./naturalcorner_files/3_Volumes_USB_TFE_Screen_Shot_2016-05-16_at_10_05_24.png)</a></div>

<a id="magicparlabel-2984"></a>

<div class="plain_layout"><a id="magicparlabel-2984"></a><a id="magicparlabel-2985"><span class="float-caption-Standard float-caption float-caption-standard">Figure 4.2.1:Label Biogarantie de Natural Corner</span></a></div>

<a id="magicparlabel-2985"></a></div>

<a id="magicparlabel-2985"></a>

<div class="standard"><a id="magicparlabel-2985"></a><a id="magicparlabel-2991">Deux points de vue se dégagent : le point de vue des clients du magasin Natural Corner, et celui des clients du marché belge utilisant déjà une application de vente en ligne pour commander des produits bio.</a></div>

<a id="magicparlabel-2991"></a>

<div class="standard"><a id="magicparlabel-2991"></a><a id="magicparlabel-2992">Les clients de Natural Corner sont des habitués recherchant des produits spécifiques. Ils aiment en général l’idée d’avoir un magasin bio dans le quartier. Cependant, le site internet du magasin n’offre que des informations d’ordre général. Il serait intéressant de leur proposer une application leur permettant de faire leur course en ligne et d’éviter de chercher dans les rayons.</a></div>

<a id="magicparlabel-2992"></a>

<div class="standard"><a id="magicparlabel-2992"></a><a id="magicparlabel-2993">En ce qui concerne le marché bio, il existe une série de site web proposant les achats en ligne. En faisant une simple recherche Google, on trouve une grande quantité de site français qui propose la commande en ligne de produits bio. Il s’agit souvent de sites traditionnels ne proposant pas d’app IOS ou Android et n’étant pas responsive. Il y a <span class="flex_url">http://www.greenweez.com/</span> dont le site est responsive et qui livre en Belgique, par exemple.</a></div>

<a id="magicparlabel-2993"></a>

<div class="standard"><a id="magicparlabel-2993"></a><a id="magicparlabel-2998">Le plus gros concurrent, à mon sens, est sans doute Collect&Go du groupe Colruyt sous le nom Bioplanet qui propose une app et qui est responsive pour les tablettes et smartphones. Après avoir exprimé cette opinion au gérant, il m'a expliqué que le positionnement n'est en fait pas le même. Dans le cas des grandes enseignes comme Bio Planet ou Farm, l'assortiment proposé correspond au minimum des exigences bio, l'important restant le prix et la rentabilité</a>

<div class="foot"><a id="magicparlabel-2998"><span class="foot_label">3</span></a>

<div class="foot_inner"><a id="magicparlabel-2998"></a>

<div class="plain_layout"><a id="magicparlabel-2998"></a><a id="magicparlabel-3002">A titre informatif, le label d'un magasin ou d'un produit doit toujours être vérifié en priorité pour tout ce qui relève de l'agriculture biologique <span class="flex_url">http://ec.europa.eu/agriculture/organic/index_fr.htm</span></a></div>

<a id="magicparlabel-3002"></a></div>

</div>

<a id="magicparlabel-3002">. On peut prendre l'exemple connu du thé Yogithea qui a disparu des rayons parce que son prix avait subitement augmenté en raison de la variation du prix du marché du thé. Par opposition, un magasin bio de proximité continue à proposer un produit à ses clients si la demande existe.</a></div>

<a id="magicparlabel-3002"></a>

<div class="standard"><a id="magicparlabel-3002"></a><a id="magicparlabel-3007">Notons l’existence de Delhaize qui propose son assortiment bio en ligne et Carrefour avec son Carrefour-Drive.</a></div>

<a id="magicparlabel-3007"></a>

<div class="standard"><a id="magicparlabel-3007"></a><a id="magicparlabel-3008">Natural Corner doit se dégager de cette concurrence en proposant une approche familiale des commandes en ligne. Tout l’enjeu est de garder l’esprit du magasin tout en se modernisant par une application web.</a></div>

<a id="magicparlabel-3008"></a>

<div class="standard"><a id="magicparlabel-3008"></a><a id="magicparlabel-3009">Une des idées qui est ressortie pendant mes interviews avec le gérant du magasin est de mettre en relation la page Facebook du magasin, des recettes de cuisine et les promotions. Le créneau sur lequel cette application se situe n’est pas celui des grands sites de vente en ligne impersonnels, il s’agit de faire participer la communauté du quartier et les fans de produits bio. Plus qu’une simple opportunité d’augmenter ses parts de marché, il est surtout question de rendre la démarche de consommation bio agréable et amicale.</a></div>

<a id="magicparlabel-3009"></a>

## <a id="magicparlabel-3009"></a><a id="magicparlabel-3010"><span class="section_label">4.3</span> Exigences fonctionnelles</a>

<a id="magicparlabel-3010"></a>

<div class="standard"><a id="magicparlabel-3010"></a><a id="magicparlabel-3011">Cette application permettra à l’utilisateur de rechercher un produit, d’en découvrir les spécificités, de le choisir et de le précommander.</a></div>

<a id="magicparlabel-3011"></a>

#### <a id="magicparlabel-3011"></a><a id="magicparlabel-3012"><span class="subsubsection_label">Rechercher un produit</span></a>

<a id="magicparlabel-3012"></a>

<div class="standard"><a id="magicparlabel-3012"></a><a id="magicparlabel-3013">Le catalogue des produits frais permet d’y rechercher un produit. Il existera plusieurs méthodes de recherche. Le critère pourra être le nom, le mot-clé, la saison, le prix, … Les résultats seront facilement consultables et reclassables. Il y aura par défaut une offre lui permettant de voir les produits sélectionnables.</a></div>

<a id="magicparlabel-3013"></a>

#### <a id="magicparlabel-3013"></a><a id="magicparlabel-3014"><span class="subsubsection_label">Informations sur le produit</span></a>

<a id="magicparlabel-3014"></a>

<div class="standard"><a id="magicparlabel-3014"></a><a id="magicparlabel-3015">Le produit se présentera au client en affichant : Une image le prix et la disponibilité la saison son origine une information de nature didactique sur les vertus curatives par ex.</a></div>

<a id="magicparlabel-3015"></a>

#### <a id="magicparlabel-3015"></a><a id="magicparlabel-3016"><span class="subsubsection_label">Choix du produit</span></a>

<a id="magicparlabel-3016"></a>

<div class="standard"><a id="magicparlabel-3016"></a><a id="magicparlabel-3017">Il y aura un panier qui se remplira au fur et à mesure des sélections sur client. Une fois rempli le panier, celui-ci pour être validé sur une page spécifique. Ce panier pourra être changé ou supprimé par la suite.</a></div>

<a id="magicparlabel-3017"></a>

#### <a id="magicparlabel-3017"></a><a id="magicparlabel-3018"><span class="subsubsection_label">Commande</span></a>

<a id="magicparlabel-3018"></a>

<div class="standard"><a id="magicparlabel-3018"></a><a id="magicparlabel-3019">Un formulaire de bon de commande confirme le panier. En fonction de la disponibilité le client est invité à venir chercher son panier au magasin.</a></div>

<a id="magicparlabel-3019"></a>

#### <a id="magicparlabel-3019"></a><a id="magicparlabel-3020"><span class="subsubsection_label">Promotions du jour</span></a>

<a id="magicparlabel-3020"></a>

<div class="standard"><a id="magicparlabel-3020"></a><a id="magicparlabel-3021">Une promotion journalière sera envoyé aux clients par notification. Les employés du magasin seront chargés d’envoyer cette notification.</a></div>

<a id="magicparlabel-3021"></a>

#### <a id="magicparlabel-3021"></a><a id="magicparlabel-3022"><span class="subsubsection_label">Facebook</span></a>

<a id="magicparlabel-3022"></a>

<div class="standard"><a id="magicparlabel-3022"></a><a id="magicparlabel-3023">Le client devrai “liker” la page Facebook de la boutique au moins une fois pour accéder aux services de l’application.</a></div>

<a id="magicparlabel-3023"></a>

#### <a id="magicparlabel-3023"></a><a id="magicparlabel-3024"><span class="subsubsection_label">Messages sociaux et durables</span></a>

<a id="magicparlabel-3024"></a>

<div class="standard"><a id="magicparlabel-3024"></a><a id="magicparlabel-3025">L’application devra permettre aux employés du magasin d’informer par un système de news sur les nouveaux produits.</a></div>

<a id="magicparlabel-3025"></a>

## <a id="magicparlabel-3025"></a><a id="magicparlabel-3026"><span class="section_label">4.4</span> Exigences non fonctionnelles</a>

<a id="magicparlabel-3026"></a>

#### <a id="magicparlabel-3026"></a><a id="magicparlabel-3027"><span class="subsubsection_label">Qualité professionnelle</span></a>

<a id="magicparlabel-3027"></a>

<div class="standard"><a id="magicparlabel-3027"></a><a id="magicparlabel-3028">L’application devra montrer un bon niveau de qualité afin de renvoyer un certain standing.</a></div>

<a id="magicparlabel-3028"></a>

#### <a id="magicparlabel-3028"></a><a id="magicparlabel-3029"><span class="subsubsection_label">Graphisme</span></a>

<a id="magicparlabel-3029"></a>

<div class="standard"><a id="magicparlabel-3029"></a><a id="magicparlabel-3030">Les logos et couleurs de l’enseigne doivent être gardés.</a></div>

<a id="magicparlabel-3030"></a>

## <a id="magicparlabel-3030"></a><a id="magicparlabel-3031"><span class="section_label">4.5</span> Exigences de performance</a>

<a id="magicparlabel-3031"></a>

<div class="standard"><a id="magicparlabel-3031"></a><a id="magicparlabel-3032">Le niveau de performance n’est pas essentiel puisqu’il vise une centaine de clients pour commencer. Cependant il faudra tenir en compte la possibilité de monter en charger dans les mois suivants.</a></div>

<a id="magicparlabel-3032"></a>

## <a id="magicparlabel-3032"></a><a id="magicparlabel-3033"><span class="section_label">4.6</span> Contraintes de conception</a>

<a id="magicparlabel-3033"></a>

#### <a id="magicparlabel-3033"></a><a id="magicparlabel-3034"><span class="subsubsection_label">Base de données des produits</span></a>

<a id="magicparlabel-3034"></a>

<div class="standard"><a id="magicparlabel-3034"></a><a id="magicparlabel-3035">La base de données des produits sera créée avec les catalogues des fournisseurs. Le gérant du magasin aura la possibilité d’ajouter ou de retirer des produits.</a></div>

<a id="magicparlabel-3035"></a>

#### <a id="magicparlabel-3035"></a><a id="magicparlabel-3036"><span class="subsubsection_label">Base de données des clients</span></a>

<a id="magicparlabel-3036"></a>

<div class="standard"><a id="magicparlabel-3036"></a><a id="magicparlabel-3037">Les clients donneront des informations personnelles qui seront enregistrées dans la base de données. Ces informations seront sécurisées et confidentielles.</a></div>

<a id="magicparlabel-3037"></a>

#### <a id="magicparlabel-3037"></a><a id="magicparlabel-3038"><span class="subsubsection_label">Panier</span></a>

<a id="magicparlabel-3038"></a>

<div class="standard"><a id="magicparlabel-3038"></a><a id="magicparlabel-3039">Le panier sera enregistré sous forme de cookies pour une durée d’un an. Le client pourra ainsi retrouver son panier tel quel dans une nouvelle session.</a></div>

<a id="magicparlabel-3039"></a>

#### <a id="magicparlabel-3039"></a><a id="magicparlabel-3040"><span class="subsubsection_label">Support</span></a>

<a id="magicparlabel-3040"></a>

<div class="standard"><a id="magicparlabel-3040"></a><a id="magicparlabel-3041">L’application sera compatible sur les tablettes et smartphone IOS et Android.</a></div>

<a id="magicparlabel-3041"></a>

# <a id="magicparlabel-3041"></a><a id="magicparlabel-3042">

<div class="chapter_label">Chapitre 5</div>

Cas d'utilisation</a>

<a id="magicparlabel-3042"></a>

<div class="standard"><a id="magicparlabel-3042"></a><a id="magicparlabel-3043">Nous allons essayer de dégager à qui et pour quoi faire les informations vont être montrées</a>

<div class="foot"><a id="magicparlabel-3043"><span class="foot_label">1</span></a>

<div class="foot_inner"><a id="magicparlabel-3043"></a>

<div class="plain_layout"><a id="magicparlabel-3043"></a><a id="magicparlabel-3047">Roques, P., UML2 Modéliser une application web, Eyrolles 4ème édition, 2008, p.40</a></div>

<a id="magicparlabel-3047"></a></div>

</div>

<a id="magicparlabel-3047">. Nous allons identifier les acteurs et les cas d'identification.</a></div>

<a id="magicparlabel-3047"></a>

## <a id="magicparlabel-3047"></a><a id="magicparlabel-3048"><span class="section_label">5.1</span> Use case des utilisateurs</a>

<a id="magicparlabel-3048"></a>

<div class="standard"><a id="magicparlabel-3048"></a><a id="magicparlabel-3049">L'acteur est l'utilisateur de l'application. Les cas d'utilisation ont été mis en évidence par l'expression des besoins préliminaire : Créer son compte, gérer son compte, chercher des produits, gérer son panier, commander.</a></div>

<a id="magicparlabel-3049"></a>

<div class="float float-figure"><a id="magicparlabel-3049"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3049"></a><a id="magicparlabel-3054">![image: 4_Volumes_USB_TFE_UC_utilisateurs.png](./naturalcorner_files/4_Volumes_USB_TFE_UC_utilisateurs.png)</a></div>

<a id="magicparlabel-3054"></a>

<div class="plain_layout"><a id="magicparlabel-3054"></a><a id="magicparlabel-3055"><span class="float-caption-Standard float-caption float-caption-standard">Figure 5.1.1:Use case des utilisateurs</span></a></div>

<a id="magicparlabel-3055"></a></div>

<a id="magicparlabel-3055"></a>

## <a id="magicparlabel-3055"></a><a id="magicparlabel-3060"><span class="section_label">5.2</span> Use case des employés</a>

<a id="magicparlabel-3060"></a>

<div class="standard"><a id="magicparlabel-3060"></a><a id="magicparlabel-3061">Un gérant hérite d'un vendeur parce qu'il peut réaliser son travail et a, en plus, la charge de la mise à jour du catalogue. Les cas d'utilisation sont maintenir le catalogue et envoyer des promos.</a></div>

<a id="magicparlabel-3061"></a>

<div class="float float-figure"><a id="magicparlabel-3061"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3061"></a><a id="magicparlabel-3066">![image: 5_Volumes_USB_TFE_UC_employes.png](./naturalcorner_files/5_Volumes_USB_TFE_UC_employes.png)</a></div>

<a id="magicparlabel-3066"></a>

<div class="plain_layout"><a id="magicparlabel-3066"></a><a id="magicparlabel-3067"><span class="float-caption-Standard float-caption float-caption-standard">Figure 5.2.1:Use case des employés</span></a></div>

<a id="magicparlabel-3067"></a></div>

<a id="magicparlabel-3067"></a>

## <a id="magicparlabel-3067"></a><a id="magicparlabel-3073"><span class="section_label">5.3</span> Use case secondaire</a>

<a id="magicparlabel-3073"></a>

### <a id="magicparlabel-3073"></a><a id="magicparlabel-3074"><span class="subsection_label">5.3.1</span> API</a>

<a id="magicparlabel-3074"></a>

<div class="standard"><a id="magicparlabel-3074"></a><a id="magicparlabel-3075">Il s'agit d'un cas d'utilisation secondaire qui correspond à la capacité de l'application à être utilisée par une autre application. Son développement aura lieu au chapitre 11.</a></div>

<a id="magicparlabel-3075"></a>

<div class="float float-figure"><a id="magicparlabel-3075"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3075"></a><a id="magicparlabel-3080">![image: 6_Volumes_USB_TFE_UC_secondaire_API.png](./naturalcorner_files/6_Volumes_USB_TFE_UC_secondaire_API.png)</a></div>

<a id="magicparlabel-3080"></a>

<div class="plain_layout"><a id="magicparlabel-3080"></a><a id="magicparlabel-3081"><span class="float-caption-Standard float-caption float-caption-standard">Figure 5.3.1:Use case secondaire - API</span></a></div>

<a id="magicparlabel-3081"></a></div>

<a id="magicparlabel-3081"></a>

## <a id="magicparlabel-3081"></a><a id="magicparlabel-3086"><span class="section_label">5.4</span> Classement des cas d'utilisation et planification du projet en itération</a>

<a id="magicparlabel-3086"></a>

<div class="standard"><a id="magicparlabel-3086"></a><a id="magicparlabel-3087">Pour réaliser le logiciel, j'ai décidé de donner une priorité aux cas d'utilisation en fonction des risques et de la priorité. Chaque cas d'utilisation correspond à une itération selon la méthodologue UP.</a></div>

<a id="magicparlabel-3087"></a>

<div style="height:2ex"><a id="magicparlabel-3087"></a>

<div class="standard" style="text-align: center;"><a id="magicparlabel-3087"></a><a id="magicparlabel-3089">

| 

<div class="plain_layout"><a id="magicparlabel-3174">Cas d'utilisation</a></div>

<a id="magicparlabel-3174"></a> | 

<div class="plain_layout"><a id="magicparlabel-3177">Priorité</a></div>

<a id="magicparlabel-3177"></a> | 

<div class="plain_layout"><a id="magicparlabel-3180">Risque</a></div>

<a id="magicparlabel-3180"></a> | 

<div class="plain_layout"><a id="magicparlabel-3183">Itération</a></div>

<a id="magicparlabel-3183"></a> |
| 

<div class="plain_layout"><a id="magicparlabel-3186">Créer un compte client</a></div>

<a id="magicparlabel-3186"></a> | 

<div class="plain_layout"><a id="magicparlabel-3189">Haute</a></div>

<a id="magicparlabel-3189"></a> | 

<div class="plain_layout"><a id="magicparlabel-3192">Moyen</a></div>

<a id="magicparlabel-3192"></a> | 

<div class="plain_layout"><a id="magicparlabel-3195">1</a></div>

<a id="magicparlabel-3195"></a> |
| 

<div class="plain_layout"><a id="magicparlabel-3198">Gérer son compte client</a></div>

<a id="magicparlabel-3198"></a> | 

<div class="plain_layout"><a id="magicparlabel-3201">Moyenne</a></div>

<a id="magicparlabel-3201"></a> | 

<div class="plain_layout"><a id="magicparlabel-3204">Moyen</a></div>

<a id="magicparlabel-3204"></a> | 

<div class="plain_layout"><a id="magicparlabel-3207">2</a></div>

<a id="magicparlabel-3207"></a> |
| 

<div class="plain_layout"><a id="magicparlabel-3210">Recherche des produits</a></div>

<a id="magicparlabel-3210"></a> | 

<div class="plain_layout"><a id="magicparlabel-3213">Haute</a></div>

<a id="magicparlabel-3213"></a> | 

<div class="plain_layout"><a id="magicparlabel-3216">Moyen</a></div>

<a id="magicparlabel-3216"></a> | 

<div class="plain_layout"><a id="magicparlabel-3219">3</a></div>

<a id="magicparlabel-3219"></a> |
| 

<div class="plain_layout"><a id="magicparlabel-3222">Gérer son panier</a></div>

<a id="magicparlabel-3222"></a> | 

<div class="plain_layout"><a id="magicparlabel-3225">Haute</a></div>

<a id="magicparlabel-3225"></a> | 

<div class="plain_layout"><a id="magicparlabel-3228">Haute</a></div>

<a id="magicparlabel-3228"></a> | 

<div class="plain_layout"><a id="magicparlabel-3231">4</a></div>

<a id="magicparlabel-3231"></a> |
| 

<div class="plain_layout"><a id="magicparlabel-3234">Commander</a></div>

<a id="magicparlabel-3234"></a> | 

<div class="plain_layout"><a id="magicparlabel-3237">Moyenne</a></div>

<a id="magicparlabel-3237"></a> | 

<div class="plain_layout"><a id="magicparlabel-3240">Haut</a></div>

<a id="magicparlabel-3240"></a> | 

<div class="plain_layout"><a id="magicparlabel-3243">5</a></div>

<a id="magicparlabel-3243"></a> |
| 

<div class="plain_layout"><a id="magicparlabel-3246">Maintenir le catalogue</a></div>

<a id="magicparlabel-3246"></a> | 

<div class="plain_layout"><a id="magicparlabel-3249">Haute</a></div>

<a id="magicparlabel-3249"></a> | 

<div class="plain_layout"><a id="magicparlabel-3252">Moyen</a></div>

<a id="magicparlabel-3252"></a> | 

<div class="plain_layout"><a id="magicparlabel-3255">6</a></div>

<a id="magicparlabel-3255"></a> |
| 

<div class="plain_layout"><a id="magicparlabel-3258">Envoyer les notifications promotionnelles</a></div>

<a id="magicparlabel-3258"></a> | 

<div class="plain_layout"><a id="magicparlabel-3261">Haute</a></div>

<a id="magicparlabel-3261"></a> | 

<div class="plain_layout"><a id="magicparlabel-3264">Haut</a></div>

<a id="magicparlabel-3264"></a> | 

<div class="plain_layout"><a id="magicparlabel-3267">7</a></div>

<a id="magicparlabel-3267"></a> |
| 

<div class="plain_layout"><a id="magicparlabel-3270">Developper une API</a></div>

<a id="magicparlabel-3270"></a> | 

<div class="plain_layout"><a id="magicparlabel-3273">Moyenne</a></div>

<a id="magicparlabel-3273"></a> | 

<div class="plain_layout"><a id="magicparlabel-3276">Bas</a></div>

<a id="magicparlabel-3276"></a> | 

<div class="plain_layout"><a id="magicparlabel-3279">8</a></div>

<a id="magicparlabel-3279"></a> |

</a></div>

<a id="magicparlabel-3089"></a>

# <a id="magicparlabel-3089"></a><a id="magicparlabel-3280">

<div class="chapter_label">Chapitre 6</div>

Maquette</a>

<a id="magicparlabel-3280"></a>

<div class="standard"><a id="magicparlabel-3280"></a><a id="magicparlabel-3281">La maquette a été créée en langage statique HTML. L'application doit garder le logo du magasin et ses couleurs en général. Des diagrammes de navigation ont été élaborés pour les différents cas d'utilisation dans la partie de réalisation des cas d'utilisation.</a></div>

<a id="magicparlabel-3281"></a>

## <a id="magicparlabel-3281"></a><a id="magicparlabel-3282"><span class="section_label">6.1</span> Captures d'écran</a>

<a id="magicparlabel-3282"></a>

<div class="standard"><a id="magicparlabel-3282"></a><a id="magicparlabel-3283">Il est important de garder une allure correspondant aux application Android et iOS. On voit la possibilité de se logguer avec Facebook et aussi avec un email et une mot de passe. Le catalogue des fruits et légumes reste simple, sans surcharge.</a></div>

<a id="magicparlabel-3283"></a>

<div class="float float-figure"><a id="magicparlabel-3283"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3283"></a><a id="magicparlabel-25422">![image: 7_Volumes_USB_TFE_Screen_Shot_2016-03-31_at_14_27_59.png](./naturalcorner_files/7_Volumes_USB_TFE_Screen_Shot_2016-03-31_at_14_27_59.png)</a></div>

<a id="magicparlabel-25422"></a>

<div class="plain_layout"><a id="magicparlabel-25422"></a><a id="magicparlabel-3289"><span class="float-caption-Standard float-caption float-caption-standard">Figure 6.1.1:Navigation</span></a></div>

<a id="magicparlabel-3289"></a></div>

<a id="magicparlabel-3289"></a>

<div class="standard"><a id="magicparlabel-3289"></a><a id="magicparlabel-3295">Voici ce que donne l'application dans un format correspond à un smartphone.</a></div>

<a id="magicparlabel-3295"></a>

<div class="float float-figure"><a id="magicparlabel-3295"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3295"></a><a id="magicparlabel-25418">![image: 8_Volumes_USB_TFE_Screen_Shot_2016-03-31_at_14_30_23.png](./naturalcorner_files/8_Volumes_USB_TFE_Screen_Shot_2016-03-31_at_14_30_23.png)</a></div>

<a id="magicparlabel-25418"></a>

<div class="plain_layout"><a id="magicparlabel-25418"></a><a id="magicparlabel-3301"><span class="float-caption-Standard float-caption float-caption-standard">Figure 6.1.2:Mobile-first design</span></a></div>

<a id="magicparlabel-3301"></a></div>

<a id="magicparlabel-3301"></a>

# <a id="magicparlabel-3301"></a><a id="magicparlabel-3307"><span class="part_label">Partie III</span> Spécifications détaillées des exigences</a>

<a id="magicparlabel-3307"></a>

# <a id="magicparlabel-3307"></a><a id="magicparlabel-3308">

<div class="chapter_label">Chapitre 7</div>

Descriptions des cas d'utilisation et diagrammes de séquence système</a>

<a id="magicparlabel-3308"></a>

<div class="standard"><a id="magicparlabel-3308"></a><a id="magicparlabel-3309">Ce chapitre va décrire de manière détaillée les cas d'utilisation et à chaque fois remplir une fiche-type pour chaque cas</a>

<div class="foot"><a id="magicparlabel-3309"><span class="foot_label">1</span></a>

<div class="foot_inner"><a id="magicparlabel-3309"></a>

<div class="plain_layout"><a id="magicparlabel-3309"></a><a id="magicparlabel-3313">Roques, P., UML2 Modéliser une application web, Eyrolles 4ème édition, 2008, p.57</a></div>

<a id="magicparlabel-3313"></a></div>

</div>

<a id="magicparlabel-3313">. Il s'agit de décrire un scénario nominal en se mettant à la place de l'utilisateur dans son rôle vis-à-vis de l'application. Ensuite vient le diagramme de séquence système qui va considérer l'application comme une boîte noire avec laquelle l'acteur interagit.</a></div>

<a id="magicparlabel-3313"></a>

## <a id="magicparlabel-3313"></a><a id="magicparlabel-3314"><span class="section_label">7.1</span> UC Créer son compte client</a>

<a id="magicparlabel-3314"></a>

### <a id="magicparlabel-3314"></a><a id="magicparlabel-3315"><span class="subsection_label">7.1.1</span> Description</a>

<a id="magicparlabel-3315"></a>

<div class="standard"><a id="magicparlabel-3315"></a><a id="magicparlabel-3316">

<div class="longtable" style="text-align: center;">

| 

##### <a id="magicparlabel-3334"><span class="paragraph_label">Description du UC 'Créer son compte client'</span></a>

<a id="magicparlabel-3334"></a> |
| 

#### <a id="magicparlabel-3337"><span class="subsubsection_label"><span style="font-size:x-small;">Acteur principal</span></span></a>

<a id="magicparlabel-3337"></a>

<a id="magicparlabel-3337"></a>
<a id="magicparlabel-3338">*   <span style="font-size:x-small;">Le visiteur.</span></a>

<a id="magicparlabel-3338"></a>

#### <a id="magicparlabel-3338"></a><a id="magicparlabel-3339"><span class="subsubsection_label"><span style="font-size:x-small;">Acteurs secondaires</span></span></a>

<a id="magicparlabel-3339"></a>

<a id="magicparlabel-3339"></a>
<a id="magicparlabel-3340">*   <span style="font-size:x-small;">Néant.</span></a>

<a id="magicparlabel-3340"></a>

#### <a id="magicparlabel-3340"></a><a id="magicparlabel-3341"><span class="subsubsection_label"><span style="font-size:x-small;">Objectifs</span></span></a>

<a id="magicparlabel-3341"></a>

<a id="magicparlabel-3341"></a>
<a id="magicparlabel-3342">*   <span style="font-size:x-small;">Le visiteur veut pouvoir accéder au contenu de l’application en indiquant son adresse e-mail et un mot de passe. Il peut aussi s’il le désire indiquer d’autres informations (nom, nom de famille, etc…).</span></a>

<a id="magicparlabel-3342"></a>

#### <a id="magicparlabel-3342"></a><a id="magicparlabel-3343"><span class="subsubsection_label"><span style="font-size:x-small;">Préconditions</span></span></a>

<a id="magicparlabel-3343"></a>

<a id="magicparlabel-3343"></a>
<a id="magicparlabel-3344">*   <span style="font-size:x-small;">L’application est déployée avec une base de données prête.</span></a>

<a id="magicparlabel-3344"></a>

#### <a id="magicparlabel-3344"></a><a id="magicparlabel-3345"><span class="subsubsection_label"><span style="font-size:x-small;">Postconditions</span></span></a>

<a id="magicparlabel-3345"></a>

<a id="magicparlabel-3345"></a>
<a id="magicparlabel-3346">*   <span style="font-size:x-small;">La base de données contient un utilisateur en plus et celui-ci peut utiliser l’application.</span></a>

<a id="magicparlabel-3346"></a> |
| 

#### <a id="magicparlabel-3349"><span class="subsubsection_label"><span style="font-size:x-small;">Scénario nominal</span></span></a>

<a id="magicparlabel-3349"></a>

<a id="magicparlabel-3349"></a>
<a id="magicparlabel-3350">*   <span style="font-size:x-small;">Le visiteur appuie sur le bouton “Inscription” de la page d’accueil.</span>*   <span style="font-size:x-small;">La page d’inscription s’affiche.</span>*   <span style="font-size:x-small;">Le visiteur indique son email et un mot de passe qu’il confirme.</span>*   <span style="font-size:x-small;">Le visiteur est enregistré et dirigé vers la page d’accueil.</span></a>

<a id="magicparlabel-3350"></a> |
| 

#### <a id="magicparlabel-3356"><span class="subsubsection_label"><span style="font-size:x-small;">Alternatives</span></span></a>

<a id="magicparlabel-3356"></a>

<a id="magicparlabel-3356"></a>
<a id="magicparlabel-3357">*   <span style="font-size:x-small;">1a Le visiteur se loggue avec Facebook.</span></a>

<a id="magicparlabel-3357"></a>

<a id="magicparlabel-3357"></a>
<a id="magicparlabel-3358">*   <span style="font-size:x-small;">Le visiteur appuie sur le bouton “Facebook”.</span>*   <span style="font-size:x-small;">Un compte client est automatiquement créé.</span></a>

<a id="magicparlabel-3358"></a>

<a id="magicparlabel-3358"></a>
<a id="magicparlabel-3360">*   <span style="font-size:x-small;">3.a Le visiteur indique un mot de passe ne correspondant pas aux critères de sécurité.</span></a>

<a id="magicparlabel-3360"></a>

<a id="magicparlabel-3360"></a>
<a id="magicparlabel-3361">*   <span style="font-size:x-small;">Après avoir appuyé sur “envoyer”, l’application lui transmet un message d’erreur.</span></a>

<a id="magicparlabel-3361"></a>

<a id="magicparlabel-3361"></a>
<a id="magicparlabel-3362">*   <span style="font-size:x-small;">3.b Le visiteur confirme son mot de passe avec un autre mot de passe.</span></a>

<a id="magicparlabel-3362"></a>

<a id="magicparlabel-3362"></a>
<a id="magicparlabel-3363">*   <span style="font-size:x-small;">Après avoir appuyé sur “envoyer”, l’application lui transmet un message d’erreur.</span></a>

<a id="magicparlabel-3363"></a>

<a id="magicparlabel-3363"></a>
<a id="magicparlabel-3364">*   <span style="font-size:x-small;">3.c Le visiteur décide de remplir les autres champs non obligatoires.</span></a>

<a id="magicparlabel-3364"></a>

<a id="magicparlabel-3364"></a>
<a id="magicparlabel-3365">*   <span style="font-size:x-small;">Si un des champs ne correspond pas aux critères, l’application lui transmet un message d’erreur.</span></a>

<a id="magicparlabel-3365"></a> |

</div>

</a></div>

<a id="magicparlabel-3316"></a>

### <a id="magicparlabel-3316"></a><a id="magicparlabel-3366"><span class="subsection_label">7.1.2</span> Diagramme de séquence système</a>

<a id="magicparlabel-3366"></a>

<div style="height:3ex"><a id="magicparlabel-3366"></a>

<div class="standard"><a id="magicparlabel-3366"></a><a id="magicparlabel-3368">L'inscription laisse le choix entre une inscription dite classique et une inscription par l'intermédiaire du réseau social Facebook. Plusieurs champs sont optionnels, en fait tous les champs sauf l'adresse e-mail et le mot de passe. Veuillez noter que la flèche représentant le message vers le système Natural Corner n'est pas rempli en noir, non pas que, comme l'indique la documentation UML 2, il s'agit d'un signal asynchrone (qui n'arrête pas l'exécution du process en attente d'une réponse) mais plutôt qu'il n'est pas utile de s'arrêter à ce niveau de détails pour un diagramme de séquence système. Nous voulons seulement indiquer qu'il existe une interaction séquentielle, peu importe qu'elle soit synchrone ou asynchrone.</a></div>

<a id="magicparlabel-3368"></a>

<div class="float float-figure"><a id="magicparlabel-3368"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3368"></a><a id="magicparlabel-3373">![image: 9_Volumes_USB_TFE_0_Users_ivymike_Documents_dss_creer_compte.png](./naturalcorner_files/9_Volumes_USB_TFE_0_Users_ivymike_Documents_dss_creer_compte.png)</a></div>

<a id="magicparlabel-3373"></a>

<div class="plain_layout"><a id="magicparlabel-3373"></a><a id="magicparlabel-3374"><span class="float-caption-Standard float-caption float-caption-standard">Figure 7.1.1:Diagramme de séquence système "Créer son compte client"</span></a></div>

<a id="magicparlabel-3374"></a></div>

<a id="magicparlabel-3374"></a>

## <a id="magicparlabel-3374"></a><a id="magicparlabel-3379"><span class="section_label">7.2</span> UC Gérer son compte client</a>

<a id="magicparlabel-3379"></a>

<div class="standard"><a id="magicparlabel-3379"></a><a id="magicparlabel-3380">Ce Use Case est très similaire au précédent. Il s'agit de permettre à l'utilisateur de changer ses données.</a></div>

<a id="magicparlabel-3380"></a>

### <a id="magicparlabel-3380"></a><a id="magicparlabel-3381"><span class="subsection_label">7.2.1</span> Description</a>

<a id="magicparlabel-3381"></a>

<div class="standard"><a id="magicparlabel-3381"></a><a id="magicparlabel-3382">

<div class="longtable" style="text-align: center;">

| 

##### <a id="magicparlabel-3400"><span class="paragraph_label">Description du UC 'Gérer son compte client'</span></a>

<a id="magicparlabel-3400"></a> |
| 

#### <a id="magicparlabel-3403"><span class="subsubsection_label"><span style="font-size:x-small;">Acteur principal</span></span></a>

<a id="magicparlabel-3403"></a>

<a id="magicparlabel-3403"></a>
<a id="magicparlabel-3404">*   <span style="font-size:x-small;">Le client.</span></a>

<a id="magicparlabel-3404"></a>

#### <a id="magicparlabel-3404"></a><a id="magicparlabel-3405"><span class="subsubsection_label"><span style="font-size:x-small;">Acteurs secondaires</span></span></a>

<a id="magicparlabel-3405"></a>

<a id="magicparlabel-3405"></a>
<a id="magicparlabel-3406">*   <span style="font-size:x-small;">Néant.</span></a>

<a id="magicparlabel-3406"></a>

#### <a id="magicparlabel-3406"></a><a id="magicparlabel-3407"><span class="subsubsection_label"><span style="font-size:x-small;">Objectifs</span></span></a>

<a id="magicparlabel-3407"></a>

<a id="magicparlabel-3407"></a>
<a id="magicparlabel-3408">*   <span style="font-size:x-small;">Le client veut changer son compte client avec des nouvelles informations.</span></a>

<a id="magicparlabel-3408"></a>

#### <a id="magicparlabel-3408"></a><a id="magicparlabel-3409"><span class="subsubsection_label"><span style="font-size:x-small;">Préconditions</span></span></a>

<a id="magicparlabel-3409"></a>

<a id="magicparlabel-3409"></a>
<a id="magicparlabel-3410">*   <span style="font-size:x-small;">Le client est déjà enregistré et loggué.</span></a>

<a id="magicparlabel-3410"></a>

#### <a id="magicparlabel-3410"></a><a id="magicparlabel-3411"><span class="subsubsection_label"><span style="font-size:x-small;">Postconditions</span></span></a>

<a id="magicparlabel-3411"></a>

<a id="magicparlabel-3411"></a>
<a id="magicparlabel-3412">*   <span style="font-size:x-small;">La base de données contient des nouvelles informations sur le client.</span></a>

<a id="magicparlabel-3412"></a> |
| 

#### <a id="magicparlabel-3415"><span class="subsubsection_label"><span style="font-size:x-small;">Scénario nominal</span></span></a>

<a id="magicparlabel-3415"></a>

<a id="magicparlabel-3415"></a>
<a id="magicparlabel-3416">*   <span style="font-size:x-small;">Le client appuie sur l’icône du petit bonhomme ou dans le burger menu sur “Voir Compte”.</span>*   <span style="font-size:x-small;">La page du client avec ses informations s’affiche.</span>*   <span style="font-size:x-small;">Le client appuie sur le bouton “Modifier” et est dirigé vers un formulaire prérempli contenant ses information.</span>*   <span style="font-size:x-small;">Le client modifie ses information selon son envie.</span>*   <span style="font-size:x-small;">Le client appuie sur le bouton rouge “modifier”, est dirigé vers la page d’accueil et un message lui indique que ses informations ont été mises à jour.</span></a>

<a id="magicparlabel-3416"></a> |
| 

#### <a id="magicparlabel-3423"><span class="subsubsection_label"><span style="font-size:x-small;">Alternatives</span></span></a>

<a id="magicparlabel-3423"></a>

<a id="magicparlabel-3423"></a>
<a id="magicparlabel-3424">*   <span style="font-size:x-small;">5.a Le client indique un mot de passe ne correspondant pas aux critères de sécurité.</span></a>

<a id="magicparlabel-3424"></a>

<a id="magicparlabel-3424"></a>
<a id="magicparlabel-3425">*   <span style="font-size:x-small;">Après avoir appuyé sur “Modifier”, l’application lui transmet un message d’erreur.</span></a>

<a id="magicparlabel-3425"></a>

<a id="magicparlabel-3425"></a>
<a id="magicparlabel-3426">*   <span style="font-size:x-small;">5.b Le client confirme son mot de passe avec un autre mot de passe.</span></a>

<a id="magicparlabel-3426"></a>

<a id="magicparlabel-3426"></a>
<a id="magicparlabel-3427">*   <span style="font-size:x-small;">Après avoir appuyé sur “Modifier”, l’application lui transmet un message d’erreur.</span></a>

<a id="magicparlabel-3427"></a>

<a id="magicparlabel-3427"></a>
<a id="magicparlabel-3428">*   <span style="font-size:x-small;">5.c Le client décide de remplir les autres champs.</span></a>

<a id="magicparlabel-3428"></a>

<a id="magicparlabel-3428"></a>
<a id="magicparlabel-3429">*   <span style="font-size:x-small;">Si un des champs ne correspond pas aux critères, l’application lui transmet un message d’erreur.</span></a>

<a id="magicparlabel-3429"></a> |

</div>

</a></div>

<a id="magicparlabel-3382"></a>

#### <a id="magicparlabel-3382"></a><a id="magicparlabel-3430"><span class="subsubsection_label"></span></a>

<a id="magicparlabel-3430"></a>

### <a id="magicparlabel-3430"></a><a id="magicparlabel-3431"><span class="subsection_label">7.2.2</span> Diagramme de séquence système</a>

<a id="magicparlabel-3431"></a>

<div class="standard"><a id="magicparlabel-3431"></a><a id="magicparlabel-3432">On voit l'ordre de séquencement dans le cas d'utilisation. L'app Natural Corner est vraiment considérée du point de vue de l'utilisateur sans se soucier du fonctionnement internet de l'application. "Loop" signifie que l'utilisateur introduit les données jusqu'à ce qu'il se conforme à ce que l'application lui renvoie comme indications.</a></div>

<a id="magicparlabel-3432"></a>

<div class="float float-figure"><a id="magicparlabel-3432"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3432"></a><a id="magicparlabel-3437">![image: 10_Volumes_USB_TFE_1_Users_ivymike_Documents_diagramme_sequence_system_gerer_panier.png](./naturalcorner_files/10_Volumes_USB_TFE_1_Users_ivymike_Documents_diagramme_sequence_system_gerer_panier.png) <span class="float-caption-Standard float-caption float-caption-standard">Figure 7.2.1:Diagramme de séquence système "Gérer son compte client"</span></a></div>

<a id="magicparlabel-3437"></a></div>

<a id="magicparlabel-3437"></a>

## <a id="magicparlabel-3437"></a><a id="magicparlabel-3442"><span class="section_label">7.3</span> UC Recherche des produits</a>

<a id="magicparlabel-3442"></a>

<div class="standard"><a id="magicparlabel-3442"></a><a id="magicparlabel-3443">Ce UC est un fondamental de la commande en ligne. Que serait une app de vente sans la facilité de se renseigner sur un produit et de chercher à son aise.</a></div>

<a id="magicparlabel-3443"></a>

### <a id="magicparlabel-3443"></a><a id="magicparlabel-3444"><span class="subsection_label">7.3.1</span> Description</a>

<a id="magicparlabel-3444"></a>

<div class="standard"><a id="magicparlabel-3444"></a><a id="magicparlabel-3445">

<div class="longtable" style="text-align: center;">

| 

##### <a id="magicparlabel-3463"><span class="paragraph_label">Description du UC 'Recherche des produits'</span></a>

<a id="magicparlabel-3463"></a> |
| 

#### <a id="magicparlabel-3466"><span class="subsubsection_label"><span style="font-size:x-small;">Acteur principal</span></span></a>

<a id="magicparlabel-3466"></a>

<a id="magicparlabel-3466"></a>
<a id="magicparlabel-3467">*   <span style="font-size:x-small;">L’utilisateur (qu’il soit déjà client, ou simple visiteur)</span></a>

<a id="magicparlabel-3467"></a>

#### <a id="magicparlabel-3467"></a><a id="magicparlabel-3468"><span class="subsubsection_label"><span style="font-size:x-small;">Objectifs</span></span></a>

<a id="magicparlabel-3468"></a>

<a id="magicparlabel-3468"></a>
<a id="magicparlabel-3469">*   <span style="font-size:x-small;">L’utilisateur veut trouver le plus rapidement possible un produit précis dans l’ensemble du catalogue. Il veut également pouvoir flâner comme il le ferait dans le magasin Natural Corner et chercher des produits avec des critères variés.</span></a>

<a id="magicparlabel-3469"></a>

#### <a id="magicparlabel-3469"></a><a id="magicparlabel-3470"><span class="subsubsection_label"><span style="font-size:x-small;">Préconditions</span></span></a>

<a id="magicparlabel-3470"></a>

<a id="magicparlabel-3470"></a>
<a id="magicparlabel-3471">*   <span style="font-size:x-small;">Le catalogue est disponible (voir le cas d’utilisation Maintenir le catalogue).</span></a>

<a id="magicparlabel-3471"></a>

#### <a id="magicparlabel-3471"></a><a id="magicparlabel-3472"><span class="subsubsection_label"><span style="font-size:x-small;">Postconditions</span></span></a>

<a id="magicparlabel-3472"></a>

<a id="magicparlabel-3472"></a>
<a id="magicparlabel-3473">*   <span style="font-size:x-small;">L’utilisateur a trouvé le produit précis qu’il cherchait, ou un produit qui l’intéresse, voire plusieurs.</span></a>

<a id="magicparlabel-3473"></a> |
| 

#### <a id="magicparlabel-3476"><span class="subsubsection_label"><span style="font-size:x-small;">Scénario nominal</span></span></a>

<a id="magicparlabel-3476"></a>

<a id="magicparlabel-3476"></a>
<a id="magicparlabel-3477">*   <span style="font-size:x-small;">L’utilisateur lance une recherche à partir de mots-clés : un nom de produit, un rayon, un aliment de la composition, une catégorie de fruit ou de légume.</span>*   <span style="font-size:x-small;">L’application affiche une page de résultat. Les produits sont classés par défaut par catégorie.</span>*   <span style="font-size:x-small;">L’utilisateur sélectionne un produit.</span>*   <span style="font-size:x-small;">L’application lui présente une description détaillée pour le produit sélectionné. On y trouvera en particulier :</span></a>

<a id="magicparlabel-3477"></a>

<a id="magicparlabel-3477"></a>
<a id="magicparlabel-3481">*   <span style="font-size:x-small;">une image (pour la majorité des produits).</span>*   <span style="font-size:x-small;">une description bio, la saison, la catégorie, le rayon.</span>*   <span style="font-size:x-small;">son prix et sa disponibilité,</span></a>

<a id="magicparlabel-3481"></a> |
| 

#### <a id="magicparlabel-3486"><span class="subsubsection_label"><span style="font-size:x-small;">Alternatives</span></span></a>

<a id="magicparlabel-3486"></a>

<a id="magicparlabel-3486"></a>
<a id="magicparlabel-3487">*   <span style="font-size:x-small;">1a L’utilisateur n’a pas d’idée préconçue et préfère flâner dans les rayons du magasin bio virtuel. Pour cela, l’application lui propose un ensemble de pages telles que : nouveautés, meilleures ventes, recettes, promotions.</span></a>

<a id="magicparlabel-3487"></a>

<a id="magicparlabel-3487"></a>
<a id="magicparlabel-3488">*   <span style="font-size:x-small;">L’utilisateur navigue dans ces pages et peut enchaîner sur l’étape 3 du scénario nominal.</span></a>

<a id="magicparlabel-3488"></a>

<a id="magicparlabel-3488"></a>
<a id="magicparlabel-3489">*   <span style="font-size:x-small;">2a L’application n’a pas trouvé de produits correspondant à la recherche.</span></a>

<a id="magicparlabel-3489"></a>

<a id="magicparlabel-3489"></a>
<a id="magicparlabel-3490">*   <span style="font-size:x-small;">L’application signale l’échec à l’utilisateur et lui propose d’effectuer une nouvelle recherche. Le cas d’utilisation redémarre à l’étape 1 du scénario nominal.</span></a>

<a id="magicparlabel-3490"></a>

<a id="magicparlabel-3490"></a>
<a id="magicparlabel-3491">*   <span style="font-size:x-small;">2b L’application a trouvé de très nombreux produits.</span></a>

<a id="magicparlabel-3491"></a>

<a id="magicparlabel-3491"></a>
<a id="magicparlabel-3492">*   <span style="font-size:x-small;">L’application signale le nombre de produits à l’utilisateur et lui affiche une première page de résultats. Les autres pages sont accessibles directement ou par des symboles Suivante et Précédente.</span>*   <span style="font-size:x-small;">L’utilisateur navigue dans ces pages et enchaîne éventuellement sur l’étape 3 du scénario nominal. Il peut également reclasser les produits obtenus par différents critères : une description bio, la saison, la catégorie, le rayon, etc</span></a>

<a id="magicparlabel-3492"></a>

<a id="magicparlabel-3492"></a>
<a id="magicparlabel-3494">*   <span style="font-size:x-small;">3a L’utilisateur n’est pas intéressé par les résultats.</span></a>

<a id="magicparlabel-3494"></a>

<a id="magicparlabel-3494"></a>
<a id="magicparlabel-3495">*   <span style="font-size:x-small;">L’utilisateur revient à l’étape 1 du scénario nominal pour lancer une nouvelle recherche.</span>*   <span style="font-size:x-small;">L’utilisateur abandonne la recherche. Le cas d’utilisation se termine en échec.</span></a>

<a id="magicparlabel-3495"></a>

<a id="magicparlabel-3495"></a>
<a id="magicparlabel-3497">*   <span style="font-size:x-small;">1 L’utilisateur est intéressé par le résultat et met un produit dans le panier.</span></a>

<a id="magicparlabel-3497"></a>

<a id="magicparlabel-3497"></a>
<a id="magicparlabel-3498">*   <span style="font-size:x-small;">L’application affiche le panier de l’utilisateur (voir le cas d’utilisation Gérer son panier).</span></a>

<a id="magicparlabel-3498"></a>

#### <a id="magicparlabel-3498"></a><a id="magicparlabel-3499"><span class="subsubsection_label"><span style="font-size:x-small;">Exigences supplémentaires</span></span></a>

<a id="magicparlabel-3499"></a>

<a id="magicparlabel-3499"></a>
<a id="magicparlabel-3500">*   <span style="font-size:x-small;">La qualité visuelle doit permettre de bien voir les produits et rendre la recherche agréable.</span></a>

<a id="magicparlabel-3500"></a> |

</div>

</a></div>

<a id="magicparlabel-3445"></a>

### <a id="magicparlabel-3445"></a><a id="magicparlabel-3501"><span class="subsection_label">7.3.2</span> Diagramme de séquence système</a>

<a id="magicparlabel-3501"></a>

<div class="standard"><a id="magicparlabel-3501"></a><a id="magicparlabel-3502">L'instruction "alt" signifie qu'une alternative aura lieu selon que l'utilisateur trouve un produit ou non. S'il le désire, il mettra le produit ainsi trouvé dans son panier ("opt").</a></div>

<a id="magicparlabel-3502"></a>

<div class="float float-figure"><a id="magicparlabel-3502"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3502"></a><a id="magicparlabel-3507">![image: 11_Volumes_USB_TFE_Model_Natural_Corner__System___es_produits__sd_Chercher_des_produits_3__1_.png](./naturalcorner_files/11_Volumes_USB_TFE_Model_Natural_Corner__System___es_produits__sd_Chercher_des_produits_3__1_.png)</a></div>

<a id="magicparlabel-3507"></a>

<div class="plain_layout"><a id="magicparlabel-3507"></a><a id="magicparlabel-3508"><span class="float-caption-Standard float-caption float-caption-standard">Figure 7.3.1:Diagramme de séquence système "Recherche de produits"</span></a></div>

<a id="magicparlabel-3508"></a></div>

<a id="magicparlabel-3508"></a>

## <a id="magicparlabel-3508"></a><a id="magicparlabel-3514"><span class="section_label">7.4</span> UC Gérer son panier</a>

<a id="magicparlabel-3514"></a>

### <a id="magicparlabel-3514"></a><a id="magicparlabel-3515"><span class="subsection_label">7.4.1</span> Description</a>

<a id="magicparlabel-3515"></a>

<div class="standard"><a id="magicparlabel-3515"></a><a id="magicparlabel-3516">

<div class="longtable" style="text-align: center;">

| 

##### <a id="magicparlabel-3534"><span class="paragraph_label">Description du UC 'Gérer son panier'</span></a>

<a id="magicparlabel-3534"></a> |
| 

#### <a id="magicparlabel-3537"><span class="subsubsection_label"><span style="font-size:x-small;">Acteur principal</span></span></a>

<a id="magicparlabel-3537"></a>

<a id="magicparlabel-3537"></a>
<a id="magicparlabel-3538">*   <span style="font-size:x-small;">Le client.</span></a>

<a id="magicparlabel-3538"></a>

#### <a id="magicparlabel-3538"></a><a id="magicparlabel-3539"><span class="subsubsection_label"><span style="font-size:x-small;">Objectifs</span></span></a>

<a id="magicparlabel-3539"></a>

<a id="magicparlabel-3539"></a>
<a id="magicparlabel-3540">*   <span style="font-size:x-small;">Lorsque le client est intéressé par un produit, il faut qu’il puisse l’enregistrer dans un panier virtuel. Ensuite, il doit pouvoir ajouter d’autres aliments, en supprimer ou encore en modifier les quantités avant de passer commande.</span></a>

<a id="magicparlabel-3540"></a>

#### <a id="magicparlabel-3540"></a><a id="magicparlabel-3541"><span class="subsubsection_label"><span style="font-size:x-small;">Préconditions</span></span></a>

<a id="magicparlabel-3541"></a>

<a id="magicparlabel-3541"></a>
<a id="magicparlabel-3542">*   <span style="font-size:x-small;">Le client est déjà enregistré et loggué.</span></a>

<a id="magicparlabel-3542"></a>

#### <a id="magicparlabel-3542"></a><a id="magicparlabel-3543"><span class="subsubsection_label"><span style="font-size:x-small;">Postconditions</span></span></a>

<a id="magicparlabel-3543"></a>

<a id="magicparlabel-3543"></a>
<a id="magicparlabel-3544">*   <span style="font-size:x-small;">Néant.</span></a>

<a id="magicparlabel-3544"></a> |
| 

#### <a id="magicparlabel-3547"><span class="subsubsection_label"><span style="font-size:x-small;">Scénario nominal</span></span></a>

<a id="magicparlabel-3547"></a>

<a id="magicparlabel-3547"></a>
<a id="magicparlabel-3548">*   <span style="font-size:x-small;">Le client enregistre les produits qui l’intéressent dans un panier virtuel (voir le cas d’utilisation Chercher des produits).</span>*   <span style="font-size:x-small;">L’'application lui affiche l’état de son panier. Chaque produit qui a été préalablement sélectionné est présenté sur une ligne, avec son titre, sa catégorie et son rayon. Son prix unitaire est affiché, la quantité est positionnée à '1' par défaut, et le prix total de la ligne est calculé. Le total général est calculé par l'application et affiché en bas du panier, avec le nombre d’articles.</span>*   <span style="font-size:x-small;">Le client continue ses achats (voir le cas d’utilisation Chercher des produits).</span></a>

<a id="magicparlabel-3548"></a> |
| 

#### <a id="magicparlabel-3553"><span class="subsubsection_label"><span style="font-size:x-small;">Alternatives</span></span></a>

<a id="magicparlabel-3553"></a>

<a id="magicparlabel-3553"></a>
<a id="magicparlabel-3554">*   <span style="font-size:x-small;">2a Le panier est vide.</span></a>

<a id="magicparlabel-3554"></a>

<a id="magicparlabel-3554"></a>
<a id="magicparlabel-3555">*   <span style="font-size:x-small;">Le l'application affiche un message d’erreur au client (« Votre panier est vide ») et lui propose de revenir à une recherche de produit (voir le cas d’utilisation Chercher des produits).</span></a>

<a id="magicparlabel-3555"></a>

<a id="magicparlabel-3555"></a>
<a id="magicparlabel-3556">*   <span style="font-size:x-small;">4a Le client modifie les quantités des lignes du panier, ou en supprime.</span></a>

<a id="magicparlabel-3556"></a>

<a id="magicparlabel-3556"></a>
<a id="magicparlabel-3557">*   <span style="font-size:x-small;">Le client revalide en demandant la mise à jour du panier.</span>*   <span style="font-size:x-small;">Le cas d’utilisation reprend à l’étape 2 du scénario nominal.</span></a>

<a id="magicparlabel-3557"></a>

<a id="magicparlabel-3557"></a>
<a id="magicparlabel-3559">*   <span style="font-size:x-small;">1 Le client souhaite commander en ligne.</span></a>

<a id="magicparlabel-3559"></a>

<a id="magicparlabel-3559"></a>
<a id="magicparlabel-3560">*   <span style="font-size:x-small;">L’application l’amène sur la page de validation de commande.</span></a>

<a id="magicparlabel-3560"></a>

#### <a id="magicparlabel-3560"></a><a id="magicparlabel-3561"><span class="subsubsection_label"><span style="font-size:x-small;">Exigences supplémentaires</span></span></a>

<a id="magicparlabel-3561"></a>

<a id="magicparlabel-3561"></a>
<a id="magicparlabel-3562">*   <span style="font-size:x-small;">S’assurer que l’intégrité des données soit assurée (calculs, contenu du panier, sauvegarde de celui-ci).</span></a>

<a id="magicparlabel-3562"></a> |

</div>

</a></div>

<a id="magicparlabel-3516"></a>

### <a id="magicparlabel-3516"></a><a id="magicparlabel-3563"><span class="subsection_label">7.4.2</span> Diagramme de séquence système</a>

<a id="magicparlabel-3563"></a>

<div class="standard"><a id="magicparlabel-3563"></a><a id="magicparlabel-3564">On part du principe que l'utilisateur est déjà passé par le UC "Chercher des articles" ("ref").</a></div>

<a id="magicparlabel-3564"></a>

<div class="float float-figure"><a id="magicparlabel-3564"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3564"></a><a id="magicparlabel-3569">![image: 12_Volumes_USB_TFE_sd__Ge__rer_son_panier.png](./naturalcorner_files/12_Volumes_USB_TFE_sd__Ge__rer_son_panier.png)</a></div>

<a id="magicparlabel-3569"></a>

<div class="plain_layout"><a id="magicparlabel-3569"></a><a id="magicparlabel-3570"><span class="float-caption-Standard float-caption float-caption-standard">Figure 7.4.1:Diagramme de séquence système "Gérer son panier"</span></a></div>

<a id="magicparlabel-3570"></a></div>

<a id="magicparlabel-3570"></a>

## <a id="magicparlabel-3570"></a><a id="magicparlabel-3576"><span class="section_label">7.5</span> UC Commander</a>

<a id="magicparlabel-3576"></a>

### <a id="magicparlabel-3576"></a><a id="magicparlabel-3577"><span class="subsection_label">7.5.1</span> Description</a>

<a id="magicparlabel-3577"></a>

<div class="standard"><a id="magicparlabel-3577"></a><a id="magicparlabel-3578">

<div class="longtable" style="text-align: center;">

| 

##### <a id="magicparlabel-3596"><span class="paragraph_label">Description du UC 'Commander'</span></a>

<a id="magicparlabel-3596"></a> |
| 

#### <a id="magicparlabel-3599"><span class="subsubsection_label"><span style="font-size:x-small;">Acteur principal</span></span></a>

<a id="magicparlabel-3599"></a>

<a id="magicparlabel-3599"></a>
<a id="magicparlabel-3600">*   <span style="font-size:x-small;">Le Client.</span></a>

<a id="magicparlabel-3600"></a>

#### <a id="magicparlabel-3600"></a><a id="magicparlabel-3601"><span class="subsubsection_label"><span style="font-size:x-small;">Objectifs</span></span></a>

<a id="magicparlabel-3601"></a>

<a id="magicparlabel-3601"></a>
<a id="magicparlabel-3602">*   <span style="font-size:x-small;">À tout moment, le client doit pouvoir accéder à la page de commande, dans lequel il peut saisir ses coordonnées et les informations nécessaires au retrait en magasin.</span></a>

<a id="magicparlabel-3602"></a>

#### <a id="magicparlabel-3602"></a><a id="magicparlabel-3603"><span class="subsubsection_label"><span style="font-size:x-small;">Préconditions</span></span></a>

<a id="magicparlabel-3603"></a>

<a id="magicparlabel-3603"></a>
<a id="magicparlabel-3604">*   <span style="font-size:x-small;">Le panier du client n’est pas vide.</span></a>

<a id="magicparlabel-3604"></a>

#### <a id="magicparlabel-3604"></a><a id="magicparlabel-3605"><span class="subsubsection_label"><span style="font-size:x-small;">Postconditions</span></span></a>

<a id="magicparlabel-3605"></a>

<a id="magicparlabel-3605"></a>
<a id="magicparlabel-3606">*   <span style="font-size:x-small;">Une commande a été enregistrée et transmise à Natural Corner.</span></a>

<a id="magicparlabel-3606"></a> |
| 

#### <a id="magicparlabel-3609"><span class="subsubsection_label"><span style="font-size:x-small;">Scénario nominal</span></span></a>

<a id="magicparlabel-3609"></a>

<a id="magicparlabel-3609"></a>
<a id="magicparlabel-3610">*   <span style="font-size:x-small;">Le Client saisit l’ensemble des informations nécessaires à la garantie de venir chercher son panier, à savoir : les coordonnées de l’adresse du client (nom, prénom, adresse postale complète, téléphone).</span>*   <span style="font-size:x-small;">L’application affiche un récapitulatif des adresses indiquées et du panier à venir chercher.</span>*   <span style="font-size:x-small;">L’application confirme la prise de commande au client.</span>*   <span style="font-size:x-small;">L’application envoie la commande validée aux vendeurs de Natural Corner.</span>*   <span style="font-size:x-small;">L’application confirme la commande au client.</span></a>

<a id="magicparlabel-3610"></a> |
| 

#### <a id="magicparlabel-3617"><span class="subsubsection_label"><span style="font-size:x-small;">Alternatives</span></span></a>

<a id="magicparlabel-3617"></a>

<a id="magicparlabel-3617"></a>
<a id="magicparlabel-3618">*   <span style="font-size:x-small;">1-3a Le Client annule sa commande.</span></a>

<a id="magicparlabel-3618"></a>

<a id="magicparlabel-3618"></a>
<a id="magicparlabel-3619">*   <span style="font-size:x-small;">L’application revient sur l’affichage du panier et le cas d’utilisation se termine en échec.</span></a>

<a id="magicparlabel-3619"></a> |

</div>

</a></div>

<a id="magicparlabel-3578"></a>

### <a id="magicparlabel-3578"></a><a id="magicparlabel-3620"><span class="subsection_label">7.5.2</span> Diagramme de séquence système</a>

<a id="magicparlabel-3620"></a>

<div class="standard"><a id="magicparlabel-3620"></a><a id="magicparlabel-3621">Une précondition a été ajoutée, le panier doit être rempli par au moins un article pour être commandé. Le vendeur intervient comme utilisateur secondaire.</a></div>

<a id="magicparlabel-3621"></a>

<div class="float float-figure"><a id="magicparlabel-3621"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3621"></a><a id="magicparlabel-3626">![image: 13_Volumes_USB_TFE_Model_Natural_Corner__System_sequence_diagram__Commander__sd_Commander_5.png](./naturalcorner_files/13_Volumes_USB_TFE_Model_Natural_Corner__System_sequence_diagram__Commander__sd_Commander_5.png)</a></div>

<a id="magicparlabel-3626"></a>

<div class="plain_layout"><a id="magicparlabel-3626"></a><a id="magicparlabel-3627"><span class="float-caption-Standard float-caption float-caption-standard">Figure 7.5.1:Diagramme de séquence système "Commander"</span></a></div>

<a id="magicparlabel-3627"></a></div>

<a id="magicparlabel-3627"></a>

## <a id="magicparlabel-3627"></a><a id="magicparlabel-3633"><span class="section_label">7.6</span> UC Maintenir le catalogue</a>

<a id="magicparlabel-3633"></a>

### <a id="magicparlabel-3633"></a><a id="magicparlabel-3634"><span class="subsection_label">7.6.1</span> Description</a>

<a id="magicparlabel-3634"></a>

<div class="standard"><a id="magicparlabel-3634"></a><a id="magicparlabel-3635">

<div class="longtable" style="text-align: center;">

| 

##### <a id="magicparlabel-3653"><span class="paragraph_label">Description UC Maintenir le catalogue</span></a>

<a id="magicparlabel-3653"></a> |
| 

#### <a id="magicparlabel-3656"><span class="subsubsection_label"><span style="font-size:x-small;">Acteur principal</span></span></a>

<a id="magicparlabel-3656"></a>

<a id="magicparlabel-3656"></a>
<a id="magicparlabel-3657">*   <span style="font-size:x-small;">Le vendeur.</span></a>

<a id="magicparlabel-3657"></a>

#### <a id="magicparlabel-3657"></a><a id="magicparlabel-3658"><span class="subsubsection_label"><span style="font-size:x-small;">Acteur secondaire</span></span></a>

<a id="magicparlabel-3658"></a>

<a id="magicparlabel-3658"></a>
<a id="magicparlabel-3659">*   <span style="font-size:x-small;">Le catalogue.</span></a>

<a id="magicparlabel-3659"></a>

#### <a id="magicparlabel-3659"></a><a id="magicparlabel-3660"><span class="subsubsection_label"><span style="font-size:x-small;">Objectifs</span></span></a>

<a id="magicparlabel-3660"></a>

<a id="magicparlabel-3660"></a>
<a id="magicparlabel-3661">*   <span style="font-size:x-small;">Le vendeur veut mettre à jour le catalogue avec de nouveaux produits et certaines informations sur les produits.</span></a>

<a id="magicparlabel-3661"></a>

#### <a id="magicparlabel-3661"></a><a id="magicparlabel-3662"><span class="subsubsection_label"><span style="font-size:x-small;">Préconditions</span></span></a>

<a id="magicparlabel-3662"></a>

<a id="magicparlabel-3662"></a>
<a id="magicparlabel-3663">*   <span style="font-size:x-small;">Le vendeur s’est authentifié.</span>*   <span style="font-size:x-small;">Le catalogue est accessible.</span></a>

<a id="magicparlabel-3663"></a>

#### <a id="magicparlabel-3663"></a><a id="magicparlabel-3665"><span class="subsubsection_label"><span style="font-size:x-small;">Postconditions</span></span></a>

<a id="magicparlabel-3665"></a>

<a id="magicparlabel-3665"></a>
<a id="magicparlabel-3666">*   <span style="font-size:x-small;">Une nouvelle version du catalogue est disponible.</span></a>

<a id="magicparlabel-3666"></a> |
| 

#### <a id="magicparlabel-3669"><span class="subsubsection_label"><span style="font-size:x-small;">Scénario nominal</span></span></a>

<a id="magicparlabel-3669"></a>

<a id="magicparlabel-3669"></a>
<a id="magicparlabel-3670">*   <span style="font-size:x-small;">Le vendeur introduit un nouveau produit dans le catalogue.</span></a>

<a id="magicparlabel-3670"></a> |
| 

#### <a id="magicparlabel-3673"><span class="subsubsection_label"><span style="font-size:x-small;">Alternatives</span></span></a>

<a id="magicparlabel-3673"></a>

<a id="magicparlabel-3673"></a>
<a id="magicparlabel-3674">*   <span style="font-size:x-small;">1a Le vendeur met à jour un produit.</span></a>

<a id="magicparlabel-3674"></a> |

</div>

</a></div>

<a id="magicparlabel-3635"></a>

### <a id="magicparlabel-3635"></a><a id="magicparlabel-3675"><span class="subsection_label">7.6.2</span> Diagramme de séquence système</a>

<a id="magicparlabel-3675"></a>

<div class="float float-figure"><a id="magicparlabel-3675"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3675"></a><a id="magicparlabel-3680">![image: 14_Volumes_USB_TFE_Model_Natural_Corner__System___r_le_catalogue__sd_Maintenir_le_catalogue_6.png](./naturalcorner_files/14_Volumes_USB_TFE_Model_Natural_Corner__System___r_le_catalogue__sd_Maintenir_le_catalogue_6.png)</a></div>

<a id="magicparlabel-3680"></a>

<div class="plain_layout"><a id="magicparlabel-3680"></a><a id="magicparlabel-3681"><span class="float-caption-Standard float-caption float-caption-standard">Figure 7.6.1:Diagramme de séquence système "Maintenir catalogue"</span></a></div>

<a id="magicparlabel-3681"></a></div>

<a id="magicparlabel-3681"></a>

# <a id="magicparlabel-3681"></a><a id="magicparlabel-3687"><span class="part_label">Partie IV</span> Classes d'analyse et base de données</a>

<a id="magicparlabel-3687"></a>

# <a id="magicparlabel-3687"></a><a id="magicparlabel-3688">

<div class="chapter_label">Chapitre 8</div>

Conception objet des classes d'analyse</a>

<a id="magicparlabel-3688"></a>

## <a id="magicparlabel-3688"></a><a id="magicparlabel-3689"><span class="section_label">8.1</span> Classes d'analyse</a>

<a id="magicparlabel-3689"></a>

### <a id="magicparlabel-3689"></a><a id="magicparlabel-3690"><span class="subsection_label">8.1.1</span> Identification des concepts du domaine</a>

<a id="magicparlabel-3690"></a>

<div class="standard"><a id="magicparlabel-3690"></a><a id="magicparlabel-3691">Quels sont les concepts métiers qui correspondent à ces cas d'utilisation? Pour le cas d'utilisation "Créer son compte", il va de soi que le concept "Utilisateur" est pertinent. Il faut de plus prendre en compte l'existence des différents utilisateurs du système "Natural Corner", c'est à dire les vendeurs, le gérant, l'internaute simple visiteur, l'internaute client identifié. L'analyse des Uses Cases nous a permis de différencier le système Natural Corner depuis le point de vue d'un client (potentiel ou actuel) et du point de vue du gérant et des vendeurs. Un choix d’analyse consiste à créer une classe “Utilisateur” qui concernera un utilisateur identifié, qu’il soit client ou non. Il ne s’agit pas ici de fonctionner à la manière d’un site web d’achat traditionnel mais plutôt d’inciter le client à utiliser l’application calquée sur les “Apps” pour smartphone. Les utilisateurs sont désormais habitués à s’identifier d’emblée avant la première utilisation d’une application. Un utilisateur sera donc un concept dont pourront dériver les concepts de vendeur et gérant car ils vont partager des attributs similaires.</a></div>

<a id="magicparlabel-3691"></a>

<div class="standard"><a id="magicparlabel-3691"></a><a id="magicparlabel-3692">Un autre concept intéressant est celui d'adresse qui permet de factoriser le concept d'utilisateur, ce concept possédant plusieurs caractéristiques aisément identifiables en attributs. Ne perdons pas de vue par ailleurs que le gérant du magasin Natural Corner a clairement demandé lors de l’analyse des besoins une identification par le réseau social Facebook.Voici les concepts métiers qui se dégagent :</a></div>

<a id="magicparlabel-3692"></a>

<a id="magicparlabel-3692"></a>
<a id="magicparlabel-3693">*   utilisateur,*   vendeur,*   gérant,*   adresse</a>

<a id="magicparlabel-3693"></a>

<div class="standard"><a id="magicparlabel-3693"></a><a id="magicparlabel-3697">Le cas d'utilisation "Recherche produits" suggère le concept d'article. Il faut de plus pouvoir ranger un article dans un rayon comme l'indique le fichier transmis par le gérant du magasin et, enfin, il est agréable pour un utilisateur de l'application de chercher ses articles favoris par catégorie. Voici les concepts métiers identifiés :</a></div>

<a id="magicparlabel-3697"></a>

<a id="magicparlabel-3697"></a>
<a id="magicparlabel-3698">*   article,*   rayon,*   catégorie</a>

<a id="magicparlabel-3698"></a>

<div class="standard"><a id="magicparlabel-3698"></a><a id="magicparlabel-3701">Nous apprenons du UC "Gérer panier" qu'un candidat à l'univers conceptuel de l'application Natural Corner est celui de panier. Il s'agit du panier qu'utiliserait un client dans un magasin d'alimentation. Ce panier est rempli d'articles. Pour donner de l'ordre à ce panier et pouvoir différencier les articles, connaitre leurs nombres et en calculer le prix total, il est intéressant d'utiliser le concept de ligne de panier. Ainsi,</a></div>

<a id="magicparlabel-3701"></a>

<a id="magicparlabel-3701"></a>
<a id="magicparlabel-3702">*   panier,*   ligne panier</a>

<a id="magicparlabel-3702"></a>

<div class="standard"><a id="magicparlabel-3702"></a><a id="magicparlabel-3704">De l'UC "Commander", le concept de commande apparaît presque immédiatement :</a></div>

<a id="magicparlabel-3704"></a>

<a id="magicparlabel-3704"></a>
<a id="magicparlabel-3705">*   commande</a>

<a id="magicparlabel-3705"></a>

### <a id="magicparlabel-3705"></a><a id="magicparlabel-3706"><span class="subsection_label">8.1.2</span> Ajout des associations et des attributs</a>

<a id="magicparlabel-3706"></a>

<div class="standard"><a id="magicparlabel-3706"></a><a id="magicparlabel-3707">Un utilisateur peut se caractériser par les attributs prénom, nom, pseudonyme, mot de passe, adresse e-mail. On peut lui ajouter une date d'inscription pour avoir des informations supplémentaires et aussi son adresse IP à des fins statistiques (pays à partir duquel l'utilisateur se connecte à l'application par exemple).</a></div>

<a id="magicparlabel-3707"></a>

<div class="standard"><a id="magicparlabel-3707"></a><a id="magicparlabel-3708">Une adresse contient une rue (place, chaussée, avenue, etc...), une numéro, une code postal, une localité et un pays (par défaut Belgique). Un utilisateur n'utilise qu'une seule adresse et même si une même adresse peut être utilisée par plusieurs personnes (familles, colocataires), on limitera l'univers conceptuel à un utilisateur par adresse et une adresse par utilisateur . La classe Adresse est une factorisation clarifiant la classe Utilisateur et qui servira le cas échéant à d'autres classes à venir.</a></div>

<a id="magicparlabel-3708"></a>

<div class="standard"><a id="magicparlabel-3708"></a><a id="magicparlabel-3709">Nous résumons ces réflexion par une relation de composition entre les classes Utilisateur et Adresse. Un vendeur est un utilisateur qui a certains droits d'accès supplémentaires du point de vue du catalogue des produits et du système Natural Corner. Un gérant est un vendeur qui peut éditer des commentaires informatifs et notifier les clients des nouvelles promos. Voici un premier jet des classes d'analyse:</a></div>

<a id="magicparlabel-3709"></a>

<div class="float float-figure"><a id="magicparlabel-3709"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3709"></a><a id="magicparlabel-3714">![image: 15_Volumes_USB_TFE_classes_utilisateur.png](./naturalcorner_files/15_Volumes_USB_TFE_classes_utilisateur.png)</a></div>

<a id="magicparlabel-3714"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3714"></a><a id="magicparlabel-3715"><span class="float-caption-Standard float-caption float-caption-standard">Figure 8.1.1:Classes d'analyse des UC "Créer son compte client" et"Gérer son compte client"</span></a></div>

<a id="magicparlabel-3715"></a></div>

<a id="magicparlabel-3715"></a>

<div class="standard"><a id="magicparlabel-3715"></a><a id="magicparlabel-3720">Le choix du type des classes obéit à une logique de facilité d'implémentation et de flexibilité. Un numéro de maison peut être "6 a", ce qu'un type integer ne peut contenir. Un code postal peut commencer par zéro en France (exemple : 01330, Amberieux-en-dombes, Ain, Rhône-Alpes), de même pour un numéro de téléphone. Initialiser à "Belgique" par défaut à la variable "pays" pour faciliter l'encodage. Un horodatage est plus précis qu'une date pour la date d'inscription.</a></div>

<a id="magicparlabel-3720"></a>

<div class="standard"><a id="magicparlabel-3720"></a><a id="magicparlabel-3721">Le schématisme UML2 permet de représenter directement un attribut de la classe Utilisateur à l'aide d'une relation avec la classe Adresse. Une adresse contient aussi un numéro de boite. Les classes Vendeur et Gérant sont des classes vides à ce niveau d'analyse mais pourront être plus sophistiquées dans le futur. Le concept d'héritage permet dans ce cas ci d'enrichir les classes Vendeur et Gérant en fonction de l'analyse des besoins ultérieure sans devoir toucher à la classe Utilisateur. La navigabilité va dans le sens de la classe Utilisateur vers la classe Adresse. La classe Adresse n'a pas à avoir accès aux données de la classe Utilisateur.</a></div>

<a id="magicparlabel-3721"></a>

<div class="standard"><a id="magicparlabel-3721"></a><a id="magicparlabel-3722">Pour trouver les entités intéressantes, je me suis inspiré d'un document remis par le gérant du magasin. On peut y voir le mot Porte 1 qui correspond au rayon. Le numéro de cinq chiffres n'a pas été gardé pour l'application car elle ne semble pas intéressante pour la logique métier. La catégorie a par contre été ajoutée pour l'application afin de faciliter la recherche du client dans le catalogue.</a></div>

<a id="magicparlabel-3722"></a>

<div class="float float-figure"><a id="magicparlabel-3722"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3722"></a><a id="magicparlabel-3727">![image: 16_Volumes_USB_TFE_Screen_Shot_2016-05-15_at_21_51_44.png](./naturalcorner_files/16_Volumes_USB_TFE_Screen_Shot_2016-05-15_at_21_51_44.png)</a></div>

<a id="magicparlabel-3727"></a>

<div class="plain_layout"><a id="magicparlabel-3727"></a><a id="magicparlabel-3728"><span class="float-caption-Standard float-caption float-caption-standard">Figure 8.1.2:Echantillon de la liste des produits frais</span></a></div>

<a id="magicparlabel-3728"></a></div>

<a id="magicparlabel-3728"></a>

<div class="standard"><a id="magicparlabel-3728"></a><a id="magicparlabel-3734">Pour l'UC "Rechercher un produit", un article a une dénomination, un prix unitaire, peut être en promo ou indisponible et possède un commentaire écrit par le gérant du magasin. Un rayon a une dénomination correspondant aux portes ou l'emplacement, comme l'on peut le voir sur le fichier cvs fournit par le gérant du magasin "Natural Corner". La catégorie a une dénomination correspondant aux catégories habituelles dans le secteur agro-alimentaire pour les fruits et légumes et autres produits frais.</a></div>

<a id="magicparlabel-3734"></a>

<div class="float float-figure"><a id="magicparlabel-3734"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3734"></a><a id="magicparlabel-3739">![image: 17_Volumes_USB_TFE_Article.png](./naturalcorner_files/17_Volumes_USB_TFE_Article.png)</a></div>

<a id="magicparlabel-3739"></a>

<div class="plain_layout"><a id="magicparlabel-3739"></a><a id="magicparlabel-3740"><span class="float-caption-Standard float-caption float-caption-standard">Figure 8.1.3:Classes d'analyse de l'UC "Chercher produit"</span></a></div>

<a id="magicparlabel-3740"></a></div>

<a id="magicparlabel-3740"></a>

<div class="standard"><a id="magicparlabel-3740"></a><a id="magicparlabel-3745">Il a été décidé après une lecture de différents forums en ligne que la variable prix unitaire sera de type Integer lors de l'implémentation</a>

<div class="foot"><a id="magicparlabel-3745"><span class="foot_label">1</span></a>

<div class="foot_inner"><a id="magicparlabel-3745"></a>

<div class="plain_layout"><a id="magicparlabel-3745"></a><a id="magicparlabel-3749"><span class="flex_url">https://stackoverflow.com/questions/900677/how-do-i-safely-perform-money-related-calculations-in-php</span></a></div>

<a id="magicparlabel-3749"></a></div>

</div>

<a id="magicparlabel-3749">. L'argument semble convainquant. En effet, un float n'est jamais qu'une approximation et les tests de type "if" sont biaisés avec ce type. Utiliser le type Integer qu'on multiplie par cent par la suite (centimes vers Euros), est une manière de ne pas perdre l'intégrité de l'information du sytème.</a></div>

<a id="magicparlabel-3749"></a>

<div class="standard"><a id="magicparlabel-3749"></a><a id="magicparlabel-3754">Un article peut appartenir à plusieurs catégories selon le point de vue d'un magasin bio (le concombre est un légume mais aussi une produit frais, un légume vert, un légume prévu pour des shakes santé et même un cosmétique). Une catégorie contient parfois des sous-catégorie (produits frais > légumes de saison > légumes verts > ...). Nous introduisons cette idée à l'aide d'une association réflexive nommée "sous-catégorie". Les rayons étant séparés spatialement, nous pouvons établir une relation de composition entre Article et Rayon. Un rayon possède plusieurs articles, un article n'est rangé que dans un seul rayon.</a></div>

<a id="magicparlabel-3754"></a>

<div class="standard"><a id="magicparlabel-3754"></a><a id="magicparlabel-3755">Un panier a un certain nombre d'article et une valeur totale. Ces deux attributs sont en réalité dérivés car ils se calculent à partir des lignes de panier. Il en va de même pour l'attribut montant de la classe LignePanier, le montant d'une ligne est le produit du nombre d'articles de la ligne et du prix unitaire de cet article.</a></div>

<a id="magicparlabel-3755"></a>

<div class="float float-figure"><a id="magicparlabel-3755"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3755"></a><a id="magicparlabel-3760">![image: 18_Volumes_USB_TFE_panier.png](./naturalcorner_files/18_Volumes_USB_TFE_panier.png)</a></div>

<a id="magicparlabel-3760"></a>

<div class="plain_layout"><a id="magicparlabel-3760"></a><a id="magicparlabel-3761"><span class="float-caption-Standard float-caption float-caption-standard">Figure 8.1.4:Classes d'analyse de l'UC "Gérer panier"</span></a></div>

<a id="magicparlabel-3761"></a></div>

<a id="magicparlabel-3761"></a>

<div class="standard"><a id="magicparlabel-3761"></a><a id="magicparlabel-3766">La navigabilité rend étanche le sens de navigation d'article vers lignePanier. En effet, la conception objet nous suggère de limiter le plus possible la connaissance des classes entre elles. "Ordered" car il s'agit d'une liste numérotée de lignes de Panier. Une relation de composition avec Panier au lieu d'une agrégation puisque un Panier décide de construire une ligne de panier et aussi de sa destruction.</a></div>

<a id="magicparlabel-3766"></a>

<div class="standard"><a id="magicparlabel-3766"></a><a id="magicparlabel-3767">La classe commande possède un horodatage correspondant au moment de la commande, un délais de collecte pour le client et un montant total dérivé et calculé à partir du panier.</a></div>

<a id="magicparlabel-3767"></a>

<div class="float float-figure"><a id="magicparlabel-3767"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3767"></a><a id="magicparlabel-3772">![image: 19_Volumes_USB_TFE_commande.png](./naturalcorner_files/19_Volumes_USB_TFE_commande.png)</a></div>

<a id="magicparlabel-3772"></a>

<div class="plain_layout"><a id="magicparlabel-3772"></a><a id="magicparlabel-3773"><span class="float-caption-Standard float-caption float-caption-standard">Figure 8.1.5:Classes d'analyse de l'UC "Commander"</span></a></div>

<a id="magicparlabel-3773"></a></div>

<a id="magicparlabel-3773"></a>

# <a id="magicparlabel-3773"></a><a id="magicparlabel-3779">

<div class="chapter_label">Chapitre 9</div>

Base de données</a>

<a id="magicparlabel-3779"></a>

## <a id="magicparlabel-3779"></a><a id="magicparlabel-3780"><span class="section_label">9.1</span> Conception</a>

<a id="magicparlabel-3780"></a>

<div class="standard"><a id="magicparlabel-3780"></a><a id="magicparlabel-3781">Tout l'enjeu de cette base de données est de donner des tables permettant de tester le backend et la persistance des données en respectant le modèle objet des classes d'analyse. En effet, "la correspondance des données entre le modèle relationnel et le modèle objet doit faire face à plusieurs problèmes : le modèle objet propose plus de fonctionnalités : héritage, polymorphisme, ... les relations entre les entités des deux modèles sont différentes un objet ne possède pas d'identifiant en standard (hormis son adresse mémoire qui varie d'une exécution à l'autre). Dans le modèle relationnel, chaque occurrence devrait posséder un identifiant unique"</a>

<div class="foot"><a id="magicparlabel-3781"><span class="foot_label">1</span></a>

<div class="foot_inner"><a id="magicparlabel-3781"></a>

<div class="plain_layout"><a id="magicparlabel-3781"></a><a id="magicparlabel-3785"><span class="flex_url">http://www.jmdoudoux.fr/java/dej/chap-persistence.htm</span></a></div>

<a id="magicparlabel-3785"></a></div>

</div>

<a id="magicparlabel-3785">. Comme nous nous passons d'une couche logicielle permettant d'effectuer le pont entre le modèle objet de l'application et le modèle relationnel de la base de données (ORM), c'est en amont du code, au moment de la conception de la base de données, qu'il faut y penser de manière adéquate pour éviter des problèmes d'implémentation par la suite</a>

<div class="foot"><a id="magicparlabel-3785"><span class="foot_label">2</span></a>

<div class="foot_inner"><a id="magicparlabel-3785"></a>

<div class="plain_layout"><a id="magicparlabel-3785"></a><a id="magicparlabel-3793">Gruau C., Conception d’une base de données, site developpez.com 1ère édition corrigée, 13/7/2006, p. 41</a></div>

<a id="magicparlabel-3793"></a></div>

</div>

<a id="magicparlabel-3793">.</a></div>

<a id="magicparlabel-3793"></a>

<div class="standard"><a id="magicparlabel-3793"></a><a id="magicparlabel-3794">Reprenons : un objet est instancié par son constructeur et, à ce moment, un premier choix d'implémentation consiste à fournir à l'attribut d'instance _id la valeur d'un attribut de classe static_id automatiquement incrémenté. Chaque nouvelle instanciation de la classe se verra attribuer un nouvel identifiant. Au moment de l'insertion de l'objet dans la base de données, on introduit l'id en lieu et place du champ ID. Cependant le choix conceptuel du modèle relationnel impose l'utilisation d'une clé auto-incrémentée. Etant donné qu'il n'y a pas de translation directe entre cette auto-incrémentation garantissant l'unicité des lignes de la table et l'identifiant arbitraire des objets de l'application, l'insertion rate.</a></div>

<a id="magicparlabel-3794"></a>

<div class="standard"><a id="magicparlabel-3794"></a><a id="magicparlabel-3795">Il faut donc trouver une solution convenable pour garantir la liaison objet-relationnelle. En PHP, les objets sont passés par référence en paramètre aux méthodes. La méthode se chargeant d'ajouter un objet dans la base de données utilisera son mutateur setId($id). L'objet, après avoir été enregistré dans la base, sera utilisé par l'application avec le même id que celui de la base de données.</a></div>

<a id="magicparlabel-3795"></a>

<div class="standard"><a id="magicparlabel-3795"></a><a id="magicparlabel-3796">La conception de la base de données suit de près la conception objet de l'application Natural Corner. Voici la description détaillée de la modélisation:</a></div>

<a id="magicparlabel-3796"></a>

<a id="magicparlabel-3796"></a>
<a id="magicparlabel-3797"></a>
*   <a id="magicparlabel-3797">Un utilisateur passe une commande</a>
    <a id="magicparlabel-3797"></a>
    <a id="magicparlabel-3798">*   Deux entités ("utilisateurs" et "commandes") reliées par une association ("passer").*   Un utilisateur peut ne passer aucune commande (Cardinalité 0).*   Un utilisateur peut passer plusieurs commandes (Cardinalité n).*   Une commande est passée par un et un seul utilisateur (Cardinalité min 1 et max 1).</a><a id="magicparlabel-3798"></a>
*   <a id="magicparlabel-3798">Un panier donne lieu à une commande</a>
    <a id="magicparlabel-3798"></a>
    <a id="magicparlabel-3803">*   Deux entités ("paniers" et "commandes") reliées par une association ("donner lieu à").*   Un panier peut donner lieu à aucune commande (Cardinalité 0).*   Un panier peut donner lieu au plus à une commande (Cardinalité 1).*   Une commande a été donné lieu par un et un seul panier (Cardinalité min 1 et max 1).</a><a id="magicparlabel-3803"></a>
*   <a id="magicparlabel-3803">Un panier contient des lignes de panier.</a>
    <a id="magicparlabel-3803"></a>
    <a id="magicparlabel-3808">*   Deux entités ("paniers" et "lignes panier") reliées par une association ("contenir").*   Un panier peut ne pas contenir de ligne de panier (Cardinalité 0).*   Un panier peut contenir plusieurs lignes de panier(Cardinalité n).*   Une ligne de panier est contenu par un et un seul panier (Cardinalité min 1 et max 1).</a><a id="magicparlabel-3808"></a>
*   <a id="magicparlabel-3808">Un article concerne une ligne de panier.</a>
    <a id="magicparlabel-3808"></a>
    <a id="magicparlabel-3813">*   Deux entités ("lignes panier" et "articles") reliées par une association ("concerner").*   Un article peut ne concerner aucune ligne de panier (Cardinalité 0).*   Un article peut être concerné par plusieurs lignes de panier (Cardinalité n).*   Une ligne de panier est concerné par un et un seul article (Cardinalité min 1 et max 1).</a><a id="magicparlabel-3813"></a>
*   <a id="magicparlabel-3813">Un article appartient à un rayon</a>
    <a id="magicparlabel-3813"></a>
    <a id="magicparlabel-3818">*   Deux entités ("rayons" et "articles") reliées par une association ("appartenir à").*   Un article appartient à un et un seul rayon (Cardinalité min 1 et max 1).*   Un rayon peut n'avoir aucun article (Cardinalité 0).*   Un rayon contient plusieurs articles (Cardinalité n).</a><a id="magicparlabel-3818"></a>
*   <a id="magicparlabel-3818">Un article appartient à une catégorie</a>
    <a id="magicparlabel-3818"></a>
    <a id="magicparlabel-3823">*   Deux entités ("catégorie" et "articles") reliées par une association ("appartenir à").*   Un article appartient au moins à une catégorie (Cardinalité 1).*   Un article appartient peut appartenir à plusieurs catégories (Cardinalité n).*   Une catégorie peut ne s'appliquer à aucun article (Cardinalité 0).*   Une catégorie peut s'appliquer à plusieurs articles (Cardinalité n).</a><a id="magicparlabel-3823"></a>
*   <a id="magicparlabel-3823">Une catégorie catégorise une autre catégorie.</a>
    <a id="magicparlabel-3823"></a>
    <a id="magicparlabel-3829">*   Une entité ("catégorie") reliée par une association ("catégorise").*   Une catégorie peut ne pas appartenir à une autre catégorie (Cardinalité 0).*   Une catégorie peut appartenir à plusieurs autres catégories (Cardinalité n).*   Une catégorie peut ne catégoriser aucune catégorie (Cardinalité 0).*   Une catégorie peut catégoriser plusieurs autres catégories (Cardinalité n).</a><a id="magicparlabel-3829"></a>
*   <a id="magicparlabel-3829">Un vendeur est un utilisateur.</a>
    <a id="magicparlabel-3829"></a>
    <a id="magicparlabel-3835">*   Deux entités ("utilisateur" et "vendeurs") reliés par une relation d'héritage.</a><a id="magicparlabel-3835"></a>
*   <a id="magicparlabel-3835">Un gérant est un vendeur.</a>
    <a id="magicparlabel-3835"></a>
    <a id="magicparlabel-3837">*   Deux entités ("gérant" et "vendeurs") reliés par une relation d'héritage.</a><a id="magicparlabel-3837"></a>

<a id="magicparlabel-3837"></a>

## <a id="magicparlabel-3837"></a><a id="magicparlabel-3838"><span class="section_label">9.2</span> Modèle conceptuel de données (MCD)</a>

<a id="magicparlabel-3838"></a>

<div class="standard"><a id="magicparlabel-3838"></a><a id="magicparlabel-3839">Une traduction conceptuelle comme fruit de ces réflexions.</a></div>

<a id="magicparlabel-3839"></a>

<div class="float float-figure"><a id="magicparlabel-3839"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3839"></a><a id="magicparlabel-3844">![image: 20_Volumes_USB_TFE_NC_BDD.jpg](./naturalcorner_files/20_Volumes_USB_TFE_NC_BDD.jpg) <span class="float-caption-Standard float-caption float-caption-standard">Figure 9.2.1:MCD de la base de données</span></a></div>

<a id="magicparlabel-3844"></a></div>

<a id="magicparlabel-3844"></a>

## <a id="magicparlabel-3844"></a><a id="magicparlabel-3849"><span class="section_label">9.3</span> Modèle logique de données (MLD)</a>

<a id="magicparlabel-3849"></a>

<div class="standard"><a id="magicparlabel-3849"></a><a id="magicparlabel-3850">La traduction a été effectuée en partie par le logicle JMerise</a>

<div class="foot"><a id="magicparlabel-3850"><span class="foot_label">3</span></a>

<div class="foot_inner"><a id="magicparlabel-3850"></a>

<div class="plain_layout"><a id="magicparlabel-3850"></a><a id="magicparlabel-3854"><span class="flex_url">http://www.jfreesoft.com/JMerise/</span></a></div>

<a id="magicparlabel-3854"></a></div>

</div>

<a id="magicparlabel-3854">.</a></div>

<a id="magicparlabel-3854"></a>

<div class="float float-figure"><a id="magicparlabel-3854"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3854"></a><a id="magicparlabel-3863">![image: 21_Volumes_USB_TFE_NC_BDD_MLD.jpg](./naturalcorner_files/21_Volumes_USB_TFE_NC_BDD_MLD.jpg)</a></div>

<a id="magicparlabel-3863"></a>

<div class="plain_layout"><a id="magicparlabel-3863"></a><a id="magicparlabel-3864"><span class="float-caption-Standard float-caption float-caption-standard">Figure 9.3.1:MLD de la base de données</span></a></div>

<a id="magicparlabel-3864"></a></div>

<a id="magicparlabel-3864"></a>

## <a id="magicparlabel-3864"></a><a id="magicparlabel-3869"><span class="section_label">9.4</span> Réflexions sur la conception de la base de données</a>

<a id="magicparlabel-3869"></a>

<div class="standard"><a id="magicparlabel-3869"></a><a id="magicparlabel-3870">Il n'a pas été aisé de réaliser la conception. Il fallait notamment que la base de données corresponde à la conception orientée objet. D'autre part, la réalisation de l'application étant incrémentale et se perfectionne au fur et à mesure des itérations, il a fallu remanier à plusieurs reprises la base de données. Par exemple, il n'y avait pas de classe Adresse au début de la conception et l'application a d'abord été écrite en n'utilisant qu'un seul champ pour la rue ou le numéro de boîte. Après analyse et perfectionnement, il a semblé plus judicieux de créer une classe Adresse réutilisable. La difficulté provient du fait qu'une mauvaise cardinalité va influencer l'implémentation. Est-ce qu'une adresse doit d'abord être créée avant un utilisateur ou l'inverse? Après avoir relu ma documentation sur la conception d'une base de données, je me suis aperçu que je n'avais pas normalisé les relations</a>

<div class="foot"><a id="magicparlabel-3870"><span class="foot_label">4</span></a>

<div class="foot_inner"><a id="magicparlabel-3870"></a>

<div class="plain_layout"><a id="magicparlabel-3870"></a><a id="magicparlabel-3874">Gruau C., Conception d’une base de données, Site developpez.com 1ère édition corrigée, 13/7/2006, p.12</a></div>

<a id="magicparlabel-3874"></a></div>

</div>

<a id="magicparlabel-3874">. En fait, le modèle objet s'accommode très bien de l'existence de deux classes mais pas le modèle relationnel. J'ai donc repensé la base de données et ajouté les champs de la table Adresses à la table Utilisateurs.</a></div>

<a id="magicparlabel-3874"></a>

<div class="float float-figure"><a id="magicparlabel-3874"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3874"></a><a id="magicparlabel-3879">![image: 22_Volumes_USB_TFE_Screen_Shot_2016-04-03_at_02_03_44.png](./naturalcorner_files/22_Volumes_USB_TFE_Screen_Shot_2016-04-03_at_02_03_44.png)</a></div>

<a id="magicparlabel-3879"></a>

<div class="plain_layout"><a id="magicparlabel-3879"></a><a id="magicparlabel-3880"><span class="float-caption-Standard float-caption float-caption-standard">Figure 9.4.1:Erreur de conception</span></a></div>

<a id="magicparlabel-3880"></a></div>

<a id="magicparlabel-3880"></a>

<div class="standard"><a id="magicparlabel-3880"></a><a id="magicparlabel-3886">Le logiciel utilisé JMerise</a>

<div class="foot"><a id="magicparlabel-3886"><span class="foot_label">5</span></a>

<div class="foot_inner"><a id="magicparlabel-3886"></a>

<div class="plain_layout"><a id="magicparlabel-3886"></a><a id="magicparlabel-3890"><span class="flex_url">http://www.jfreesoft.com/JMerise/</span></a></div>

<a id="magicparlabel-3890"></a></div>

</div>

<a id="magicparlabel-3890">est très bien pour créer des diagrammes Merise mais donne des résultats erronés lorsqu'on utilise la traduction automatique vers le schéma relationnel. De fait, lors de la traduction du schéma entité-relation vers le schéma relationnel, il traduit les relations 1:1 par une intégrité référentielle sur les clés primaires des deux côtés de la relation, rendant le modèle logique inutilisable pour l'application. Comment mettre à jour un article s'il faut d'abord créé un rayon qui ne se met à jour que si un article est créé? J'ai donc dû réaliser "à la main" la traduction du schéma entité-relation en suivant la méthode classique</a>

<div class="foot"><a id="magicparlabel-3890"><span class="foot_label">6</span></a>

<div class="foot_inner"><a id="magicparlabel-3890"></a>

<div class="plain_layout"><a id="magicparlabel-3890"></a><a id="magicparlabel-3898">Gruau C., Conception d’une base de données, Site developpez.com 1ère édition corrigée, 13/7/2006, p.24</a></div>

<a id="magicparlabel-3898"></a></div>

</div>

<a id="magicparlabel-3898">.</a></div>

<a id="magicparlabel-3898"></a>

# <a id="magicparlabel-3898"></a><a id="magicparlabel-3899"><span class="part_label">Partie V</span> Réalisation des cas d'utilisation</a>

<a id="magicparlabel-3899"></a>

# <a id="magicparlabel-3899"></a><a id="magicparlabel-3900">

<div class="chapter_label">Chapitre 10</div>

Conception et implémentation des UC</a>

<a id="magicparlabel-3900"></a>

## <a id="magicparlabel-3900"></a><a id="magicparlabel-3901"><span class="section_label">10.1</span> UC "Créer son compte client" et "Gérer son compte client"</a>

<a id="magicparlabel-3901"></a>

### <a id="magicparlabel-3901"></a><a id="magicparlabel-3902"><span class="subsection_label">10.1.1</span> Diagramme des classes participantes (DCP)</a>

<a id="magicparlabel-3902"></a>

#### <a id="magicparlabel-3902"></a><a id="magicparlabel-3903"><span class="subsubsection_label">Réflexions sur le UC "Créer son compte client"</span></a>

<a id="magicparlabel-3903"></a>

<div class="standard"><a id="magicparlabel-3903"></a><a id="magicparlabel-3904">Un utilisateur a besoin de s'inscrire pour utiliser l'application. Il est obligé de fournir une adresse e-mail et un mot de passe (qu'il confirme) pour avoir accès à l'application "Natural Corner". Le dialogue correspondant sera un formulaire reprenant les champs utiles pour un compte utilisateur. Le contrôleur a la responsabilité de vérifier les données fournies, du point de vue de la syntaxe et du type, mais aussi du point de vue de la sécurité afin de se prémunir des failles de type injection de code javascript , entre autres. La méthode "verifierInput()" aura cette responsabilité. Une méthode "envoyerFormulaire()" se charge de récolter les informations et de les fournir au contrôle "CtrlCompte". Un diagramme de communication permet d'illustrer cette question.</a></div>

<a id="magicparlabel-3904"></a>

<div class="float float-figure"><a id="magicparlabel-3904"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3904"></a><a id="magicparlabel-3909">![image: 23_Volumes_USB_TFE_com_Cre__er_son_compte.png](./naturalcorner_files/23_Volumes_USB_TFE_com_Cre__er_son_compte.png) <span class="float-caption-Standard float-caption float-caption-standard">Figure 10.1.1:Diagramme de communication "Créer son compte client"</span></a></div>

<a id="magicparlabel-3909"></a></div>

<a id="magicparlabel-3909"></a>

#### <a id="magicparlabel-3909"></a><a id="magicparlabel-3914"><span class="subsubsection_label">Réflexions sur le UC "Gérer son compte client"</span></a>

<a id="magicparlabel-3914"></a>

<div class="standard"><a id="magicparlabel-3914"></a><a id="magicparlabel-3915">L'utilisateur qui a un compte client peut à tout moment modifier ce compte. Pour ce faire, nous allons créer une vue MiseAJourUtilisateur qui sera un formulaire de mise à jour des informations. Il pourra compléter ses informations personnelles et aussi changer son mot de passe. La logique étant sensiblement la même que pour le UC "Créer un compte client", nous nous bornerons à changer la classe de dialogue Inscription en la classe MiseAJourUtilisateur. La méthode miseAJourUtilisateur() est ajoutée à la classe CtrlCompte.</a></div>

<a id="magicparlabel-3915"></a>

#### <a id="magicparlabel-3915"></a><a id="magicparlabel-3916"><span class="subsubsection_label">Diagramme des classes participantes</span></a>

<a id="magicparlabel-3916"></a>

<div class="standard"><a id="magicparlabel-3916"></a><a id="magicparlabel-3917">Voici le diagramme des classes participantes réalisant le use case "Créer son compte client" suivi de celui de "Gérer son compte client".</a></div>

<a id="magicparlabel-3917"></a>

<div class="float float-figure"><a id="magicparlabel-3917"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3917"></a><a id="magicparlabel-3922">![image: 24_Volumes_USB_TFE_Cre__er_son_compte__DCP_.png](./naturalcorner_files/24_Volumes_USB_TFE_Cre__er_son_compte__DCP_.png)</a></div>

<a id="magicparlabel-3922"></a>

<div class="plain_layout"><a id="magicparlabel-3922"></a><a id="magicparlabel-3923"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.1.2:Créer son compte client</span></a></div>

<a id="magicparlabel-3923"></a></div>

<a id="magicparlabel-3923"></a>

<div class="float float-figure"><a id="magicparlabel-3923"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3923"></a><a id="magicparlabel-3933">![image: 25_Volumes_USB_TFE_Ge__rer_son_compte__DCP_.png](./naturalcorner_files/25_Volumes_USB_TFE_Ge__rer_son_compte__DCP_.png)</a></div>

<a id="magicparlabel-3933"></a>

<div class="plain_layout"><a id="magicparlabel-3933"></a><a id="magicparlabel-3934"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.1.3:Gérer son compte client</span></a></div>

<a id="magicparlabel-3934"></a></div>

<a id="magicparlabel-3934"></a>

### <a id="magicparlabel-3934"></a><a id="magicparlabel-3939"><span class="subsection_label">10.1.2</span> Diagramme de navigation</a>

<div class="foot"><a id="magicparlabel-3939"><span class="foot_label">1</span></a>

<div class="foot_inner"><a id="magicparlabel-3939"></a>

<div class="plain_layout"><a id="magicparlabel-3939"></a><a id="magicparlabel-3943">Voir Annexe B</a></div>

<a id="magicparlabel-3943"></a></div>

</div>

<a id="magicparlabel-3943"></a>

<div class="standard"><a id="magicparlabel-3943"></a><a id="magicparlabel-3944">Un utilisateur accède à l'application et a ensuite le choix entre se logguer avec ou sans Facebook ou créer un compte. Il ne peut pas entrer dans l'application sans s'être identifié. Il peut créer un compte s'il le désire. Il est envoyé vers la page de l'inscription. Il remplit les champs jusqu'à ce qu'il se conforme aux règles de validation. Il voit un message “compte créé” et est redirigé vers la page principale de l'application.</a></div>

<a id="magicparlabel-3944"></a>

<div class="float float-figure"><a id="magicparlabel-3944"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3944"></a><a id="magicparlabel-3949">![image: 26_Volumes_USB_TFE_diagramme_nav_creer_gerer_compte.png](./naturalcorner_files/26_Volumes_USB_TFE_diagramme_nav_creer_gerer_compte.png)</a></div>

<a id="magicparlabel-3949"></a>

<div class="plain_layout"><a id="magicparlabel-3949"></a><a id="magicparlabel-3950"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.1.4:Diagramme de navigation pour "Créer son compte" et "Gérer son compte"</span></a></div>

<a id="magicparlabel-3950"></a></div>

<a id="magicparlabel-3950"></a>

### <a id="magicparlabel-3950"></a><a id="magicparlabel-3956"><span class="subsection_label">10.1.3</span> Conception objet préliminaire</a>

<a id="magicparlabel-3956"></a>

#### <a id="magicparlabel-3956"></a><a id="magicparlabel-3957"><span class="subsubsection_label">Diagrammes d'interaction pour le UC "Créer son compte client"</span></a>

<a id="magicparlabel-3957"></a>

<div class="float float-figure"><a id="magicparlabel-3957"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3957"></a><a id="magicparlabel-3962">![image: 27_Volumes_USB_TFE_sd_Cre__er_son_compte.png](./naturalcorner_files/27_Volumes_USB_TFE_sd_Cre__er_son_compte.png)</a></div>

<a id="magicparlabel-3962"></a>

<div class="plain_layout"><a id="magicparlabel-3962"></a><a id="magicparlabel-3963"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.1.5:Diagramme d'interaction "Créer son compte"</span></a></div>

<a id="magicparlabel-3963"></a></div>

<a id="magicparlabel-3963"></a>

<div class="standard"><a id="magicparlabel-3963"></a><a id="magicparlabel-3969">La réflexion à partir du diagramme de séquence nous a amené à penser qu'un dialogue Message était nécessaire pour alerter l'utilisateur de la création de son compte. La méthode addUser(uti) introduit l'objet 'uti' créé suite à un message d'un contrôleur CtrlCompte. Une instance d'adresse est immédiatement créée à la suite de la création d'une instance d'utilisateur du fait de leur relation de composition.</a></div>

<a id="magicparlabel-3969"></a>

<div class="standard"><a id="magicparlabel-3969"></a><a id="magicparlabel-3970">L'écriture d'un diagramme de séquence prenant en compte le cas où l'input ne correspond pas au critère ne semble pas pertinent car trop rudimentaire, en effet un message d'erreur sera propagé et l'utilisateur recommencera l'opération.</a></div>

<a id="magicparlabel-3970"></a>

<div class="standard"><a id="magicparlabel-3970"></a><a id="magicparlabel-3971">La méthode checkEmailAvailability(email) va consulter la base de donnée pour savoir si l'email est déjà pris.</a></div>

<a id="magicparlabel-3971"></a>

#### <a id="magicparlabel-3971"></a><a id="magicparlabel-3972"><span class="subsubsection_label">Diagrammes d'interaction pour le UC "Gérer son compte client"</span></a>

<a id="magicparlabel-3972"></a>

<div class="float float-figure"><a id="magicparlabel-3972"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3972"></a><a id="magicparlabel-3977">![image: 28_Volumes_USB_TFE_sd_Ge__rer_son_compte.png](./naturalcorner_files/28_Volumes_USB_TFE_sd_Ge__rer_son_compte.png)</a></div>

<a id="magicparlabel-3977"></a>

<div class="plain_layout"><a id="magicparlabel-3977"></a><a id="magicparlabel-3978"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.1.6:Diagramme d'interaction "Gérer son compte"</span></a></div>

<a id="magicparlabel-3978"></a></div>

<a id="magicparlabel-3978"></a>

<div class="standard"><a id="magicparlabel-3978"></a><a id="magicparlabel-3984">L'utilisateur, en accédant à la page de mise à jour de ses informations, actionne la méthode "getInfosCompte". Le contrôleur va ensuite chercher dans la base de donnée les informations relative à l'utilisateur identifié. Une instance d'utilisateur est créée et contient les informations de l'utilisateur collectées dans la base de données. La méthode updateUser demande une adresse email pour identifier l'utilisateur et crée un nouvel utilisateur qu'il va mettre à jour avec ses nouveau champs l'ancien utilisateur. La responsabilité de la création d'une instance d'utilisateur est cette fois ci laissée à la classe Database.</a></div>

<a id="magicparlabel-3984"></a>

#### <a id="magicparlabel-3984"></a><a id="magicparlabel-3985"><span class="subsubsection_label">Création du gestionnaire de la base de données</span></a>

<a id="magicparlabel-3985"></a>

<div class="standard"><a id="magicparlabel-3985"></a><a id="magicparlabel-3986">Nous pouvons désormais réaliser le CRUD (Create, Read, Update, Delete) pour les utilisateurs. Nous mettons de côté pour le moment le Delete car il n'est pas souhaitable de donner cette possibilité à un utilisateur. Plusieurs méthodes ont été créées. Un choix de conception a été effectué au niveau de l'utilisation de l'e-mail pour retrouver de manière unique un utilisateur. Il s'agit d'une clé primaire qui remplace la clé primaire de la base de données pour le modèle conceptuel (surrogate key). Il est nécessaire de vérifier le mot de passe et la disponibilité d'une adresse e-mail pour qu'un utilisateur s'identifie. Cette action n'a pas fait l'objet d'un UC à cause de sa simplicité.</a></div>

<a id="magicparlabel-3986"></a>

<div class="float float-figure"><a id="magicparlabel-3986"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3986"></a><a id="magicparlabel-3991">![image: 29_Volumes_USB_TFE_database.png](./naturalcorner_files/29_Volumes_USB_TFE_database.png)</a></div>

<a id="magicparlabel-3991"></a>

<div class="plain_layout"><a id="magicparlabel-3991"></a><a id="magicparlabel-3992"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.1.7:Gestionnaire de la base de données</span></a></div>

<a id="magicparlabel-3992"></a></div>

<a id="magicparlabel-3992"></a>

#### <a id="magicparlabel-3992"></a><a id="magicparlabel-3998"><span class="subsubsection_label">Diagramme de classes</span></a>

<a id="magicparlabel-3998"></a>

<div class="float float-figure"><a id="magicparlabel-3998"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-3998"></a><a id="magicparlabel-4003">![image: 30_Volumes_USB_TFE_Cre__er_son_compte__diag__de_classe_.png](./naturalcorner_files/30_Volumes_USB_TFE_Cre__er_son_compte__diag__de_classe_.png)</a></div>

<a id="magicparlabel-4003"></a>

<div class="plain_layout"><a id="magicparlabel-4003"></a><a id="magicparlabel-4004"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.1.8:Diagramme de classes</span></a></div>

<a id="magicparlabel-4004"></a></div>

<a id="magicparlabel-4004"></a>

### <a id="magicparlabel-4004"></a><a id="magicparlabel-4009"><span class="subsection_label">10.1.4</span> Implémentation</a>

<a id="magicparlabel-4009"></a>

#### <a id="magicparlabel-4009"></a><a id="magicparlabel-4010"><span class="subsubsection_label">Tests unitaires</span></a>

<a id="magicparlabel-4010"></a>

<div class="standard"><a id="magicparlabel-4010"></a><a id="magicparlabel-4011">Pour ce premier UC, il s'agit d'un howto afin de permettre au lecteur de reproduire la démarche pour son propre projet. Il s'agit de travailler selon la méthode Test Driven Development, d'où l'écriture des tests unitaires avant le code proprement dit. Voir appendice A.</a></div>

<a id="magicparlabel-4011"></a>

##### <a id="magicparlabel-4011"></a><a id="magicparlabel-4012"><span class="paragraph_label">Classe entités</span></a>

<a id="magicparlabel-4012"></a>

<div class="standard"><a id="magicparlabel-4012"></a><a id="magicparlabel-4013">En me demandant comment implémenter cette classe, je me rends compte qu'une relation de composition entre Adresse et Utilisateur ne convient pas. D'abord parce que le couplage est trop fort et empêche la réutissabilité (cette classe pourra être utilisée pour une autre classe ultérieurement), ensuite parce que le langage PHP ne permet pas de créer une classe interne de manière triviale. Ce surplus de travail n'étant pas nécessaire, je décide de corriger la classe Adresse.</a></div>

<a id="magicparlabel-4013"></a>

<div class="standard"><a id="magicparlabel-4013"></a><a id="magicparlabel-4014">Il reste encore les deux classes à tester : Gérant et Vendeur. Il s'agit de tester cette fois l'héritage. L'opération consiste à vérifier que les types sont identiques.</a></div>

<a id="magicparlabel-4014">

<div class="float float-listings">

<pre class="listings PHP">public function testInheritance(){
        $this->assertTrue($this->vendeur instanceof Utilisateur);               
}</pre>

</div>

</a>

<div class="standard"><a id="magicparlabel-4014"></a><a id="magicparlabel-4022">Il faut maintenant tester le gestionnaire de la base de données. Une classe de tests est créée et va travailler de la même manière pour les différentes méthodes du gestionnaire de la base de données.</a></div>

<a id="magicparlabel-4022"></a>

#### <a id="magicparlabel-4022"></a><a id="magicparlabel-4023"><span class="subsubsection_label">Classe du contrôleur</span></a>

<a id="magicparlabel-4023"></a>

<div class="standard"><a id="magicparlabel-4023"></a><a id="magicparlabel-4024">Le première chose à faire est de créer une classe Trait</a>

<div class="foot"><a id="magicparlabel-4024"><span class="foot_label">2</span></a>

<div class="foot_inner"><a id="magicparlabel-4024"></a>

<div class="plain_layout"><a id="magicparlabel-4024"></a><a id="magicparlabel-4028"><span class="flex_url">https://secure.php.net/manual/en/language.oop5.traits.php</span>Un trait en PHP est une manière commode d'éviter la complexité de l'héritage multiple pour les langages ne comportant que l'héritage simple. Une première tentative pour l'application "Natural Corner" se basait sur une classe abstraite contrôleur à chaque fois héritée par une classe héritée de la classe Action. Cette solution a été élégamment remplacée par un trait.</a></div>

<a id="magicparlabel-4028"></a></div>

</div>

<a id="magicparlabel-4028">PHP nommé “CtrlCompte.class.php“ dans le dossier controlers. Ensuite, on peut créer une classe EnregistrementAction.inc.php dans laquelle les méthodes du modèle relatives à CtrlCompte seront utilisées. On clique droit sur cette dernière classe et on demande à Eclipse PHP de créer une classe de tests. Cette classe de test aura préparé les tests relatifs aux méthodes du Trait CtrlCompte.</a></div>

<a id="magicparlabel-4028"></a>

<div class="float float-figure"><a id="magicparlabel-4028"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4028"></a><a id="magicparlabel-4037">![image: 31_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_14_05_11.png](./naturalcorner_files/31_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_14_05_11.png)</a></div>

<a id="magicparlabel-4037"></a>

<div class="plain_layout"><a id="magicparlabel-4037"></a><a id="magicparlabel-4038"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.1.9:Trait PHP implémentant le contrôleur CtrlCompte</span></a></div>

<a id="magicparlabel-4038"></a></div>

<a id="magicparlabel-4038"></a>

<div class="standard"><a id="magicparlabel-4038"></a><a id="magicparlabel-4044">La difficulté ici revient à trouver le moyen de simuler les inputs de l'utilisateur matérialisés par la variable superglobale $_POST. Le choix s'est porté sur l'utilisation de la fonction filter_var_array()</a>

<div class="foot"><a id="magicparlabel-4044"><span class="foot_label">3</span></a>

<div class="foot_inner"><a id="magicparlabel-4044"></a>

<div class="plain_layout"><a id="magicparlabel-4044"></a><a id="magicparlabel-4048"><span class="flex_url">https://secure.php.net/manual/fr/function.filter-var-array.php</span></a></div>

<a id="magicparlabel-4048"></a></div>

</div>

<a id="magicparlabel-4048">. En suivant cette exemple trouvé sur stackoverflow</a>

<div class="foot"><a id="magicparlabel-4048"><span class="foot_label">4</span></a>

<div class="foot_inner"><a id="magicparlabel-4048"></a>

<div class="plain_layout"><a id="magicparlabel-4048"></a><a id="magicparlabel-4056"><span class="flex_url">https://stackoverflow.com/questions/30123803/setting-post-for-filter-input-arrayinput-post-in-phpunit-test</span></a></div>

<a id="magicparlabel-4056"></a></div>

</div>

<a id="magicparlabel-4056">, j'ai réussi à mettre en place un batterie de tests pour la méthode validerInputs().</a></div>

<a id="magicparlabel-4056"></a>

<div class="float float-figure"><a id="magicparlabel-4056"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4056"></a><a id="magicparlabel-4065">![image: 32_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_14_08_42.png](./naturalcorner_files/32_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_14_08_42.png)</a></div>

<a id="magicparlabel-4065"></a>

<div class="plain_layout"><a id="magicparlabel-4065"></a><a id="magicparlabel-4066"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.1.10:Répertoires des tests</span></a></div>

<a id="magicparlabel-4066"></a></div>

<a id="magicparlabel-4066"></a>

<div class="standard"><a id="magicparlabel-4066"></a><a id="magicparlabel-4072">Les tests se borneront à reproduire les inputs sans rentrer dans les détails puisque les mutateurs de la classe Utilisateur ont déjà testé les différentes expressions régulières utilisées dans la méthode verifierInput(). Tout le code ne sera malheureusement pas couvert par les tests unitaires car une bonne partie du contrôleur relève de la gestion de la Vue et ne relève pas du domaine des tests unitaires.</a></div>

<a id="magicparlabel-4072"></a>

<div class="float float-figure"><a id="magicparlabel-4072"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4072"></a><a id="magicparlabel-4077">![image: 33_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_14_09_01.png](./naturalcorner_files/33_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_14_09_01.png)</a></div>

<a id="magicparlabel-4077"></a>

<div class="plain_layout"><a id="magicparlabel-4077"></a><a id="magicparlabel-4078"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.1.11:Tests unitaires du contrôleur CtrlCompte</span></a></div>

<a id="magicparlabel-4078"></a></div>

<a id="magicparlabel-4078"></a>

<div class="standard"><a id="magicparlabel-4078"></a><a id="magicparlabel-4084">A la ligne 22, on peut voir la technique employée pour imiter les inputs de l'utilisateur lors du test unitaire.</a></div>

<a id="magicparlabel-4084"></a>

<div class="float float-figure"><a id="magicparlabel-4084"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4084"></a><a id="magicparlabel-4089">![image: 34_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_14_09_20.png](./naturalcorner_files/34_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_14_09_20.png)</a></div>

<a id="magicparlabel-4089"></a>

<div class="plain_layout"><a id="magicparlabel-4089"></a><a id="magicparlabel-4090"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.1.12:Tests unitaires du contrôleur CtrlCompte-méthode testVerifierInput()</span></a></div>

<a id="magicparlabel-4090"></a></div>

<a id="magicparlabel-4090"></a>

<div class="standard"><a id="magicparlabel-4090"></a><a id="magicparlabel-4096">A la ligne 53, on initialise et remplit un tableau ayant le nom de la variable superglobale récupérant les requêtes POST du protocole HTML en PHP. Il suffit alors de tester la méthode verifierInput().</a></div>

<a id="magicparlabel-4096"></a>

#### <a id="magicparlabel-4096"></a><a id="magicparlabel-4097"><span class="subsubsection_label">Code</span></a>

<a id="magicparlabel-4097"></a>

<div class="standard"><a id="magicparlabel-4097"></a><a id="magicparlabel-4098">La démarche préconisée dans le livre de référence</a>

<div class="foot"><a id="magicparlabel-4098"><span class="foot_label">5</span></a>

<div class="foot_inner"><a id="magicparlabel-4098"></a>

<div class="plain_layout"><a id="magicparlabel-4098"></a><a id="magicparlabel-4102">Roques, P., UML2 Modéliser une application web, Eyrolles 4ème édition, 2008, p. 147</a></div>

<a id="magicparlabel-4102"></a></div>

</div>

<a id="magicparlabel-4102">suggère de mettre en place une conception objet détaillée. Nous passerons plutôt directement à l'écriture du code en reliant au framework mis en place la conception objet préliminaire. Cette façon de procéder évite de rentrer dans des détails d'implémentation sur un schéma UML liés à un langage qui peut lui même varier en fonction d'un framework.</a></div>

<a id="magicparlabel-4102"></a>

<div class="standard"><a id="magicparlabel-4102"></a><a id="magicparlabel-4103">Le framework impose que les différentes classes d'implémentation dérivent des classes mères View et Action. Dès lors, le contrôleur se matérialise par les différentes classe *Action.inc.php. Cependant, l'héritage multiple n'étant pas possible en PHP, il est compliqué de créer une classe abstraite qui aurait les méthodes du contrôleur. L'idée pour implémenter le contrôleur ‘CtrlCompte‘ de l'analyse est de créer un trait PHP appelé “CtrlCompte“ qui comporte les méthodes implémentées et qui seront utilisées par les classes dérivant de la classe Action. Le framework peut ainsi rendre compte du modèle modèle-vue-contrôleur.</a></div>

<a id="magicparlabel-4103"></a>

<div class="float float-figure"><a id="magicparlabel-4103"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4103"></a><a id="magicparlabel-4108">![image: 35_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_14_16_53.png](./naturalcorner_files/35_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_14_16_53.png)</a></div>

<a id="magicparlabel-4108"></a>

<div class="plain_layout"><a id="magicparlabel-4108"></a><a id="magicparlabel-4109"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.1.13:Hiérarchie des dossiers représentant une conception objet MVC en PHP</span></a></div>

<a id="magicparlabel-4109"></a></div>

<a id="magicparlabel-4109"></a>

<div class="standard"><a id="magicparlabel-4109"></a><a id="magicparlabel-4115">Dans la classe du contrôleur EnregistrementAction.inc.php (Voir figure 9.1.20), les données envoyées par l’utilisateur pour s’enregistrer doivent être traitées afin d’assurer l’intégrité des données manipulées par le modèle et la base de données. Il convient de se protéger des certaines failles de sécurités. On utilise traditionnellement différentes techniques comme la fonction magic_quote ou html_special_char pour échapper le code. Cependant, PHP a prévu un moyen sécurisé et efficace pour manier les données de l’utilisateur: la méthode filter_input.</a></div>

<a id="magicparlabel-4115">

<div class="float float-listings">

<pre class="listings PHP">$form_data = filter_input_array(INPUT_POST, $filters);</pre>

</div>

</a>

<div class="standard"><a id="magicparlabel-4115"></a><a id="magicparlabel-4121">Il suffit de transmettre un tableau contenant l’ensemble des filtres sur les inputs de l’utilisateur à la méthode filter_input_array() et l’on obtient un procédé propre et net pour manier les données de l’utilisateur. Sur l’exemple choisi (ligne 14 à 16), on applique le filtre FILTER_SANITIZE_EMAIL et FILTER_SANITIZE_MAGIC_QUOTES pour l’e-mail indiqué par l’utilisateur. Le flag FILTER_NULL_ON_FAILURE permet d’éviter de répéter les méthodes isset() avec !empty() et de les remplacer par un simple test sur input!==NULL. Pour le mot de passe, une option a été ajoutée, l'expression régulière sur le mot de passe afin de contrôler qu’il y a bien au moins 6 caractères munis d’une majuscule et d’un nombre au minimum. Si un des filtres ne passe pas, la valeur NULL est retournée. Avec ces données, un nouvel utilisateur est instancié :</a></div>

<a id="magicparlabel-4121"></a>

<div class="float float-figure"><a id="magicparlabel-4121"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4121"></a><a id="magicparlabel-4126">![image: 36_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_14_29_17.png](./naturalcorner_files/36_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_14_29_17.png)</a></div>

<a id="magicparlabel-4126"></a>

<div class="plain_layout"><a id="magicparlabel-4126"></a><a id="magicparlabel-4127"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.1.14:Méthode ajouterUtilisateur()</span></a></div>

<a id="magicparlabel-4127"></a></div>

<a id="magicparlabel-4127"></a>

<div class="standard"><a id="magicparlabel-4127"></a><a id="magicparlabel-4133">A noter l’utilisation, au lieu du traditionnel md5(), de la méthode password_hash() (ligne 67) qui, selon la documentation PHP, est plus appropriée pour le “hashage” d’un mot de passe</a>

<div class="foot"><a id="magicparlabel-4133"><span class="foot_label">6</span></a>

<div class="foot_inner"><a id="magicparlabel-4133"></a>

<div class="plain_layout"><a id="magicparlabel-4133"></a><a id="magicparlabel-4137"><span class="flex_url">Voir https://secure.php.net/manual/fr/faq.passwords.php</span></a></div>

<a id="magicparlabel-4137"></a></div>

</div>

<a id="magicparlabel-4137">. Son utilisation est très simple et passe par un “salage” du mot de passe nommé “cost“ relatif à une constante PASSWORD_BCRYPT_DEFAULT_COST. Cette constante devra changer dans le temps par la communauté des développeurs de la bibliothèque PHP, ce qui permet ainsi au développeur d’une application de ne pas devoir trop se documenter sur les nouveautés en matières de “salage” de mot de passe</a>

<div class="foot"><a id="magicparlabel-4137"><span class="foot_label">7</span></a>

<div class="foot_inner"><a id="magicparlabel-4137"></a>

<div class="plain_layout"><a id="magicparlabel-4137"></a><a id="magicparlabel-4145"><span class="flex_url">https://secure.php.net/manual/fr/function.password­hash.php</span></a></div>

<a id="magicparlabel-4145"></a></div>

</div>

<a id="magicparlabel-4145">.</a></div>

<a id="magicparlabel-4145"></a>

<div class="standard"><a id="magicparlabel-4145"></a><a id="magicparlabel-4150">L'adresse IP est récupérée à l'aide de la variable superglobale $_SERVEUR['REMOTE_ADDR'] (ligne 70). La méthode filter_var() filtre le résultat obtenu avec la constante FILTER_VALIDATE_IP.</a></div>

<a id="magicparlabel-4150"></a>

<div class="standard"><a id="magicparlabel-4150"></a><a id="magicparlabel-4151">La classe du modèle Database.inc.php:</a></div>

<a id="magicparlabel-4151"></a>

<div class="float float-figure"><a id="magicparlabel-4151"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4151"></a><a id="magicparlabel-4156">![image: 37_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_14_32_01.png](./naturalcorner_files/37_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_14_32_01.png)</a></div>

<a id="magicparlabel-4156"></a>

<div class="plain_layout"><a id="magicparlabel-4156"></a><a id="magicparlabel-4157"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.1.15:Méthode updateUser de la classe Database</span></a></div>

<a id="magicparlabel-4157"></a></div>

<a id="magicparlabel-4157"></a>

<div class="standard"><a id="magicparlabel-4157"></a><a id="magicparlabel-4163">La documentation de style Javadoc permet de comprendre facilement le code (ligne 266 à 272)</a>

<div class="foot"><a id="magicparlabel-4163"><span class="foot_label">8</span></a>

<div class="foot_inner"><a id="magicparlabel-4163"></a>

<div class="plain_layout"><a id="magicparlabel-4163"></a><a id="magicparlabel-4167"><span class="flex_url">http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-005-elements-of-software-construction-fall-2011/lecture-notes/MIT6_005F11_lec03.pdf</span>, consulté le 31/03/2016</a></div>

<a id="magicparlabel-4167"></a></div>

</div>

<a id="magicparlabel-4167">. Envoie un booléen et une exception relative à l'e-mail en cas d’échecs. Le booléen est un choix de type ‘procédural’ qui garde des avantages. J’ai choisi de lancer une exception sur l’email, qui fait office de clé auxiliaire (surrogate), si celui-ci est déjà pris. La bibliothèque PDO de PHP, qui est par ailleurs orientée objet, s'occupe de l'accès à la base de données. Les requêtes préparées ont pour elles d’offrir une bonne défense à la faille injection SQL. Comme il n’y a pas de ORM utilisé, les requêtes SQL sont à chaque fois pensées et élaborées de la manière la plus judicieuse pour l'application. La requête va faire la mise à jour des données d’un utilisateur.</a></div>

<a id="magicparlabel-4167"></a>

<div class="standard"><a id="magicparlabel-4167"></a><a id="magicparlabel-4172">Le template userinfos.inc.php pour la class de la vue VoirCompteView.inc.php :</a></div>

<a id="magicparlabel-4172"></a>

<div class="float float-figure"><a id="magicparlabel-4172"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4172"></a><a id="magicparlabel-4177">![image: 38_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_14_36_20.png](./naturalcorner_files/38_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_14_36_20.png)</a></div>

<a id="magicparlabel-4177"></a>

<div class="plain_layout"><a id="magicparlabel-4177"></a><a id="magicparlabel-4178"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.1.16:Template userinfos.inc.php de la vue VoirCompteView</span></a></div>

<a id="magicparlabel-4178"></a></div>

<a id="magicparlabel-4178"></a>

<div class="standard"><a id="magicparlabel-4178"></a><a id="magicparlabel-4184">Ce template est appelé par la classe VoirCompteView :</a></div>

<a id="magicparlabel-4184"></a>

<div class="float float-figure"><a id="magicparlabel-4184"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4184"></a><a id="magicparlabel-4189">![image: 39_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_14_37_48.png](./naturalcorner_files/39_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_14_37_48.png)</a></div>

<a id="magicparlabel-4189"></a>

<div class="plain_layout"><a id="magicparlabel-4189"></a><a id="magicparlabel-4190"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.1.17:Classe VoirCompteView.inc.php</span></a></div>

<a id="magicparlabel-4190"></a></div>

<a id="magicparlabel-4190"></a>

<div class="standard"><a id="magicparlabel-4190"></a><a id="magicparlabel-4196">Cette manière de procéder permet de séparer le code PHP du code HTML au maximum. Seul des valeurs comme $this->user->getPrenom(); se retrouvent dans le code. A noter l’utilisation de Bootstrap dans les balises HTML : <table class="table­responsive col-xs-6 col-sm-6 col-md-6 col-lg-6 col-md-offset-3 col-sm-offset-3">. signifie qu’il s’agit d’un tableau s’ajustant aux différentes tailles d’écran ou du navigateur selon une logique “grid”. Chaque “row” est découpée en 12 cases. Si l’écran est de taille moyenne “md” alors le tableau doit prendre 6 cases après avoir laissé un “offset” de trois cases à gauche class=” col­md­6 col­md­offset­3”. Trois cases à droites sont automatiques calculées puisque 12 ­- 6 -­ 3 = 3\. Cette manière simple de procéder permet de créer un site responsive qui s’adapte à toutes les tailles d’écran.</a></div>

<a id="magicparlabel-4196"></a>

### <a id="magicparlabel-4196"></a><a id="magicparlabel-4197"><span class="subsection_label">10.1.5</span> Difficultés rencontrées, réflexions et conclusions provisoires</a>

<a id="magicparlabel-4197"></a>

<a id="magicparlabel-4197"></a>
<a id="magicparlabel-4198">*   La difficulté principale tient à bien comprendre les liens entre le contrôleur, la vue et les templates. Une fois habitué, il devient plus aisée de penser de cette manière. Il est intéressant de constater que ce MVC s’adapte très bien à une analyse UML.</a>
*   <a id="magicparlabel-4198">L’écriture de la classe Utilisateur.class.php m’a donné plusieurs choix d’implémentation. Vais-je laisser le contrôleur vérifier les données entrées par l’utilisateur ou vais-je les vérifier dans les mutateurs des attributs de la classe? L’idée serait de créer une méthode statique sanitazeData() comme préconisé dans le livre “PHP 5 Social Networking”</a>

    <div class="foot"><a id="magicparlabel-4198"><span class="foot_label">9</span></a>

    <div class="foot_inner"><a id="magicparlabel-4198"></a>

    <div class="plain_layout"><a id="magicparlabel-4198"></a><a id="magicparlabel-4203">PHP 5 Social Networking, Packt Publishing, 2010, p. 37</a></div>

    <a id="magicparlabel-4203"></a></div>

    </div>

    <a id="magicparlabel-4203">. Cette méthode serait sans doute une classe “statique” ou utilitaire dans le contrôleur et je l’utilise directement dans les classes du modèle. J’ai ainsi un contrôle des inputs à la source et me prémunie directement de la faille XSS ou de l’injection SQL. Finalement, en compulsant la documentation PHP et en m'inspirant du site du professeur B. Estellon</a>

    <div class="foot"><a id="magicparlabel-4203"><span class="foot_label">10</span></a>

    <div class="foot_inner"><a id="magicparlabel-4203"></a>

    <div class="plain_layout"><a id="magicparlabel-4203"></a><a id="magicparlabel-4207"><span class="flex_url">http://pageperso.lif.univ-mrs.fr/~bertrand.estellon/webCCI/cours/Filtragedesentres.pdf</span></a></div>

    <a id="magicparlabel-4207"></a></div>

    </div>

    <a id="magicparlabel-4207">, j'ai préféré utilisé la méthode filter_input().</a>
<a id="magicparlabel-4207"></a>
*   <a id="magicparlabel-4207">Il fallait configurer plusieurs modules pour faire fonctionner l'ensemble des logiciels. J’ai réussi à intégrer le module PTI</a>

    <div class="foot"><a id="magicparlabel-4207"><span class="foot_label">11</span></a>

    <div class="foot_inner"><a id="magicparlabel-4207"></a>

    <div class="plain_layout"><a id="magicparlabel-4207"></a><a id="magicparlabel-4216"><span class="flex_url">https://marketplace.eclipse.org/content/pti-php-tool-integration</span></a></div>

    <a id="magicparlabel-4216"></a></div>

    </div>

    <a id="magicparlabel-4216">à Eclipse, j'étais en mesure d’effectuer des tests unitaires avec PHPUnit</a>

    <div class="foot"><a id="magicparlabel-4216"><span class="foot_label">12</span></a>

    <div class="foot_inner"><a id="magicparlabel-4216"></a>

    <div class="plain_layout"><a id="magicparlabel-4216"></a><a id="magicparlabel-4224"><span class="flex_url">https://phpunit.de/manual/current/en/index.html</span></a></div>

    <a id="magicparlabel-4224"></a></div>

    </div>

    <a id="magicparlabel-4224">. La documentation de PHP Unit est très bien fournie et je me suis formé à réaliser des tests de manière satisfaisante en la lisant. En réalité, la bibliothèque PHP Unit est très semblable dans sa philosophie à JUnit pour le langage Java et tout ce que j'ai appris sera sans nul doute profitable pour un autre langage de programmation.</a>
<a id="magicparlabel-4224"></a>
*   <a id="magicparlabel-4224">J'ai appris qu’il n’y avait pas de surcharge de méthode (overload) en PHP 5, je dois trouver une solution alternative. Soit je crée “à la main” la surcharge grâce à une méthode trouvée ici</a>

    <div class="foot"><a id="magicparlabel-4224"><span class="foot_label">13</span></a>

    <div class="foot_inner"><a id="magicparlabel-4224"></a>

    <div class="plain_layout"><a id="magicparlabel-4224"></a><a id="magicparlabel-4233"><span class="flex_url">https://openclassrooms.com/courses/php5-comment-gerer-l-absence-de-surcharge</span></a></div>

    <a id="magicparlabel-4233"></a></div>

    </div>

    <a id="magicparlabel-4233">. Soit je me passe de la surcharge. Je dois donc utiliser un seul constructeur, ce qui est plutôt pénible pour la récupération d’un utilisateur dans la base de données. Le problème vient du fait que je dois connaître le fichier Utilisateur et savoir à l’avance le résultat de la requête, ce qui implique un fort couplage entre la base de données et la classe Utilisateur. Je voudrais éviter ce cas de figure. Première possibilité je crée un pattern DAO. Autre possibilité je mets en oeuvre “l’hydratation des objects” comme indiqué dans ici</a>

    <div class="foot"><a id="magicparlabel-4233"><span class="foot_label">14</span></a>

    <div class="foot_inner"><a id="magicparlabel-4233"></a>

    <div class="plain_layout"><a id="magicparlabel-4233"></a><a id="magicparlabel-4241"><span class="flex_url">https://openclassrooms.com/courses/programmez-en-oriente-objet-en-php/manipulation-de-donnees-stockees</span></a></div>

    <a id="magicparlabel-4241"></a></div>

    </div>

    <a id="magicparlabel-4241">. Je vais essayer la solution la plus directe en instanciant les objets avec le constructeur le plus évident (chaque attribut privé de la classe reçoit un paramètre lui donnant une nouvelle valeur).</a>
<a id="magicparlabel-4241"></a>
*   <a id="magicparlabel-4241">Je n’arrivais pas à configurer le chemin d’accès dans la fonction require_once de manière à l’utiliser en chemin relatif au dossier du projet plutôt qu’en chemin absolu sur mon système de fichiers. Après quelques recherches, j'ai trouvé la variable “Magic Constant</a>

    <div class="foot"><a id="magicparlabel-4241"><span class="foot_label">15</span></a>

    <div class="foot_inner"><a id="magicparlabel-4241"></a>

    <div class="plain_layout"><a id="magicparlabel-4241"></a><a id="magicparlabel-4250"><span class="flex_url">https://secure.php.net/manual/en/language.constants.predefined.php</span></a></div>

    <a id="magicparlabel-4250"></a></div>

    </div>

    <a id="magicparlabel-4250">“ __DIR__ qui fournit le chemin absolu du dossier dans lequel s'exécute le script.</a>
<a id="magicparlabel-4250"></a>
*   <a id="magicparlabel-4250">En faisant les tests je découvre qu’un objet de type horodatage “DateTime” ne peut être converti en objet String et j’ajoute le new DateTime qui permet de créer un objet à la volée. Pour l’opération inverse de l’objet vers un un objet String j’ai trouvé sur StackOverFlow une réponse statisfaisante utilisant la méthode format()</a>

    <div class="foot"><a id="magicparlabel-4250"><span class="foot_label">16</span></a>

    <div class="foot_inner"><a id="magicparlabel-4250"></a>

    <div class="plain_layout"><a id="magicparlabel-4250"></a><a id="magicparlabel-4259"><span class="flex_url">http://stackoverflow.com/questions/10569053/convert-datetime-to-string-php</span></a></div>

    <a id="magicparlabel-4259"></a></div>

    </div>

    <a id="magicparlabel-4259">.</a>
<a id="magicparlabel-4259"></a>
*   <a id="magicparlabel-4259">J’apprends que le test addUser() renvoie faux et, en vérifiant la base de données, je me rends compte qu’il n’y a effectivement aucune insertion. La base de données est créé et la requête aurait dû fonctionner. En fait, je dois essayer de trouver le moyen de voir le résultat de l’exception envoyée par la méthode PDO qui s’occupe de l’insertion. Il faut en fait configurer PDO pour qu’il envoie les exceptions</a>

    <div class="foot"><a id="magicparlabel-4259"><span class="foot_label">17</span></a>

    <div class="foot_inner"><a id="magicparlabel-4259"></a>

    <div class="plain_layout"><a id="magicparlabel-4259"></a><a id="magicparlabel-4268"><span class="flex_url">http://php.net/manual/fr/pdo.error-handling.php</span></a></div>

    <a id="magicparlabel-4268"></a></div>

    </div>

    <a id="magicparlabel-4268">. J’ai maintenant les messages d’erreur pour débuguer le code. J’apprends que j’ai le message SQLState[3D000] “invalid catalog name : 1046 No Database selected”. J’apprends qu’en faisait un copier-coller du code je n’ai pas replacé le nom de la base de données à laquelle je me connecte.</a>
<a id="magicparlabel-4268">*   Erreur de conception de la méthode getUser(): je ne peux pas utiliser l’ID de l’utilisateur pour le retrouver dans la grille CRUD. L’id est intrinsèque à la conception de la base de données et l’auto incrémentation ne me permet pas de gérer cela. Je dois en fait envisager une clé secondaire avec laquelle je peux faire une recherche selon la logique métier ( qui ne doit en fait pas interférer avec la logique informatique).*   La configuration du dossier comportant les fichiers .js et .css dans Google App Engine m’a pris beaucoup de temps. Je réfléchis à la manière dont je vais concevoir l’application. Je vais créer une formulaire qui permet de s’inscrire en tant que client à l’application.*   J’ai installé le SDK Facebook pour répondre au besoin de “like” de la page Facebook demandé par le gérant de Natural Corner. L’installation est très facile et je peux déjà utiliser les fonctionnalités du SDK en une vingtaine de minutes.*   En écrivant les setters et getters de la classe Utilisateur, je me suis rendu compte que je peux économiser et rendre plus pratique la méthode getDateInscription() en utilisant ->format('Y-m-d H:i:s').</a>
*   <a id="magicparlabel-4268">J’ai trouvé le moyen de sécuriser l’accès à la base de données. Il est évident que les mots de passe ne peuvent se trouver en dur dans le code, à plus forte raison si celui-ci apparaît sur Github en public. Il s’agit de remplir le fichier app.yaml comme indiqué ici</a>

    <div class="foot"><a id="magicparlabel-4268"><span class="foot_label">18</span></a>

    <div class="foot_inner"><a id="magicparlabel-4268"></a>

    <div class="plain_layout"><a id="magicparlabel-4268"></a><a id="magicparlabel-4281"><span class="flex_url">https://gae-php-tips.appspot.com/2013/10/22/getting-started-with-laravel-on-php-for-app-engine/</span></a></div>

    <a id="magicparlabel-4281"></a></div>

    </div>

    <a id="magicparlabel-4281">. Je crée des variables d’environnement pour le projet. Le fichier app.yaml ne sera plus “commited” et "pushed" sur Github dorénavant.</a>
<a id="magicparlabel-4281">*   LA SDK Facebook avec PHP demande une fonction de callback contenant l’adresse du site. Etant donné que je travaille en local, je vais déployer l’application sur Google App Engine et effectuer les tests directement dessus. Pour ne pas payer une instance de CloudSQL, je vais mettre en commentaire l’instanciation de la base de données. L’API Facebook ne voulait pas fonctionner tant que je n’avais pas ajouter un favicon…Le login avec Facebook fonctionne. L’api est encore buggué.*   La fonction updateUser me pose problème. Je dois utiliser l’email pour mettre à jour en tant que clé secondaire mais si j’utilise un email déjà connu je ne peux pas mettre à jour. La solution est de voir si l’adresse email précédente est différente de celle de l’objet Utilisateur qui va modifier l’utilisateur dans la base de données. Si ce sont les mêmes adresses, cela signifie que l’utilisateur ne modifie pas son adresse e-mail et donc je ne contrôle pas si cette adresse est déjà prise et je n’envoie pas l’exception EmailAlreadyTaken. Si ces adresses sont différentes, c’est que l’utilisateur veut modifier son adresse e-mail, alors je dois vérifier si cette nouvelle adresse est disponible.*   Petit problème de responsabilité de la méthode qui reçoit une exception. J’ai fait le choix d’initialiser les variables à l’aide des mutateurs dans le constructeur de la classe Utilisateur. Cependant, lorsqu’une exception est levée, ce constructeur se borne à l’attraper et à afficher le message d’erreur. Lors des tests, je n’arrive pas à retrouver ces messages dans la console et à débugguer correctement le code.*   J’ai passé trois heures à chercher pourquoi le retour d’une fonction ne voulait pas retourner un objet d’ instance Utilisateur. En fait, j’utilisais “echo $user” qui utilise la méthode __toString(). Je n’avais pas testé en TDD cette fonction et j’en ai payé le prix.*   La méthode employée pour réaliser ce UC va servir à l'ensemble des UC décrits pour la suite de ce travail. Cette méthode s'adapte très bien à une analyse de type "Processus unifié" et permet de livrer rapidement une produit testable et utilisable par le gérant du magasin.</a>

<a id="magicparlabel-4281"></a>

##### <a id="magicparlabel-4281"></a><a id="magicparlabel-4291"><span class="paragraph_label">Conclusion (provisoire)</span></a>

<a id="magicparlabel-4291"></a>

<div class="standard"><a id="magicparlabel-4291"></a><a id="magicparlabel-4292">Le résultat obtenu me semble très encourageant. En voulant connecter différents éléments disparates, j'ai créé un Framework PHP sur le Cloud parfaitement adapté comme backend à une application de type Angularjs ou Android. En effet, si je crée une API se basant sur l'architecture REST, il me sera possible de créer un lien avec n'importe quelle application cliente. La conception de l'application alliant l'analyse décrite par des diagrammes UML, le développement conduit par les tests, la flexibilité d'un PaaS et la réutilisabilité du patron de conception MVC est un argument de premier choix pour répondre au problème actuel du développement full-stack.</a></div>

<a id="magicparlabel-4292"></a>

### <a id="magicparlabel-4292"></a><a id="magicparlabel-4293"><span class="subsection_label">10.1.6</span> Première livraison du logiciel et feedback du client.</a>

<a id="magicparlabel-4293"></a>

<div class="standard"><a id="magicparlabel-4293"></a><a id="magicparlabel-4294">Le 25 janvier 2016 à 15h30, dans les locaux du magasin "Natural Corner", j'ai pu montrer et utiliser cette version bêta de l'application. Le design paru convainquant et j'ai reçu certaines recommandations. Le gérant désirait :</a></div>

<a id="magicparlabel-4294"></a>

<a id="magicparlabel-4294"></a>
<a id="magicparlabel-4295">*   Voir figurer l'adresse de l'enseigne sur la page d'accueil,*   voir figurer l'horaire,*   voir figurer un lien vers le site page Facebook avec les recettes bio,*   incorporer un lien vers l’app pour commander les ingrédients en promo.*   message en dessous du Natural Corner “bio, cosmetique, etc…”*   produits en promo</a>

<a id="magicparlabel-4295"></a>

<div class="standard"><a id="magicparlabel-4295"></a><a id="magicparlabel-4301">Ce point de vue a été consigné et sera pris en compte pour les incrémentations suivantes.</a></div>

<a id="magicparlabel-4301"></a>

## <a id="magicparlabel-4301"></a><a id="magicparlabel-4302"><span class="section_label">10.2</span> UC "Recherche des produits"</a>

<a id="magicparlabel-4302"></a>

### <a id="magicparlabel-4302"></a><a id="magicparlabel-4303"><span class="subsection_label">10.2.1</span> Diagramme des classes participantes (DCP)</a>

<a id="magicparlabel-4303"></a>

#### <a id="magicparlabel-4303"></a><a id="magicparlabel-4304"><span class="subsubsection_label">Réflexions sur le UC "Recherche des produits"</span></a>

<a id="magicparlabel-4304"></a>

<div class="standard"><a id="magicparlabel-4304"></a><a id="magicparlabel-4305">Une recherche d'un produit doit fournir rapidement les produits désirés. Les résultats doivent pouvoir être classés comme indiqués dans la spécification du projet. Pour correspondre aux attentes du client, les méthodes de présentation des résultats de la recherche ont été mis en place (classerParDenomination(), classerParPrixUnitaire(), classerCategorie(), pageSuivante(), pagePrecedente()). Les produits peuvent être mis dans le panier (mettreDansPanier()) et on peut accéder à une page de détails du produit. Deux contrôleurs entrent en jeu. Le contrôleur "CtrlRecherche" va gérer la recherche, et le contrôleur "CtrlArticle" va s'occuper de l'opération de sélection de l'article dans le panier. Pour clarifier la situation, on peut s'aider d'un diagramme de communication pour expliciter le cas simple d'une recherche rapide par mot-clé.</a></div>

<a id="magicparlabel-4305"></a>

<div class="float float-figure"><a id="magicparlabel-4305"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4305"></a><a id="magicparlabel-4310">![image: 40_Volumes_USB_TFE_com_Recherche_rapide.png](./naturalcorner_files/40_Volumes_USB_TFE_com_Recherche_rapide.png)</a></div>

<a id="magicparlabel-4310"></a>

<div class="plain_layout"><a id="magicparlabel-4310"></a><a id="magicparlabel-4311"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.2.1:Diagramme de communication "Recherche rapide"</span></a></div>

<a id="magicparlabel-4311"></a></div>

<a id="magicparlabel-4311"></a>

<div class="standard"><a id="magicparlabel-4311"></a><a id="magicparlabel-4317">La vue demande la recherche de tous les articles correspondant au mot-clé. Le contrôleur interroge la base de données, qui lui renvoie une collection d'articles correspondant au mot-clé. Ensuite, le contrôleur peut envoyer la collection à la vue ResultatRecherche qu'il crée.</a></div>

<a id="magicparlabel-4317"></a>

<div class="standard"><a id="magicparlabel-4317"></a><a id="magicparlabel-4318">Si l'utilisateur demande les détails de l'article, il actionnera un autre processus, impliquant cette fois le contrôleur CtrlArticle. Une fois les détails sur l'article reçu, la vue FicheDetaillee est créée pour montrer à l'utilisateur les détails de l'articles.</a></div>

<a id="magicparlabel-4318"></a>

<div class="float float-figure"><a id="magicparlabel-4318"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4318"></a><a id="magicparlabel-4323">![image: 41_Volumes_USB_TFE_com_Recherche_rapide_resultats.png](./naturalcorner_files/41_Volumes_USB_TFE_com_Recherche_rapide_resultats.png)</a></div>

<a id="magicparlabel-4323"></a>

<div class="plain_layout"><a id="magicparlabel-4323"></a><a id="magicparlabel-4324"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.2.2:Diagramme de communication "Recherche Rapide"</span></a></div>

<a id="magicparlabel-4324"></a></div>

<a id="magicparlabel-4324"></a>

#### <a id="magicparlabel-4324"></a><a id="magicparlabel-4330"><span class="subsubsection_label">Diagramme des classes participantes</span></a>

<a id="magicparlabel-4330"></a>

<div class="standard"><a id="magicparlabel-4330"></a><a id="magicparlabel-4331">Un premier diagramme rend compte de la recherche, qu'elle soit simple ou détaillée. Ce DCP prend en compte les deux diagrammes précédents. Nous nous approchons de la logique du logiciel petit à petit en prennent en compte différents points de vue.</a></div>

<a id="magicparlabel-4331"></a>

<div class="float float-figure"><a id="magicparlabel-4331"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4331"></a><a id="magicparlabel-4336">![image: 42_Volumes_USB_TFE_Chercher_des_articles__DCP_.png](./naturalcorner_files/42_Volumes_USB_TFE_Chercher_des_articles__DCP_.png)</a></div>

<a id="magicparlabel-4336"></a>

<div class="plain_layout"><a id="magicparlabel-4336"></a><a id="magicparlabel-4337"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.2.3:Diagramme des classes participantes "Recherche des produits"</span></a></div>

<a id="magicparlabel-4337"></a></div>

<a id="magicparlabel-4337"></a>

### <a id="magicparlabel-4337"></a><a id="magicparlabel-4343"><span class="subsection_label">10.2.2</span> Diagramme de navigation</a>

<a id="magicparlabel-4343"></a>

<div class="standard"><a id="magicparlabel-4343"></a><a id="magicparlabel-4344">On peut simplement représenter la navigation de ce UC. Le schéma est suffisamment explicite pour se passer de commentaire. A noter l'historique de la recherche lorsqu'une recherche a échoué et que l'utilisateur veut faire une autre recherche.</a></div>

<a id="magicparlabel-4344"></a>

<div class="float float-figure"><a id="magicparlabel-4344"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4344"></a><a id="magicparlabel-4349">![image: 43_Volumes_USB_TFE_nav_recherche.png](./naturalcorner_files/43_Volumes_USB_TFE_nav_recherche.png)</a></div>

<a id="magicparlabel-4349"></a>

<div class="plain_layout"><a id="magicparlabel-4349"></a><a id="magicparlabel-4350"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.2.4:Diagramme de navigation "Recherche"</span></a></div>

<a id="magicparlabel-4350"></a></div>

<a id="magicparlabel-4350"></a>

### <a id="magicparlabel-4350"></a><a id="magicparlabel-4356"><span class="subsection_label">10.2.3</span> Conception objet préliminaire</a>

<a id="magicparlabel-4356"></a>

#### <a id="magicparlabel-4356"></a><a id="magicparlabel-4357"><span class="subsubsection_label">Diagrammes d'interactions pour le UC "Recherche des produits"</span></a>

<a id="magicparlabel-4357"></a>

<div class="standard"><a id="magicparlabel-4357"></a><a id="magicparlabel-4358">Les diagrammes d'interaction vont permettre de compléter la vision de l'UC afin d'être exhaustif et de pouvoir passer à l'écriture complet du diagramme de classe. Le dialogue RechercheRapide aura la responsabilité de contrôler la syntaxe du mot-clé. Le gestionnaire de base de données, la classe Database, s'occupe d'aller chercher les articles désirés, étant donné qu'elle est "Information Expert" dans ce cas</a>

<div class="foot"><a id="magicparlabel-4358"><span class="foot_label">19</span></a>

<div class="foot_inner"><a id="magicparlabel-4358"></a>

<div class="plain_layout"><a id="magicparlabel-4358"></a><a id="magicparlabel-4362">Applying UML and Patterns, An introduction to object-oriented analysis and design and unified process, 2001, seconde edition, p. 221</a></div>

<a id="magicparlabel-4362"></a></div>

</div>

<a id="magicparlabel-4362">.</a></div>

<a id="magicparlabel-4362"></a>

<div class="float float-figure"><a id="magicparlabel-4362"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4362"></a><a id="magicparlabel-4367">![image: 44_Volumes_USB_TFE_sd_Chercher_des__articles.png](./naturalcorner_files/44_Volumes_USB_TFE_sd_Chercher_des__articles.png)</a></div>

<a id="magicparlabel-4367"></a>

<div class="plain_layout"><a id="magicparlabel-4367"></a><a id="magicparlabel-4368"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.2.5:Diagramme de séquence "Recherche rapide article"</span></a></div>

<a id="magicparlabel-4368"></a></div>

<a id="magicparlabel-4368"></a>

<div class="standard"><a id="magicparlabel-4368"></a><a id="magicparlabel-4373">Les nouvelles méthodes liées à la vue vont permettre à l'utilisateur de changer de page lorsque la recherche est trop grande.</a></div>

<a id="magicparlabel-4373"></a>

<div class="float float-figure"><a id="magicparlabel-4373"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4373"></a><a id="magicparlabel-4378">![image: 45_Volumes_USB_TFE_sd_Chercher_des__articles___d__taill__e_.png](./naturalcorner_files/45_Volumes_USB_TFE_sd_Chercher_des__articles___d__taill__e_.png) <span class="float-caption-Standard float-caption float-caption-standard">Figure 10.2.6:Diagramme de séquence "Recherche détaillée par prix"</span></a></div>

<a id="magicparlabel-4378"></a></div>

<a id="magicparlabel-4378"></a>

<div class="float float-figure"><a id="magicparlabel-4378"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4378"></a><a id="magicparlabel-4386">![image: 46_Volumes_USB_TFE_sd_Recherche_avance__e__infos_.png](./naturalcorner_files/46_Volumes_USB_TFE_sd_Recherche_avance__e__infos_.png)</a></div>

<a id="magicparlabel-4386"></a>

<div class="plain_layout"><a id="magicparlabel-4386"></a><a id="magicparlabel-4387"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.2.7:Diagramme de séquence "Recherche avancée"(infos)</span></a></div>

<a id="magicparlabel-4387"></a></div>

<a id="magicparlabel-4387"></a>

<div class="standard"><a id="magicparlabel-4387"></a><a id="magicparlabel-4392">En fait, une recherche rapide est une recherche avancée sur la dénomination. Une recherche avancée est la même sauf qu'il y a plusieurs possibilités de recherche et que la navigation diffère. Nous nous bornerons à étudier la recherche par prix, les autres recherches étant similaires du point de vue de l'interaction des classes.</a></div>

<a id="magicparlabel-4392"></a>

<div class="float float-figure"><a id="magicparlabel-4392"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4392"></a><a id="magicparlabel-4397">![image: 47_Volumes_USB_TFE_sd_Chercher_des__articles__erreurs_.png](./naturalcorner_files/47_Volumes_USB_TFE_sd_Chercher_des__articles__erreurs_.png)</a></div>

<a id="magicparlabel-4397"></a>

<div class="plain_layout"><a id="magicparlabel-4397"></a><a id="magicparlabel-4398"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.2.8:Diagramme de séquence "Recherche article"(erreurs)</span></a></div>

<a id="magicparlabel-4398"></a></div>

<a id="magicparlabel-4398"></a>

<div class="standard"><a id="magicparlabel-4398"></a><a id="magicparlabel-4403">Ce dernier diagramme s'arrête sur les erreurs qui peuvent advenir pendant la recherche. Il aurait été possible de les faire figurer sur les autres diagrammes mais cela aurait été trop peu lisible.</a></div>

<a id="magicparlabel-4403"></a>

#### <a id="magicparlabel-4403"></a><a id="magicparlabel-4404"><span class="subsubsection_label">Amélioration du gestionnaire de la base de données</span></a>

<a id="magicparlabel-4404"></a>

<div class="standard"><a id="magicparlabel-4404"></a><a id="magicparlabel-4405">On peut maintenant enrichir la classe Database avec les méthodes découvertes pendant la réfléxion sur l'UC "Recherche article".</a></div>

<a id="magicparlabel-4405"></a>

<div class="float float-figure"><a id="magicparlabel-4405"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4405"></a><a id="magicparlabel-4410">![image: 48_Volumes_USB_TFE_Database2.png](./naturalcorner_files/48_Volumes_USB_TFE_Database2.png)</a></div>

<a id="magicparlabel-4410"></a>

<div class="plain_layout"><a id="magicparlabel-4410"></a><a id="magicparlabel-4411"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.2.9:Gestionnaire de la base de données amélioré</span></a></div>

<a id="magicparlabel-4411"></a></div>

<a id="magicparlabel-4411"></a>

#### <a id="magicparlabel-4411"></a><a id="magicparlabel-4417"><span class="subsubsection_label">Diagramme de classes</span></a>

<a id="magicparlabel-4417"></a>

<div class="standard"><a id="magicparlabel-4417"></a><a id="magicparlabel-4418">Ce schéma est la vision orientée objet statique de l'UC "Recherche article". Il reprend l'ensemble des méthodes trouvées et permet de passer à l'écriture du code.</a></div>

<a id="magicparlabel-4418"></a>

<div class="float float-figure"><a id="magicparlabel-4418"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4418"></a><a id="magicparlabel-4423">![image: 49_Volumes_USB_TFE_Chercher_des_articles.png](./naturalcorner_files/49_Volumes_USB_TFE_Chercher_des_articles.png)</a></div>

<a id="magicparlabel-4423"></a>

<div class="plain_layout"><a id="magicparlabel-4423"></a><a id="magicparlabel-4424"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.2.10:Diagramme de classes "Recherche article"</span></a></div>

<a id="magicparlabel-4424"></a></div>

<a id="magicparlabel-4424"></a>

### <a id="magicparlabel-4424"></a><a id="magicparlabel-4430"><span class="subsection_label">10.2.4</span> Implémentation</a>

<a id="magicparlabel-4430"></a>

#### <a id="magicparlabel-4430"></a><a id="magicparlabel-4431"><span class="subsubsection_label">Tests unitaires</span></a>

<a id="magicparlabel-4431"></a>

<div class="standard"><a id="magicparlabel-4431"></a><a id="magicparlabel-4432">Les tests sont semblables dans la démarche à ceux mis en place pour les UC précédents. Exemple de tests de la classe du modèle Article:</a></div>

<a id="magicparlabel-4432"></a>

<div class="float float-figure"><a id="magicparlabel-4432"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4432"></a><a id="magicparlabel-4437">![image: 50_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_21_22_40.png](./naturalcorner_files/50_Volumes_USB_TFE_Screen_Shot_2016-05-08_at_21_22_40.png)</a></div>

<a id="magicparlabel-4437"></a>

<div class="plain_layout"><a id="magicparlabel-4437"></a><a id="magicparlabel-4438"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.2.11:Test unitaire de la méthode getDenomination() et setDenomination()</span></a></div>

<a id="magicparlabel-4438"></a></div>

<a id="magicparlabel-4438"></a>

#### <a id="magicparlabel-4438"></a><a id="magicparlabel-4443"><span class="subsubsection_label">Code</span></a>

<a id="magicparlabel-4443"></a>

##### <a id="magicparlabel-4443"></a><a id="magicparlabel-4444"><span class="paragraph_label">Contrôleur CtrlRecherche</span></a>

<a id="magicparlabel-4444"></a>

<div class="standard"><a id="magicparlabel-4444"></a><a id="magicparlabel-4445">Voici le choix d'implémentation du contrôleur CtrlRecherche. Il correspond à une vision en PHP des diagrammes d'interactions présentés.</a></div>

<a id="magicparlabel-4445"></a>

<div class="float float-figure"><a id="magicparlabel-4445"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4445"></a><a id="magicparlabel-4450">![image: 51_Volumes_USB_TFE_Screen_Shot_2016-05-10_at_12_32_51.png](./naturalcorner_files/51_Volumes_USB_TFE_Screen_Shot_2016-05-10_at_12_32_51.png)</a></div>

<a id="magicparlabel-4450"></a>

<div class="plain_layout"><a id="magicparlabel-4450"></a><a id="magicparlabel-4451"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.2.12:Implémentation de la classe contrôleur CtrlRecherche</span></a></div>

<a id="magicparlabel-4451"></a></div>

<a id="magicparlabel-4451"></a>

<div class="standard"><a id="magicparlabel-4451"></a><a id="magicparlabel-4457">Veuillez noter l'utilisation de la méthode setMessageView pour réaliser la vue MessageError et Message. Rien n'oblige le programmeur à suivre de manière littérale l'exigence de l'analyste pour autant que sa solution suit la vision du logiciel proposée.</a></div>

<a id="magicparlabel-4457"></a>

### <a id="magicparlabel-4457"></a><a id="magicparlabel-4458"><span class="subsection_label">10.2.5</span> Difficultés rencontrées, réflexions et conclusions provisoires</a>

<a id="magicparlabel-4458"></a>

<a id="magicparlabel-4458"></a>
<a id="magicparlabel-4459"></a>
*   <a id="magicparlabel-4459">Il existe des règles communément acceptées par la communauté des développeurs pour implémenter un diagramme de classe UML dans un langage orienté objet. La relation de composition entre la classe Article et la classe Rayon se traduit par l'intégration au sein du code de la classe Article d'une classe nichée Rayon</a>

    <div class="foot"><a id="magicparlabel-4459"><span class="foot_label">20</span></a>

    <div class="foot_inner"><a id="magicparlabel-4459"></a>

    <div class="plain_layout"><a id="magicparlabel-4459"></a><a id="magicparlabel-4463">Charroux B., Osmani A., Thierry-Mieg Y. , UML2 Pratique de la modélisation, Pearson Synthex 3ème édition, 2010, p. 266</a></div>

    <a id="magicparlabel-4463"></a></div>

    </div>

    <a id="magicparlabel-4463">. Le langage PHP n'offre pas une telle possibilité d'implémentation mais rien n'empêche d'implémenter à la manière d'une relation d'agrégation ou de relation avec une navigabilité à sens unique ces deux classes. C'est ce dernier choix qui a été réalisé. A la ligne 31, on voit un attribut privé $_rayon. Le constructeur à la ligne 46 reçoit en dernier paramètre une instance de la classe Rayon. Il s'agit d'une manière d'implémenter la relation avec navigabilité unique entre deux classes.</a>
<a id="magicparlabel-4463"></a>

<a id="magicparlabel-4463"></a>

<div class="float float-figure"><a id="magicparlabel-4463"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4463"></a><a id="magicparlabel-4468">![image: 52_Volumes_USB_TFE_Screen_Shot_2016-05-10_at_12_27_14.png](./naturalcorner_files/52_Volumes_USB_TFE_Screen_Shot_2016-05-10_at_12_27_14.png)</a></div>

<a id="magicparlabel-4468"></a>

<div class="plain_layout"><a id="magicparlabel-4468"></a><a id="magicparlabel-4469"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.2.13:Classe Article</span></a></div>

<a id="magicparlabel-4469"></a></div>

<a id="magicparlabel-4469"></a>

<a id="magicparlabel-4469"></a>
<a id="magicparlabel-4474">*   Le template trouver.inc.php de la vue RechercheRapideView.inc.php fut sans doute le plus compliqué à réaliser. Cela tenait à la subtilité de l'insertion du langage PHP dans le langage HTML de la vue. Il fallait faire en sorte que les articles présentés soient sélectionnables pour remplir le panier (Voir UC Gérer Panier). La notation dans la balise input name="articles['.$article->getDenomination().']" signifie qu'une collection nommé "article" sera envoyée par une requête POST du protocole HTML au serveur. La dénomination de l'article servira d'identifiant pour le code côté serveur du panier.</a>

<a id="magicparlabel-4474"></a>

<div class="float float-figure"><a id="magicparlabel-4474"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4474"></a><a id="magicparlabel-4479">![image: 53_Volumes_USB_TFE_Screen_Shot_2016-05-10_at_12_52_55.png](./naturalcorner_files/53_Volumes_USB_TFE_Screen_Shot_2016-05-10_at_12_52_55.png)</a></div>

<a id="magicparlabel-4479"></a>

<div class="plain_layout"><a id="magicparlabel-4479"></a><a id="magicparlabel-4480"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.2.14:Template trouver.inc.php</span></a></div>

<a id="magicparlabel-4480"></a></div>

<a id="magicparlabel-4480"></a>

<div class="standard"><a id="magicparlabel-4480"></a><a id="magicparlabel-4486">A la ligne 40, une boucle se charge d'itérer de 1 à 100 pour proposer de sélectionner jusqu'à 100 articles identiques.</a></div>

<a id="magicparlabel-4486"></a>

<a id="magicparlabel-4486"></a>
<a id="magicparlabel-4487"></a>
*   <a id="magicparlabel-4487">Il est accepté dans le domaine de l'informatique de gestion que l'utilisation des types double ou float (en général tout calcul utilisant des virgules flottantes) doit être évitée pour des raisons de précisions et d'accumulation d'erreurs d'arrondis</a>

    <div class="foot"><a id="magicparlabel-4487"><span class="foot_label">21</span></a>

    <div class="foot_inner"><a id="magicparlabel-4487"></a>

    <div class="plain_layout"><a id="magicparlabel-4487"></a><a id="magicparlabel-4491"><span class="flex_url">https://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency</span></a></div>

    <a id="magicparlabel-4491"></a></div>

    </div>

    <a id="magicparlabel-4491">. Java et C# utilisent respectivement la classe BigDecimal et le type decimal pour palier à ce problème. Après avoir vérifié sur le web les solutions proposées, j'ai décidé d'utiliser le type int et de travailler avec des centimes. Ensuite, lors de la présentation des données, la fonction number_format avec une précision de 2 est utilisée pour manier les valeurs monétaires (ligne 35). Le nombre est divisé par 100 avant d'être traité. La division est entière et la fonction se charge de présenter l'information comme s'il s'agissait d'un nombre à virgule. L'intégrité des données est ainsi garantie.</a>
<a id="magicparlabel-4491"></a>

<a id="magicparlabel-4491"></a>

## <a id="magicparlabel-4491"></a><a id="magicparlabel-4496"><span class="section_label">10.3</span> UC "Gérer son panier"</a>

<a id="magicparlabel-4496"></a>

### <a id="magicparlabel-4496"></a><a id="magicparlabel-4497"><span class="subsection_label">10.3.1</span> Diagramme des classes participantes (DCP)</a>

<a id="magicparlabel-4497"></a>

#### <a id="magicparlabel-4497"></a><a id="magicparlabel-4498"><span class="subsubsection_label">Réflexions sur le UC</span></a>

<a id="magicparlabel-4498"></a>

<div class="standard"><a id="magicparlabel-4498"></a><a id="magicparlabel-4499">Il s'agit de permettre à l'utilisateur de sélectionner les articles et de les introduire dans son panier comme le ferait un client d'un supermarché. Comme mentionné dans la spécification détaillées des exigences, il faut aussi pouvoir ajouter d'autres articles et pouvoir en retirer avant de passer commande. Nous allons utiliser les entités Panier et LignePanier. Une instance d'une lignePanier contient une certaine quantité d'articles identiques. Nous allons donc créer une contrôleur nommé CtrlPanier qui contiendra les méthodes permettant d'ajouter, supprimer, modifier une ligne. On peut aussi vider le panier instantanément et le recalculer après une modification éventuelle. De plus, il sera possible d'imprimer un devis à l'écran. Le dialogue correspond au contrôleur. La classe GestionPanier contient un attribut "quantité" qui aura une valeur correspondante à la taille de la liste contenant les lignes du panier.</a></div>

<a id="magicparlabel-4499"></a>

#### <a id="magicparlabel-4499"></a><a id="magicparlabel-4500"><span class="subsubsection_label">Diagramme des classes participantes</span></a>

<a id="magicparlabel-4500"></a>

<div class="float float-figure"><a id="magicparlabel-4500"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4500"></a><a id="magicparlabel-4505">![image: 54_Volumes_USB_TFE_Ge__rer_son_panier__DCP_.png](./naturalcorner_files/54_Volumes_USB_TFE_Ge__rer_son_panier__DCP_.png)</a></div>

<a id="magicparlabel-4505"></a>

<div class="plain_layout"><a id="magicparlabel-4505"></a><a id="magicparlabel-4506"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.3.1:Diagramme des classes participantes "Gérer son panier"</span></a></div>

<a id="magicparlabel-4506"></a></div>

<a id="magicparlabel-4506"></a>

### <a id="magicparlabel-4506"></a><a id="magicparlabel-4512"><span class="subsection_label">10.3.2</span> Diagramme de navigation</a>

<a id="magicparlabel-4512"></a>

<div class="float float-figure"><a id="magicparlabel-4512"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4512"></a><a id="magicparlabel-4517">![image: 55_Volumes_USB_TFE_navGererPanier.png](./naturalcorner_files/55_Volumes_USB_TFE_navGererPanier.png)</a></div>

<a id="magicparlabel-4517"></a>

<div class="plain_layout"><a id="magicparlabel-4517"></a><a id="magicparlabel-4518"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.3.2:Diagramme de navigation "Gérer son panier"</span></a></div>

<a id="magicparlabel-4518"></a></div>

<a id="magicparlabel-4518"></a>

### <a id="magicparlabel-4518"></a><a id="magicparlabel-4524"><span class="subsection_label">10.3.3</span> Conception objet préliminaire</a>

<a id="magicparlabel-4524"></a>

#### <a id="magicparlabel-4524"></a><a id="magicparlabel-4525"><span class="subsubsection_label">Diagrammes d'interactions</span></a>

<a id="magicparlabel-4525"></a>

<div class="float float-figure"><a id="magicparlabel-4525"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4525"></a><a id="magicparlabel-4530">![image: 56_Volumes_USB_TFE_sd_Ge__rer_son_panier.png](./naturalcorner_files/56_Volumes_USB_TFE_sd_Ge__rer_son_panier.png)</a></div>

<a id="magicparlabel-4530"></a>

<div class="plain_layout"><a id="magicparlabel-4530"></a><a id="magicparlabel-4531"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.3.3:Diagramme de séquence "Gérer son panier"</span></a></div>

<a id="magicparlabel-4531"></a></div>

<a id="magicparlabel-4531"></a>

<div class="float float-figure"><a id="magicparlabel-4531"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4531"></a><a id="magicparlabel-4541">![image: 57_Volumes_USB_TFE_sd_Vider_son_panier.png](./naturalcorner_files/57_Volumes_USB_TFE_sd_Vider_son_panier.png)</a></div>

<a id="magicparlabel-4541"></a>

<div class="plain_layout"><a id="magicparlabel-4541"></a><a id="magicparlabel-4542"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.3.4:Diagramme de séquence "Vider son panier"</span></a></div>

<a id="magicparlabel-4542"></a></div>

<a id="magicparlabel-4542"></a>

### <a id="magicparlabel-4542"></a><a id="magicparlabel-4548"><span class="subsection_label">10.3.4</span> Conception objet détaillée</a>

<a id="magicparlabel-4548"></a>

#### <a id="magicparlabel-4548"></a><a id="magicparlabel-4549"><span class="subsubsection_label">Diagramme de classes</span></a>

<a id="magicparlabel-4549"></a>

<div class="float float-figure"><a id="magicparlabel-4549"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4549"></a><a id="magicparlabel-4554">![image: 58_Volumes_USB_TFE_Ge__rer_son_panier.png](./naturalcorner_files/58_Volumes_USB_TFE_Ge__rer_son_panier.png)</a></div>

<a id="magicparlabel-4554"></a>

<div class="plain_layout"><a id="magicparlabel-4554"></a><a id="magicparlabel-4555"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.3.5:Diagramme de classe "Gérer son panier"</span></a></div>

<a id="magicparlabel-4555"></a></div>

<a id="magicparlabel-4555"></a>

### <a id="magicparlabel-4555"></a><a id="magicparlabel-4561"><span class="subsection_label">10.3.5</span> Tests unitaires</a>

<a id="magicparlabel-4561"></a>

<div class="float float-figure"><a id="magicparlabel-4561"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4561"></a><a id="magicparlabel-4566">![image: 59_Volumes_USB_TFE_Screen_Shot_2016-05-14_at_21_05_37.png](./naturalcorner_files/59_Volumes_USB_TFE_Screen_Shot_2016-05-14_at_21_05_37.png)</a></div>

<a id="magicparlabel-4566"></a>

<div class="plain_layout"><a id="magicparlabel-4566"></a><a id="magicparlabel-4567"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.3.6:Tests unitaires des méthodes AjouterLigne() et RetirerLigne()</span></a></div>

<a id="magicparlabel-4567"></a></div>

<a id="magicparlabel-4567"></a>

<div class="standard"><a id="magicparlabel-4567"></a><a id="magicparlabel-4573">Ces tests unitaires correspondent à la classe entité Panier.</a></div>

<a id="magicparlabel-4573"></a>

### <a id="magicparlabel-4573"></a><a id="magicparlabel-4574"><span class="subsection_label">10.3.6</span> Code</a>

<a id="magicparlabel-4574"></a>

##### <a id="magicparlabel-4574"></a><a id="magicparlabel-4575"><span class="paragraph_label">Entité</span></a>

<a id="magicparlabel-4575"></a>

<div class="standard"><a id="magicparlabel-4575"></a><a id="magicparlabel-4576">La classe Panier ne présente pas de difficultés particulières. Elle s'implémente naturellement en comportant un attribut de classe nommé $_lignes qui est une collection d'objets lignePanier.</a></div>

<a id="magicparlabel-4576"></a>

<div class="float float-figure"><a id="magicparlabel-4576"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4576"></a><a id="magicparlabel-4581">![image: 60_Volumes_USB_TFE_Screen_Shot_2016-05-14_at_21_11_27.png](./naturalcorner_files/60_Volumes_USB_TFE_Screen_Shot_2016-05-14_at_21_11_27.png)</a></div>

<a id="magicparlabel-4581"></a>

<div class="plain_layout"><a id="magicparlabel-4581"></a><a id="magicparlabel-4582"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.3.7:Méthode ajouterLigne de la classe LignePanier</span></a></div>

<a id="magicparlabel-4582"></a></div>

<a id="magicparlabel-4582"></a>

##### <a id="magicparlabel-4582"></a><a id="magicparlabel-4587"><span class="paragraph_label">Contrôleur</span></a>

<a id="magicparlabel-4587"></a>

<div class="standard"><a id="magicparlabel-4587"></a><a id="magicparlabel-4588">La méthode ajouterLigne() de la classe CtrlPanier :</a></div>

<a id="magicparlabel-4588"></a>

<div class="float float-figure"><a id="magicparlabel-4588"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4588"></a><a id="magicparlabel-4593">![image: 61_Volumes_USB_TFE_Screen_Shot_2016-05-15_at_18_12_48.png](./naturalcorner_files/61_Volumes_USB_TFE_Screen_Shot_2016-05-15_at_18_12_48.png)</a></div>

<a id="magicparlabel-4593"></a>

<div class="plain_layout"><a id="magicparlabel-4593"></a><a id="magicparlabel-4594"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.3.8:Méthode ajouterLigne() de la classe CtrlPanier</span></a></div>

<a id="magicparlabel-4594"></a></div>

<a id="magicparlabel-4594"></a>

<div class="standard"><a id="magicparlabel-4594"></a><a id="magicparlabel-4600">Cette méthode du contrôleur va ajouter une ligne au panier directement à partir de la variable superglobale $_POST représentant les articles.</a></div>

<a id="magicparlabel-4600"></a>

### <a id="magicparlabel-4600"></a><a id="magicparlabel-4601"><span class="subsection_label">10.3.7</span> Difficultés rencontrées, réflexions et conclusions provisoires</a>

<a id="magicparlabel-4601"></a>

<a id="magicparlabel-4601"></a>
<a id="magicparlabel-4602">*   Le panier doit être enregistré à chaque fois dans la base de données au lieu de la variable $_POST. Pour procéder de la sorte, j'ai décidé de créer deux méthodes setPanierCourant() prenant en paramètres un panier et un identifiant de session et getPanierCourant() récupérant le panier.*   Un choix d'implémentation a dû être opéré au niveau de l'utilisation du langage javascript pour réaliser le panier. Il aurait été beaucoup plus agréable pour l'utilisateur de posséder une panier se mettant à jour sans devoir rafraichir la page. Cependant, l'idée générale de l'application étant de créer un backend pour une application Android ou AngularJS, il n'a pas été jugé utile d'aller aussi loin pour l'application. On peut à tout moment demander quelle est la valeur d'un panier enregistré dans le back-end à l'aide de la méthode getJsonData(): Cette méthode récursive va récupérer chaque champs des attributs de l'objet et retrouver la valeur qui lui est associée, tout cela dynamiquement de manière à effectuer une sérialisation sous format JSON de l'objet. Une fois sous cette forme, l'objet, tout en conservant son état, peut être envoyé à une application cliente. La méthode "get_object_var()" cherche les propriétés de l'objet donnée, en l'occurence l'instanciation de la classe possédant la méthode elle-même. La boucle à la ligne 126 va, pour chaque valeur des propriétés, recommencer selon la méthode récursive la récupération des propriétés de chaque propriétés si ces propriétés sont un objet et sont contenu effectivement dans la classe.</a>

<a id="magicparlabel-4602"></a>

## <a id="magicparlabel-4602"></a><a id="magicparlabel-4613"><span class="section_label">10.4</span> UC "Commander"</a>

<a id="magicparlabel-4613"></a>

### <a id="magicparlabel-4613"></a><a id="magicparlabel-4614"><span class="subsection_label">10.4.1</span> Diagramme des classes participantes (DCP)</a>

<a id="magicparlabel-4614"></a>

#### <a id="magicparlabel-4614"></a><a id="magicparlabel-4615"><span class="subsubsection_label">Réflexions sur le UC</span></a>

<a id="magicparlabel-4615"></a>

<div class="standard"><a id="magicparlabel-4615"></a><a id="magicparlabel-4616">L'utilisateur peut à tout moment effectuer une commande après avoir rempli son panier. Il aura un récapitulatif et ensuite pourra valider sa commande. Il n'aura plus qu'à aller rechercher ce panier chez Natural Corner.</a></div>

<a id="magicparlabel-4616"></a>

#### <a id="magicparlabel-4616"></a><a id="magicparlabel-4617"><span class="subsubsection_label">Diagramme des classes participantes</span></a>

<a id="magicparlabel-4617"></a>

<div class="float float-figure"><a id="magicparlabel-4617"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4617"></a><a id="magicparlabel-4622">![image: 63_Volumes_USB_TFE_Commander__DCP_.png](./naturalcorner_files/63_Volumes_USB_TFE_Commander__DCP_.png)</a></div>

<a id="magicparlabel-4622"></a>

<div class="plain_layout"><a id="magicparlabel-4622"></a><a id="magicparlabel-4623"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.4.1:Diagramme de classes participante "Commander"</span></a></div>

<a id="magicparlabel-4623"></a></div>

<a id="magicparlabel-4623"></a>

### <a id="magicparlabel-4623"></a><a id="magicparlabel-4628"><span class="subsection_label">10.4.2</span> Diagramme de navigation</a>

<a id="magicparlabel-4628"></a>

<div class="float float-figure"><a id="magicparlabel-4628"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4628"></a><a id="magicparlabel-4633">![image: 64_Volumes_USB_TFE_navCommande.png](./naturalcorner_files/64_Volumes_USB_TFE_navCommande.png)</a></div>

<a id="magicparlabel-4633"></a>

<div class="plain_layout"><a id="magicparlabel-4633"></a><a id="magicparlabel-4634"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.4.2:Diagramme de navigation</span></a></div>

<a id="magicparlabel-4634"></a></div>

<a id="magicparlabel-4634"></a>

### <a id="magicparlabel-4634"></a><a id="magicparlabel-4639"><span class="subsection_label">10.4.3</span> Conception objet préliminaire</a>

<a id="magicparlabel-4639"></a>

#### <a id="magicparlabel-4639"></a><a id="magicparlabel-4640"><span class="subsubsection_label">Diagramme d'états</span></a>

<a id="magicparlabel-4640"></a>

<div class="float float-figure"><a id="magicparlabel-4640"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4640"></a><a id="magicparlabel-4645">![image: 65_Volumes_USB_TFE_commandeEtats.png](./naturalcorner_files/65_Volumes_USB_TFE_commandeEtats.png)</a></div>

<a id="magicparlabel-4645"></a>

<div class="plain_layout"><a id="magicparlabel-4645"></a><a id="magicparlabel-4646"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.4.3:Diagramme d'état de l'UC "Commander"</span></a></div>

<a id="magicparlabel-4646"></a></div>

<a id="magicparlabel-4646"></a>

### <a id="magicparlabel-4646"></a><a id="magicparlabel-4652"><span class="subsection_label">10.4.4</span> Conception objet détaillée</a>

<a id="magicparlabel-4652"></a>

<div class="float float-figure"><a id="magicparlabel-4652"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4652"></a><a id="magicparlabel-4657">![image: 66_Volumes_USB_TFE_Commander_diag_classes.png](./naturalcorner_files/66_Volumes_USB_TFE_Commander_diag_classes.png)</a></div>

<a id="magicparlabel-4657"></a>

<div class="plain_layout"><a id="magicparlabel-4657"></a><a id="magicparlabel-4658"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.4.4:Diagramme de classes</span></a></div>

<a id="magicparlabel-4658"></a></div>

<a id="magicparlabel-4658"></a>

## <a id="magicparlabel-4658"></a><a id="magicparlabel-4664"><span class="section_label">10.5</span> UC "Maintenir catalogue"</a>

<a id="magicparlabel-4664"></a>

### <a id="magicparlabel-4664"></a><a id="magicparlabel-4665"><span class="subsection_label">10.5.1</span> Diagramme des classes participantes (DCP)</a>

<a id="magicparlabel-4665"></a>

#### <a id="magicparlabel-4665"></a><a id="magicparlabel-4666"><span class="subsubsection_label">Réflexions sur le UC</span></a>

<a id="magicparlabel-4666"></a>

<div class="standard"><a id="magicparlabel-4666"></a><a id="magicparlabel-4667">Le gérant doit avoir la possibilité de créer un article, de le modifier et de le supprimer. Il doit de plus être capable de dire s'il est en promo ou disponible. Il doit aussi pouvoir créer un rayon et une catégorie. Pour ce faire, nous allons créer une page qui fera office de control panel dans laquelle nous trouverons une navigation tabulaire permettant de modifier des articles, des rayons et des catégories.</a></div>

<a id="magicparlabel-4667"></a>

#### <a id="magicparlabel-4667"></a><a id="magicparlabel-4668"><span class="subsubsection_label">Diagramme des classes participantes</span></a>

<a id="magicparlabel-4668"></a>

<div class="float float-figure"><a id="magicparlabel-4668"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4668"></a><a id="magicparlabel-4673">![image: 67_Volumes_USB_TFE_Maintenir_catalogue__DCP_.png](./naturalcorner_files/67_Volumes_USB_TFE_Maintenir_catalogue__DCP_.png)</a></div>

<a id="magicparlabel-4673"></a>

<div class="plain_layout"><a id="magicparlabel-4673"></a><a id="magicparlabel-4674"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.5.1:Diagramme des classes participantes “Maintenir catalogue“</span></a></div>

<a id="magicparlabel-4674"></a></div>

<a id="magicparlabel-4674"></a>

### <a id="magicparlabel-4674"></a><a id="magicparlabel-4679"><span class="subsection_label">10.5.2</span> Diagramme de navigation</a>

<a id="magicparlabel-4679"></a>

<div class="float float-figure"><a id="magicparlabel-4679"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4679"></a><a id="magicparlabel-4684">![image: 68_Volumes_USB_TFE_navCatalogue.png](./naturalcorner_files/68_Volumes_USB_TFE_navCatalogue.png)</a></div>

<a id="magicparlabel-4684"></a>

<div class="plain_layout"><a id="magicparlabel-4684"></a><a id="magicparlabel-4685"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.5.2:Diagramme de navigation "Maintenir catalogue"</span></a></div>

<a id="magicparlabel-4685"></a></div>

<a id="magicparlabel-4685"></a>

### <a id="magicparlabel-4685"></a><a id="magicparlabel-4691"><span class="subsection_label">10.5.3</span> Conception objet préliminaire</a>

<a id="magicparlabel-4691"></a>

#### <a id="magicparlabel-4691"></a><a id="magicparlabel-4692"><span class="subsubsection_label">Diagrammes d'interactions</span></a>

<a id="magicparlabel-4692"></a>

<div class="float float-figure"><a id="magicparlabel-4692"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4692"></a><a id="magicparlabel-4697">![image: 69_Volumes_USB_TFE_sd_Maintenir_Catalogue.png](./naturalcorner_files/69_Volumes_USB_TFE_sd_Maintenir_Catalogue.png)</a></div>

<a id="magicparlabel-4697"></a>

<div class="plain_layout"><a id="magicparlabel-4697"></a><a id="magicparlabel-4698"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.5.3:Diagramme d'interactions "Maintenir catalogue"</span></a></div>

<a id="magicparlabel-4698"></a></div>

<a id="magicparlabel-4698"></a>

#### <a id="magicparlabel-4698"></a><a id="magicparlabel-4704"><span class="subsubsection_label">Amélioration du gestionnaire de la base de données</span></a>

<a id="magicparlabel-4704"></a>

<div class="standard"><a id="magicparlabel-4704"></a><a id="magicparlabel-4705">Le gestionnaire de la base de données est enrichi des méthodes correspondant au CRUD des articles</a></div>

<a id="magicparlabel-4705"></a>

<div class="float float-figure"><a id="magicparlabel-4705"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4705"></a><a id="magicparlabel-4710">![image: 70_Volumes_USB_TFE_Database1234.png](./naturalcorner_files/70_Volumes_USB_TFE_Database1234.png)</a></div>

<a id="magicparlabel-4710"></a>

<div class="plain_layout"><a id="magicparlabel-4710"></a><a id="magicparlabel-4711"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.5.4:Gestionnaire de la base de données</span></a></div>

<a id="magicparlabel-4711"></a></div>

<a id="magicparlabel-4711"></a>

### <a id="magicparlabel-4711"></a><a id="magicparlabel-4717"><span class="subsection_label">10.5.4</span> Tests unitaires</a>

<a id="magicparlabel-4717"></a>

<div class="standard"><a id="magicparlabel-4717"></a><a id="magicparlabel-4718">On peut montrer par exemple les tests concernant le CRUD des articles.</a></div>

<a id="magicparlabel-4718"></a>

<div class="float float-figure"><a id="magicparlabel-4718"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4718"></a><a id="magicparlabel-4723">![image: 71_Volumes_USB_TFE_Screen_Shot_2016-05-18_at_19_42_48.png](./naturalcorner_files/71_Volumes_USB_TFE_Screen_Shot_2016-05-18_at_19_42_48.png)</a></div>

<a id="magicparlabel-4723"></a>

<div class="plain_layout"><a id="magicparlabel-4723"></a><a id="magicparlabel-4724"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.5.5:Test unitaire de la méthode updateArticle</span></a></div>

<a id="magicparlabel-4724"></a></div>

<a id="magicparlabel-4724"></a>

<div class="standard"><a id="magicparlabel-4724"></a><a id="magicparlabel-4730">On crée une valeur aléatoire(ligne 426) pour la concaténer aux chaines de caractères représentant l'article. A la ligne 439, on retrouve la méthode updateArticle.</a></div>

<a id="magicparlabel-4730"></a>

### <a id="magicparlabel-4730"></a><a id="magicparlabel-4731"><span class="subsection_label">10.5.5</span> Code</a>

<a id="magicparlabel-4731"></a>

##### <a id="magicparlabel-4731"></a><a id="magicparlabel-4732"><span class="paragraph_label">Le contrôleur CtrlCatalogue</span></a>

<a id="magicparlabel-4732"></a>

<div class="float float-figure"><a id="magicparlabel-4732"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4732"></a><a id="magicparlabel-4737">![image: 72_Volumes_USB_TFE_Screen_Shot_2016-05-18_at_19_47_06.png](./naturalcorner_files/72_Volumes_USB_TFE_Screen_Shot_2016-05-18_at_19_47_06.png)</a></div>

<a id="magicparlabel-4737"></a>

<div class="plain_layout"><a id="magicparlabel-4737"></a><a id="magicparlabel-4738"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.5.6:Contrôleur CtrlCatalogue</span></a></div>

<a id="magicparlabel-4738"></a></div>

<a id="magicparlabel-4738"></a>

<div class="standard"><a id="magicparlabel-4738"></a><a id="magicparlabel-4744">A la ligne 36, l'opérateur ternaire est utilisé pour indiquer à la manière d'un booléan (un integer 0 ou 1 en réalité) si l'article est disponible ou non selon l'input du gérant.</a></div>

<a id="magicparlabel-4744"></a>

##### <a id="magicparlabel-4744"></a><a id="magicparlabel-4745"><span class="paragraph_label">Méthode addArticle de la classe entité Database</span></a>

<a id="magicparlabel-4745"></a>

<div class="float float-figure"><a id="magicparlabel-4745"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4745"></a><a id="magicparlabel-4750">![image: 73_Volumes_USB_TFE_Screen_Shot_2016-05-18_at_19_50_17.png](./naturalcorner_files/73_Volumes_USB_TFE_Screen_Shot_2016-05-18_at_19_50_17.png)</a></div>

<a id="magicparlabel-4750"></a>

<div class="plain_layout"><a id="magicparlabel-4750"></a><a id="magicparlabel-4751"><span class="float-caption-Standard float-caption float-caption-standard">Figure 10.5.7:Méthode addArticle de la classe Database</span></a></div>

<a id="magicparlabel-4751"></a></div>

<a id="magicparlabel-4751"></a>

<div class="standard"><a id="magicparlabel-4751"></a><a id="magicparlabel-4757">L'article est introduit de manière classique. Aux lignes 473, 494 et 496, les méthodes beginTransaction(), commit() et rollback() sont explicitement appelées pour assurer le caractère ACID de la base de données lorsqu'on veut récupérer l'id de la table Article dans la base de données. Après avoir été rendu persistant, l'objet article reçoit l'id qui sera utile pour l'application (notamment pour la catégorie de l'article). Un objet en PHP étant introduit par référence dans une méthode, l'objet garde le nouvel id après l'enregistrement dans la base de données.</a></div>

<a id="magicparlabel-4757"></a>

# <a id="magicparlabel-4757"></a><a id="magicparlabel-4758">

<div class="chapter_label">Chapitre 11</div>

Création de l'API et utilisation de AngularJS</a>

<a id="magicparlabel-4758"></a>

## <a id="magicparlabel-4758"></a><a id="magicparlabel-4759"><span class="section_label">11.1</span> API REST</a>

<a id="magicparlabel-4759"></a>

<div class="standard"><a id="magicparlabel-4759"></a><a id="magicparlabel-4760">L'API REST utilisera le format JSON. On résume généralement dans un tableau les différents verbes du protocole HTTP en relation avec l'adresse URL associée. Voir par exemple le site du framework PHP PhalconPHP</a>

<div class="foot"><a id="magicparlabel-4760"><span class="foot_label">1</span></a>

<div class="foot_inner"><a id="magicparlabel-4760"></a>

<div class="plain_layout"><a id="magicparlabel-4760"></a><a id="magicparlabel-4764"><span class="flex_url">https://docs.phalconphp.com/fr/latest/reference/tutorial-rest.html</span></a></div>

<a id="magicparlabel-4764"></a></div>

</div>

<a id="magicparlabel-4764">. Quatre verbes correspondent aux quatre méthodes HTTP:</a></div>

<a id="magicparlabel-4764"></a>

<a id="magicparlabel-4764"></a>
<a id="magicparlabel-4769">*   GET pour chercher les données*   POST pour ajouter des données*   PUT pour modifier des données*   DELETE pour supprimer les données</a>

<a id="magicparlabel-4769"></a>

<div class="standard" style="text-align: center;"><a id="magicparlabel-4769"></a><a id="magicparlabel-4773">

| 

<div class="plain_layout"><a id="magicparlabel-4833">Méthode</a></div>

<a id="magicparlabel-4833"></a> | 

<div class="plain_layout"><a id="magicparlabel-4836">URL</a></div>

<a id="magicparlabel-4836"></a> | 

<div class="plain_layout"><a id="magicparlabel-4839">Action</a></div>

<a id="magicparlabel-4839"></a> |
| 

<div class="plain_layout"><a id="magicparlabel-4842">GET</a></div>

<a id="magicparlabel-4842"></a> | 

<div class="plain_layout"><a id="magicparlabel-4845">/api/articles</a></div>

<a id="magicparlabel-4845"></a> | 

<div class="plain_layout"><a id="magicparlabel-4848">Récupère tous les articles</a></div>

<a id="magicparlabel-4848"></a> |
| 

<div class="plain_layout"><a id="magicparlabel-4851">GET</a></div>

<a id="magicparlabel-4851"></a> | 

<div class="plain_layout"><a id="magicparlabel-4854">/api/articles/search/pomme</a></div>

<a id="magicparlabel-4854"></a> | 

<div class="plain_layout"><a id="magicparlabel-4857">Cherche les articles ayant "pomme" dans leur nom</a></div>

<a id="magicparlabel-4857"></a> |
| 

<div class="plain_layout"><a id="magicparlabel-4860">GET</a></div>

<a id="magicparlabel-4860"></a> | 

<div class="plain_layout"><a id="magicparlabel-4863">/api/users/email@mail.com</a></div>

<a id="magicparlabel-4863"></a> | 

<div class="plain_layout"><a id="magicparlabel-4866">Cherche un utlisateur dont l'email correspond</a></div>

<a id="magicparlabel-4866"></a> |
| 

<div class="plain_layout"><a id="magicparlabel-4869">GET</a></div>

<a id="magicparlabel-4869"></a> | 

<div class="plain_layout"><a id="magicparlabel-4872">/api/articles/3</a></div>

<a id="magicparlabel-4872"></a> | 

<div class="plain_layout"><a id="magicparlabel-4875">Récupère un article à partir de la clé primaire</a></div>

<a id="magicparlabel-4875"></a> |
| 

<div class="plain_layout"><a id="magicparlabel-4878">POST</a></div>

<a id="magicparlabel-4878"></a> | 

<div class="plain_layout"><a id="magicparlabel-4881">/api/users</a></div>

<a id="magicparlabel-4881"></a> | 

<div class="plain_layout"><a id="magicparlabel-4884">Ajoute un nouvel utilisateur</a></div>

<a id="magicparlabel-4884"></a> |
| 

<div class="plain_layout"><a id="magicparlabel-4887">PUT</a></div>

<a id="magicparlabel-4887"></a> | 

<div class="plain_layout"><a id="magicparlabel-4890">/api/users/4</a></div>

<a id="magicparlabel-4890"></a> | 

<div class="plain_layout"><a id="magicparlabel-4893">Modifie un utilisateur à partir de la clé primaire</a></div>

<a id="magicparlabel-4893"></a> |
| 

<div class="plain_layout"><a id="magicparlabel-4896">DELETE</a></div>

<a id="magicparlabel-4896"></a> | 

<div class="plain_layout"><a id="magicparlabel-4899">/api/commandes/5</a></div>

<a id="magicparlabel-4899"></a> | 

<div class="plain_layout"><a id="magicparlabel-4902">Détruire une commande à partir de la clé primaire</a></div>

<a id="magicparlabel-4902"></a> |

</a></div>

<a id="magicparlabel-4773"></a>

<div style="height:2ex"><a id="magicparlabel-4773"></a>

<div class="standard"><a id="magicparlabel-4773"></a><a id="magicparlabel-4904">Chaque classe reçoit la méthode permettant de sérialiser l'état de l'objet instancié par l'application.</a></div>

<a id="magicparlabel-4904"></a>

<div class="float float-figure"><a id="magicparlabel-4904"></a>

<div class="plain_layout"><a id="magicparlabel-4904"></a><a id="magicparlabel-4909">![image: 74_Volumes_USB_TFE_Screen_Shot_2016-05-16_at_16_07_06.png](./naturalcorner_files/74_Volumes_USB_TFE_Screen_Shot_2016-05-16_at_16_07_06.png)</a></div>

<a id="magicparlabel-4909"></a>

<div class="plain_layout"><a id="magicparlabel-4909"></a><a id="magicparlabel-4910"><span class="float-caption-Standard float-caption float-caption-standard">Figure 11.1.1:Récupération d'un objet JSON de type Utilisateur par l'API RESTful</span></a></div>

<a id="magicparlabel-4910"></a></div>

<a id="magicparlabel-4910"></a>

<div class="standard"><a id="magicparlabel-4910"></a><a id="magicparlabel-4915">L'application Natural Corner est prête (sous réserve d'un développement ultérieur en accord avec le gérant du magasin) à accueillir une application cliente Android, iOS ou AngularJS.</a></div>

<a id="magicparlabel-4915"></a>

## <a id="magicparlabel-4915"></a><a id="magicparlabel-4916"><span class="section_label">11.2</span> AngularJS</a>

<a id="magicparlabel-4916"></a>

<div class="standard"><a id="magicparlabel-4916"></a><a id="magicparlabel-4917">A titre d'exemple pour montrer le potentiel du back-end créé, voici une solution cliente en AngularJS utilisant l'API REST.</a></div>

<a id="magicparlabel-4917"></a>

<div class="float float-figure"><a id="magicparlabel-4917"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4917"></a><a id="magicparlabel-4922">![image: 75_Volumes_USB_TFE_Screen_Shot_2016-05-16_at_12_04_22.png](./naturalcorner_files/75_Volumes_USB_TFE_Screen_Shot_2016-05-16_at_12_04_22.png)</a></div>

<a id="magicparlabel-4922"></a>

<div class="plain_layout"><a id="magicparlabel-4922"></a><a id="magicparlabel-4923"><span class="float-caption-Standard float-caption float-caption-standard">Figure 11.2.1:Code AngularJS du template page.inc.php</span></a></div>

<a id="magicparlabel-4923"></a></div>

<a id="magicparlabel-4923"></a>

<div class="standard"><a id="magicparlabel-4923"></a><a id="magicparlabel-4929">A la ligne 128, dans le contrôleur, il y a un appel GET à l'API (l'adresse n'a pas été écrite en utilisant le URL rewriting).</a></div>

<a id="magicparlabel-4929"></a>

<div class="float float-figure"><a id="magicparlabel-4929"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4929"></a><a id="magicparlabel-4934">![image: 76_Volumes_USB_TFE_Screen_Shot_2016-05-16_at_12_09_46.png](./naturalcorner_files/76_Volumes_USB_TFE_Screen_Shot_2016-05-16_at_12_09_46.png)</a></div>

<a id="magicparlabel-4934"></a>

<div class="plain_layout"><a id="magicparlabel-4934"></a><a id="magicparlabel-4935"><span class="float-caption-Standard float-caption float-caption-standard">Figure 11.2.2:Mise en oeuvre de l'API REST avec AngularJS</span></a></div>

<a id="magicparlabel-4935"></a></div>

<a id="magicparlabel-4935"></a>

<div class="standard"><a id="magicparlabel-4935"></a><a id="magicparlabel-4940">La ligne 5 contient l'attribut ng-repeat qui est une boucle dans le langage de balise Angularjs. La valeur "x" est l'objet utilisateur et chaque champs de l'objet est représenté par ses noms. Par exemple, à la ligne 15, on voit {{x._pseudo}} qui est la valeur du champs nom.</a></div>

<a id="magicparlabel-4940"></a>

<div class="standard"><a id="magicparlabel-4940"></a><a id="magicparlabel-4941">Le lecteur est invité à consulter cette solution sur le Github associé au projet, sur le fork AngularJS : <span class="flex_url">https://github.com/userdanydan/NaturalCorner/tree/AngularJSVersion</span>.</a></div>

<a id="magicparlabel-4941"></a>

<div class="standard"><a id="magicparlabel-4941"></a><a id="magicparlabel-4946">Enfin, le code qui permet de créer le flux JSON.</a></div>

<a id="magicparlabel-4946"></a>

<div class="float float-figure"><a id="magicparlabel-4946"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-4946"></a><a id="magicparlabel-4951">![image: 77_Volumes_USB_TFE_Screen_Shot_2016-05-18_at_20_10_21.png](./naturalcorner_files/77_Volumes_USB_TFE_Screen_Shot_2016-05-18_at_20_10_21.png)</a></div>

<a id="magicparlabel-4951"></a>

<div class="plain_layout"><a id="magicparlabel-4951"></a><a id="magicparlabel-4952"><span class="float-caption-Standard float-caption float-caption-standard">Figure 11.2.3:classe UserJSON.inc.php</span></a></div>

<a id="magicparlabel-4952"></a></div>

<a id="magicparlabel-4952"></a>

<div class="standard"><a id="magicparlabel-4952"></a><a id="magicparlabel-4958">Ce code va simplement aller chercher dans la base de données l'utilisateur entré en paramètre GET par la requête de l'application cliente. A la ligne 16, la méthode json_encode() renvoie au client l'enregistrement sous forme de format JSON.</a></div>

<a id="magicparlabel-4958"></a>

# <a id="magicparlabel-4958"></a><a id="magicparlabel-4959">

<div class="chapter_label">Chapitre 12</div>

Conclusion</a>

<a id="magicparlabel-4959"></a>

<div class="standard"><a id="magicparlabel-4959"></a><a id="magicparlabel-4960">Le développement logiciel traverse une série de transformations depuis quelques années. D'abord l'avènement des technologiques mobiles avec les systèmes d'exploitation Android et iOS. Ensuite l'essor du Cloud computing, technologie initialement lancée par Amazon en 2006</a>

<div class="foot"><a id="magicparlabel-4960"><span class="foot_label">1</span></a>

<div class="foot_inner"><a id="magicparlabel-4960"></a>

<div class="plain_layout"><a id="magicparlabel-4960"></a><a id="magicparlabel-4964"><span class="flex_url">https://en.wikipedia.org/wiki/Cloud_computing</span></a></div>

<a id="magicparlabel-4964"></a></div>

</div>

<a id="magicparlabel-4964">pour la communauté des développeurs logiciels, permettant de se passer des infrastructures couteuse d'une société en informatique. Enfin, les technologies web se sont nettement améliorées et professionnalisées. Il a été possible grâce à ces avancées recentes de proposer une solution fiable au gérant du magasin Natural Corner. Il va de soi que le projet n'en est qu'à son ébauche et qu'il y a encore beaucoup à faire. L'application frontend basée sur une application Android vient d'être commencée et sera proposée à l'essai lors de la présentation orale de ce présent travail. Son efficacité démontrera par l'exemple la valeur de l'application Natural Corner.</a></div>

<a id="magicparlabel-4964"></a>

<div class="standard"><a id="magicparlabel-4964"></a><a id="magicparlabel-4969">La marché bio est un marché très porteur pour le moment et qui risque bien de prendre de plus grandes proportions dans les années à venir</a>

<div class="foot"><a id="magicparlabel-4969"><span class="foot_label">2</span></a>

<div class="foot_inner"><a id="magicparlabel-4969"></a>

<div class="plain_layout"><a id="magicparlabel-4969"></a><a id="magicparlabel-4973">A en croire les statistiques officiels, l'augmentation est constante depuis une dizaine d'année <span class="flex_url">http://statbel.fgov.be/fr/statistiques/chiffres/economie/agriculture/biologique/</span></a></div>

<a id="magicparlabel-4973"></a></div>

</div>

<a id="magicparlabel-4973">. Il a été particulièrement excitant dans une perspective de carrière de m'intéresser à cette économie à la croisée de l'écologie et du commerce traditionnel, tout en étant résolumment 'trendy'. C'est que les nouvelles technologies s'allient parfaitement avec la logique bio. L'idée de travailler en circuit court ne peut trouver meilleur allié objectif que la commande en ligne des produits frais. Il s'en suit une gestion fine des commandes, une amélioration de la logistique des flux tendus et une réduction des invendus. Cette plongée au coeur du commerce bio de proximité fut une initiation dont je garderai, sans nulle doute, une expérience profitable.</a></div>

<a id="magicparlabel-4973"></a>

<div class="standard"><a id="magicparlabel-4973"></a><a id="magicparlabel-4978">Est-il possible de créer en quelque semaines une application "full-stack"? A mon sens oui, mais cela demande une discipline à deux niveaux. La création de l'application Natural Corner m'a permis de comprendre que, d'abord, l'écriture des tests unitaires sont primordiaux et, ensuite, que l'analyse menant aux diagrammes UML doit être conduite avec rigueur et sérieux. Sans eux, écrire un logiciel revient à vouloir naviguer en pleine nuit sans instruments de géolocalisation et j'ai quelques fois dû revenir sur mes pas pour corriger des erreurs que l'analyse et les tests auraient pu détecter au préalable. Ces petites leçons ont en tout cas permis de me familiariser avec le métier d'analyste-développeur et j'espère que j'aurai la possibilité dans un futur proche d'approfondir ce métier.</a></div>

<a id="magicparlabel-4978"></a>

<div class="standard"><a id="magicparlabel-4978"></a><a id="magicparlabel-4979">Le micro framework doit encore être amélioré. Il le peut en intégrant les API Google App Engine qui regorgent de services très utiles</a>

<div class="foot"><a id="magicparlabel-4979"><span class="foot_label">3</span></a>

<div class="foot_inner"><a id="magicparlabel-4979"></a>

<div class="plain_layout"><a id="magicparlabel-4979"></a><a id="magicparlabel-4983"><span class="flex_url">https://cloud.google.com/appengine/docs/php/refdocs/namespaces/google</span></a></div>

<a id="magicparlabel-4983"></a></div>

</div>

<a id="magicparlabel-4983">(base données no SQL, email, envois de sms, log par email gmail, cron, taskqueue pour la programmation concurrente, etc...). Une application Android se servant de l'API RESTful est en cours d'élaboration et permettra une expérience pour le client résolumment moderne.</a></div>

<a id="magicparlabel-4983"></a>

<div class="standard"><a id="magicparlabel-4983"></a><a id="magicparlabel-4988">Le gérant de Natural Corner effectue pour le moment des démarches pour créer un service de ventes en ligne d'un point de vue logistique. L'avenir nous dira si ce travail aura permis la réalisation du projet initial.</a></div>

<a id="magicparlabel-4988">

## Bibliography

</a>

<div class="bibliography"><a id="magicparlabel-4988"></a>

<div class="bibliography"><a id="magicparlabel-4988"></a><a id="magicparlabel-4989"></a><a id="LyXCite-Charroux_UML2_modelisation"><span class="bibitemlabel">1</span>Charroux B., Osmani A., Thierry-Mieg Y. , UML2 Pratique de la modélisation, Pearson Synthex 3ème édition, 2010</a></div>

<a id="LyXCite-Charroux_UML2_modelisation"></a>

<div class="bibliography"><a id="LyXCite-Charroux_UML2_modelisation"></a><a id="magicparlabel-4990"></a><a id="LyXCite-Gruau_conception_bdd"><span class="bibitemlabel">2</span>Gruau C., Conception d’une base de données, Site developpez.com 1ère édition corrigée, 13/7/2006</a></div>

<a id="LyXCite-Gruau_conception_bdd"></a>

<div class="bibliography"><a id="LyXCite-Gruau_conception_bdd"></a><a id="magicparlabel-4991"></a><a id="LyXCite-Roques_UML2"><span class="bibitemlabel">3</span>Roques, P., UML2 Modéliser une application web, Eyrolles 4ème édition, 2008</a></div>

<a id="LyXCite-Roques_UML2"></a>

<div class="bibliography"><a id="LyXCite-Roques_UML2"></a><a id="magicparlabel-4992"></a><a id="LyXCite-Brouard_SQL"><span class="bibitemlabel">4</span>Brouard, F., Bruchez, R., Soutou, C., SQL, Pearson 3ème édition, 2010</a></div>

<a id="LyXCite-Brouard_SQL"></a>

<div class="bibliography"><a id="LyXCite-Brouard_SQL"></a><a id="magicparlabel-4993"></a><a id="LyXCite-key_2"><span class="bibitemlabel">5</span><span class="flex_url">http://pageperso.lif.univ-mrs.fr/~bertrand.estellon/</span>, pdf du 1er avril 2014 consulté le 31/3/2016.</a></div>

<a id="LyXCite-key_2"></a>

<div class="bibliography"><a id="LyXCite-key_2"></a><a id="magicparlabel-4998"></a><a id="LyXCite-Peacock_PHP"><span class="bibitemlabel">6</span>Michael Peacock, PHP 5 Social Networking, Packt Publishing, 2010</a></div>

<a id="LyXCite-Peacock_PHP"></a>

<div class="bibliography"><a id="LyXCite-Peacock_PHP"></a><a id="magicparlabel-4999"></a><a id="LyXCite-key_1"><span class="bibitemlabel">7</span><span class="flex_url">https://secure.php.net/manual/fr/</span></a></div>

<a id="LyXCite-key_1"></a>

<div class="bibliography"><a id="LyXCite-key_1"></a><a id="magicparlabel-5004"></a><a id="LyXCite-key_3"><span class="bibitemlabel">8</span><span class="flex_url">http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-005-elements-of-software-construction-fall-2011/lecture-notes</span></a></div>

<a id="LyXCite-key_3"></a>

<div class="bibliography"><a id="LyXCite-key_3"></a><a id="magicparlabel-5009"></a><a id="LyXCite-Larman_Patterns"><span class="bibitemlabel">9</span> Larman, G., Applying UML and Patterns , An introduction to object-oriented analysis and design and unified process, Seconde edition, 2001</a></div>

<a id="LyXCite-Larman_Patterns"></a></div>

# <a id="magicparlabel-5010">

<div class="chapter_label">Annexe A</div>

Dump du code MySQL généré par JMerisse (et corrigé manuellement)</a>

<a id="magicparlabel-5010">

<div class="float float-listings">

<pre class="listings SQL">#------------------------------------------------------------ #        Script MySQL. #------------------------------------------------------------
#------------------------------------------------------------ # Table: UTILISATEURS #------------------------------------------------------------
CREATE TABLE UTILISATEURS(
        ID_UTILISATEUR   int (11) Auto_increment  NOT NULL ,
        PRENOM           Varchar (128) ,
        NOM              Varchar (128) ,
        PSEUDO           Varchar (128) ,
        PASS             Varchar (1028) ,
        ADRESSE_MAIL     Varchar (128) ,
        DATE_INSCRIPTION Datetime ,
        IP_CONNEXION     Varchar (128) ,
        RUE              Varchar (128) ,
        NUMERO           Varchar (25) ,
        NUMERO_BOITE     Varchar (25) ,
        CODE_POSTAL      Varchar (25) ,
        LOCALITE         Varchar (128) ,
        PAYS             Varchar (25) ,
        PRIMARY KEY (ID_UTILISATEUR ) ,
        UNIQUE (ADRESSE_MAIL ) )ENGINE=InnoDB;
#------------------------------------------------------------ # Table: COMMANDES #------------------------------------------------------------
CREATE TABLE COMMANDES(
        ID_COMMANDE    int (11) Auto_increment  NOT NULL ,
        DATE_COMMANDE  Datetime ,
        ID_UTILISATEUR Int NOT NULL ,
        ID_PANIER      Int NOT NULL ,
        PRIMARY KEY (ID_COMMANDE ) )ENGINE=InnoDB;
#------------------------------------------------------------ # Table: ARTICLES #------------------------------------------------------------
CREATE TABLE ARTICLES(
        ID_ARTICLES   int (11) Auto_increment  NOT NULL ,
        DENOMINATION  Varchar (128) ,
        PRIX_UNITAIRE DECIMAL (15,3)  ,
        COMMENTAIRE   Longtext ,
        EN_VENTE      Bool ,
        EN_PROMO      Bool ,
        ID_RAYONS     Int NOT NULL ,
        PRIMARY KEY (ID_ARTICLES ) , 
       UNIQUE (DENOMINATION ) )ENGINE=InnoDB;
#------------------------------------------------------------ #  Table: VENDEURS #------------------------------------------------------------
CREATE TABLE VENDEURS(
        ID_VENDEUR     int (11) Auto_increment  NOT NULL ,
        ID_UTILISATEUR Int NOT NULL ,
        PRIMARY KEY (ID_VENDEUR ,ID_UTILISATEUR ) )ENGINE=InnoDB;
#------------------------------------------------------------ # Table: GERANTS #------------------------------------------------------------
CREATE TABLE GERANTS(
        ID_GERANT      int (11) Auto_increment  NOT NULL ,
        ID_VENDEUR     Int NOT NULL ,
        ID_UTILISATEUR Int NOT NULL ,
        PRIMARY KEY (ID_GERANT ,ID_VENDEUR ,ID_UTILISATEUR ) )ENGINE=InnoDB;
#------------------------------------------------------------ # Table: RAYONS #------------------------------------------------------------
CREATE TABLE RAYONS(
        ID_RAYONS    int (11) Auto_increment  NOT NULL ,
        DENOMINATION Varchar (128) ,
        PRIMARY KEY (ID_RAYONS ) )ENGINE=InnoDB;
#------------------------------------------------------------ # Table: CATEGORIES #------------------------------------------------------------
CREATE TABLE CATEGORIES(
        ID_CATEGORIE   int (11) Auto_increment  NOT NULL ,
        DENOMINATION   Varchar (128) ,
        ID_CATEGORIE_1 Int NOT NULL ,
        PRIMARY KEY (ID_CATEGORIE ) )ENGINE=InnoDB;
#------------------------------------------------------------ # Table: PANIERS #------------------------------------------------------------
CREATE TABLE PANIERS(
        ID_PANIER   int (11) Auto_increment  NOT NULL ,
        ID_COMMANDE Int NOT NULL ,
        PRIMARY KEY (ID_PANIER ) )ENGINE=InnoDB;
#------------------------------------------------------------ # Table: LIGNES_PANIER #------------------------------------------------------------
CREATE TABLE LIGNES_PANIER(
        ID_LIGNE_PAGNIER int (11) Auto_increment  NOT NULL ,
        QUANTITE         Int ,
        ID_PANIER        Int NOT NULL ,
        ID_ARTICLES      Int NOT NULL ,
        PRIMARY KEY (ID_LIGNE_PAGNIER ) )ENGINE=InnoDB;
#------------------------------------------------------------ # Table: CARACTERISER #------------------------------------------------------------
CREATE TABLE CARACTERISER(
        ID_ARTICLES  Int NOT NULL ,
        ID_CATEGORIE Int NOT NULL ,
        PRIMARY KEY (ID_ARTICLES ,ID_CATEGORIE ) )ENGINE=InnoDB;

ALTER TABLE COMMANDES 
	ADD CONSTRAINT FK_COMMANDES_ID_UTILISATEUR FOREIGN KEY (ID_UTILISATEUR) 
	REFERENCES UTILISATEURS(ID_UTILISATEUR); 
ALTER TABLE COMMANDES 
	ADD CONSTRAINT FK_COMMANDES_ID_PANIER FOREIGN KEY (ID_PANIER) 
	REFERENCES PANIERS(ID_PANIER); 
ALTER TABLE ARTICLES 
	ADD CONSTRAINT FK_ARTICLES_ID_RAYONS FOREIGN KEY (ID_RAYONS) 
	REFERENCES RAYONS(ID_RAYONS);
ALTER TABLE VENDEURS 
	ADD CONSTRAINT FK_VENDEURS_ID_UTILISATEUR FOREIGN KEY (ID_UTILISATEUR) 
	REFERENCES UTILISATEURS(ID_UTILISATEUR);
ALTER TABLE GERANTS 
	ADD CONSTRAINT FK_GERANTS_ID_VENDEUR FOREIGN KEY (ID_VENDEUR) 
	REFERENCES VENDEURS(ID_VENDEUR);
ALTER TABLE GERANTS 
	ADD CONSTRAINT FK_GERANTS_ID_UTILISATEUR FOREIGN KEY (ID_UTILISATEUR) 
	REFERENCES UTILISATEURS(ID_UTILISATEUR);
ALTER TABLE CATEGORIES 
	ADD CONSTRAINT FK_CATEGORIES_ID_CATEGORIE_1 FOREIGN KEY (ID_CATEGORIE_1) 
	REFERENCES CATEGORIES(ID_CATEGORIE);
ALTER TABLE PANIERS 
	ADD CONSTRAINT FK_PANIERS_ID_COMMANDE FOREIGN KEY (ID_COMMANDE) 
	REFERENCES COMMANDES(ID_COMMANDE);
ALTER TABLE LIGNES_PANIER 
	ADD CONSTRAINT FK_LIGNES_PANIER_ID_PANIER FOREIGN KEY (ID_PANIER) 
	REFERENCES PANIERS(ID_PANIER);
ALTER TABLE LIGNES_PANIER 
	ADD CONSTRAINT FK_LIGNES_PANIER_ID_ARTICLES FOREIGN KEY (ID_ARTICLES) 
	REFERENCES ARTICLES(ID_ARTICLES);
ALTER TABLE CARACTERISER 
	ADD CONSTRAINT FK_CARACTERISER_ID_ARTICLES FOREIGN KEY (ID_ARTICLES) 
	REFERENCES ARTICLES(ID_ARTICLES);
ALTER TABLE CARACTERISER 
	ADD CONSTRAINT FK_CARACTERISER_ID_CATEGORIE FOREIGN KEY (ID_CATEGORIE) 
	REFERENCES CATEGORIES(ID_CATEGORIE);</pre>

</div>

</a>

# <a id="magicparlabel-5010"></a><a id="magicparlabel-5128">

<div class="chapter_label">Annexe B</div>

Conventions pour les diagrammes de navigation</a>

<a id="magicparlabel-5128"></a>

#### <a id="magicparlabel-5128"></a><a id="magicparlabel-5129"><span class="subsubsection_label">Conventions</span></a>

<a id="magicparlabel-5129"></a>

<div class="float float-figure"><a id="magicparlabel-5129"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-5129"></a><a id="magicparlabel-5134">![image: 78_Volumes_USB_TFE_nav_conventions.png](./naturalcorner_files/78_Volumes_USB_TFE_nav_conventions.png)</a></div>

<a id="magicparlabel-5134"></a>

<div class="plain_layout"><a id="magicparlabel-5134"></a><a id="magicparlabel-5135"><span class="float-caption-Standard float-caption float-caption-standard">Figure B.0.4:Conventions</span></a></div>

<a id="magicparlabel-5135"></a></div>

<a id="magicparlabel-5135"></a>

# <a id="magicparlabel-5135"></a><a id="magicparlabel-5140">

<div class="chapter_label">Annexe C</div>

Créer les tests avec PHPUnit</a>

<a id="magicparlabel-5140"></a>

<div class="standard"><a id="magicparlabel-5140"></a><a id="magicparlabel-5141">PhpUnit demande de créer au préalable une classe Adresse dans le modèle.</a></div>

<a id="magicparlabel-5141"></a>

<div class="float float-figure"><a id="magicparlabel-5141"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-5141"></a><a id="magicparlabel-5146">![image: 79_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_15_42_22.png](./naturalcorner_files/79_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_15_42_22.png)</a></div>

<a id="magicparlabel-5146"></a>

<div class="plain_layout"><a id="magicparlabel-5146"></a><a id="magicparlabel-5147"><span class="float-caption-Standard float-caption float-caption-standard">Figure C.0.5:Hiérarchie des fichiers du projet</span></a></div>

<a id="magicparlabel-5147"></a></div>

<a id="magicparlabel-5147"></a>

<div class="standard"><a id="magicparlabel-5147"></a><a id="magicparlabel-5152">Ensuite, on clique droit sur le fichier de la classe Adresse.class.php et on demande à Eclipse de créer automatiquement une classe de test.</a></div>

<a id="magicparlabel-5152"></a>

<div class="float float-figure"><a id="magicparlabel-5152"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-5152"></a><a id="magicparlabel-5157">![image: 80_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_15_47_24.png](./naturalcorner_files/80_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_15_47_24.png)</a></div>

<a id="magicparlabel-5157"></a>

<div class="plain_layout"><a id="magicparlabel-5157"></a><a id="magicparlabel-5158"><span class="float-caption-Standard float-caption float-caption-standard">Figure C.0.6:Création d'une classe de tests</span></a></div>

<a id="magicparlabel-5158"></a></div>

<a id="magicparlabel-5158"></a>

<div class="float float-figure"><a id="magicparlabel-5158"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-5158"></a><a id="magicparlabel-5167">![image: 81_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_15_46_03.png](./naturalcorner_files/81_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_15_46_03.png)</a></div>

<a id="magicparlabel-5167"></a>

<div class="plain_layout"><a id="magicparlabel-5167"></a><a id="magicparlabel-5168"><span class="float-caption-Standard float-caption float-caption-standard">Figure C.0.7:Remplissage automatique des champs pour le test</span></a></div>

<a id="magicparlabel-5168"></a></div>

<a id="magicparlabel-5168"></a>

<div class="float float-figure"><a id="magicparlabel-5168"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-5168"></a><a id="magicparlabel-5177">![image: 82_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_16_15_51.png](./naturalcorner_files/82_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_16_15_51.png)</a></div>

<a id="magicparlabel-5177"></a>

<div class="plain_layout"><a id="magicparlabel-5177"></a><a id="magicparlabel-5178"><span class="float-caption-Standard float-caption float-caption-standard">Figure C.0.8:Création d'une page de tests</span></a></div>

<a id="magicparlabel-5178"></a></div>

<a id="magicparlabel-5178"></a>

<div class="standard"><a id="magicparlabel-5178"></a><a id="magicparlabel-5183">On peut commencer à écrire les tests. Pour rappel il s'agit de la méthode Test Drive Development</a>

<div class="foot"><a id="magicparlabel-5183"><span class="foot_label">1</span></a>

<div class="foot_inner"><a id="magicparlabel-5183"></a>

<div class="plain_layout"><a id="magicparlabel-5183"></a><a id="magicparlabel-5187"><span class="flex_url">http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-005-elements-of-software-construction-fall-2011/lecture-notes/MIT6_005F11_lec02.pdf</span></a></div>

<a id="magicparlabel-5187"></a></div>

</div>

<a id="magicparlabel-5187">(TDD), qui préconise d'écrire les tests comme si les méthodes avaient déjà été implémentées. Une fois les tests écrits pour les mutateurs et les accesseurs de la classe Adresse, on peut lancer le premier test.</a></div>

<a id="magicparlabel-5187"></a>

<div class="float float-figure"><a id="magicparlabel-5187"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-5187"></a><a id="magicparlabel-5196">![image: 83_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_16_17_57.png](./naturalcorner_files/83_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_16_17_57.png)</a></div>

<a id="magicparlabel-5196"></a>

<div class="plain_layout"><a id="magicparlabel-5196"></a><a id="magicparlabel-5197"><span class="float-caption-Standard float-caption float-caption-standard">Figure C.0.9:échec du test</span></a></div>

<a id="magicparlabel-5197"></a></div>

<a id="magicparlabel-5197"></a>

<div class="standard"><a id="magicparlabel-5197"></a><a id="magicparlabel-5202">La méthode getId() de la classe Adresse n'ayant pas été implémentée, le test échoue. Nous commençons donc à écrire la classe munie des champs que l'on retrouve sur le diagramme de classes détaillé ainsi que son constructeur. Dans un premier temps, le constructeur est écrit sans aucune mesure de sécurité quant aux données introduites en paramètre, cette responsabilité sera donnée aux setters, qui ne sont pas encore écrits.</a></div>

<a id="magicparlabel-5202"></a>

<div class="float float-figure"><a id="magicparlabel-5202"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-5202"></a><a id="magicparlabel-5207">![image: 84_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_16_29_43.png](./naturalcorner_files/84_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_16_29_43.png)</a></div>

<a id="magicparlabel-5207"></a>

<div class="plain_layout"><a id="magicparlabel-5207"></a><a id="magicparlabel-5208"><span class="float-caption-Standard float-caption float-caption-standard">Figure C.0.10:écriture de la classe Adresse</span></a></div>

<a id="magicparlabel-5208"></a></div>

<a id="magicparlabel-5208"></a>

<div class="standard"><a id="magicparlabel-5208"></a><a id="magicparlabel-5213">Dans une démarche de test, l'attribut id est initialisé à 0 par le constructeur afin de faciliter la démarche, on pourra ultérieurement, en concordance avec l'implémentation de la base de données, réaliser ce travail.</a></div>

<a id="magicparlabel-5213"></a>

<div class="standard"><a id="magicparlabel-5213"></a><a id="magicparlabel-5214">Il est intéressant de créer une exception pour une classe du modèle à ce niveau de la réalisation du UC. Cela clarifie le déboguage et permet d'identifier plus rapidement les sources du problème. La philosophie des tests unitaires préconise de créer une page de test par classe. Cependant cette classe ne contenant que trois lignes de code, nous passerons outre le précepte.</a></div>

<a id="magicparlabel-5214"></a>

<div class="float float-figure"><a id="magicparlabel-5214"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-5214"></a><a id="magicparlabel-5219">![image: 85_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_18_19_59.png](./naturalcorner_files/85_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_18_19_59.png)</a></div>

<a id="magicparlabel-5219"></a>

<div class="plain_layout"><a id="magicparlabel-5219"></a><a id="magicparlabel-5220"><span class="float-caption-Standard float-caption float-caption-standard">Figure C.0.11:classe AdresseException</span></a></div>

<a id="magicparlabel-5220"></a></div>

<a id="magicparlabel-5220"></a>

<div class="standard"><a id="magicparlabel-5220"></a><a id="magicparlabel-5225">L'écriture du test des méthodes getId() et setId() donne immédiatement lieu à un test, permettant de progresser tranquillement jusqu'à l'écriture complète de la classe Adresse.</a></div>

<a id="magicparlabel-5225"></a>

<div class="float float-figure"><a id="magicparlabel-5225"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-5225"></a><a id="magicparlabel-5230">![image: 86_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_16_55_19.png](./naturalcorner_files/86_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_16_55_19.png)</a></div>

<a id="magicparlabel-5230"></a>

<div class="plain_layout"><a id="magicparlabel-5230"></a><a id="magicparlabel-5231"><span class="float-caption-Standard float-caption float-caption-standard">Figure C.0.12:implémentation des méthodes de la classe Adresse</span></a></div>

<a id="magicparlabel-5231"></a></div>

<a id="magicparlabel-5231"></a>

<div class="float float-figure"><a id="magicparlabel-5231"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-5231"></a><a id="magicparlabel-5240">![image: 87_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_16_57_13.png](./naturalcorner_files/87_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_16_57_13.png)</a></div>

<a id="magicparlabel-5240"></a>

<div class="plain_layout"><a id="magicparlabel-5240"></a><a id="magicparlabel-5241"><span class="float-caption-Standard float-caption float-caption-standard">Figure C.0.13:tests des méthodes</span></a></div>

<a id="magicparlabel-5241"></a></div>

<a id="magicparlabel-5241"></a>

<div class="float float-figure"><a id="magicparlabel-5241"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-5241"></a><a id="magicparlabel-5250">![image: 88_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_18_37_48.png](./naturalcorner_files/88_Volumes_USB_TFE_Screen_Shot_2016-04-01_at_18_37_48.png)</a></div>

<a id="magicparlabel-5250"></a>

<div class="plain_layout"><a id="magicparlabel-5250"></a><a id="magicparlabel-5251"><span class="float-caption-Standard float-caption float-caption-standard">Figure C.0.14:tests réussis</span></a></div>

<a id="magicparlabel-5251"></a></div>

<a id="magicparlabel-5251"></a>

<div class="standard"><a id="magicparlabel-5251"></a><a id="magicparlabel-5256">On réitère le procédé avec la classe Utilisateur.</a></div>

<a id="magicparlabel-5256"></a>

# <a id="magicparlabel-5256"></a><a id="magicparlabel-5257">

<div class="chapter_label">Annexe D</div>

Déployer une application en PHP sur Google App Engine</a>

<a id="magicparlabel-5257"></a>

<div class="standard"><a id="magicparlabel-5257"></a><a id="magicparlabel-5258">Depuis la console Google App Engine, on choisit "Créer un projet" :</a></div>

<a id="magicparlabel-5258"></a>

<div class="float float-figure"><a id="magicparlabel-5258"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-5258"></a><a id="magicparlabel-5263">![image: 89_Volumes_USB_TFE_Screen_Shot_2016-05-19_at_09_56_06.png](./naturalcorner_files/89_Volumes_USB_TFE_Screen_Shot_2016-05-19_at_09_56_06.png)</a></div>

<a id="magicparlabel-5263"></a>

<div class="plain_layout"><a id="magicparlabel-5263"></a><a id="magicparlabel-5264"><span class="float-caption-Standard float-caption float-caption-standard">Figure D.0.15:Console Google App Engine</span></a></div>

<a id="magicparlabel-5264"></a></div>

<a id="magicparlabel-5264"></a>

<div class="standard"><a id="magicparlabel-5264"></a><a id="magicparlabel-5270">On renseigne le nom du projet.</a></div>

<a id="magicparlabel-5270"></a>

<div class="float float-figure"><a id="magicparlabel-5270"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-5270"></a><a id="magicparlabel-5275">![image: 90_Volumes_USB_TFE_Screen_Shot_2016-05-19_at_09_57_54.png](./naturalcorner_files/90_Volumes_USB_TFE_Screen_Shot_2016-05-19_at_09_57_54.png)</a></div>

<a id="magicparlabel-5275"></a>

<div class="plain_layout"><a id="magicparlabel-5275"></a><a id="magicparlabel-5276"><span class="float-caption-Standard float-caption float-caption-standard">Figure D.0.16:Création du projet</span></a></div>

<a id="magicparlabel-5276"></a></div>

<a id="magicparlabel-5276"></a>

<div class="standard"><a id="magicparlabel-5276"></a><a id="magicparlabel-5281">Ensuite, sur l'application GoogleAppEngineLauncher, on crée une nouvelle application :</a></div>

<a id="magicparlabel-5281"></a>

<div class="float float-figure"><a id="magicparlabel-5281"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-5281"></a><a id="magicparlabel-5286">![image: 91_Volumes_USB_TFE_Screen_Shot_2016-05-19_at_09_59_44.png](./naturalcorner_files/91_Volumes_USB_TFE_Screen_Shot_2016-05-19_at_09_59_44.png)</a></div>

<a id="magicparlabel-5286"></a>

<div class="plain_layout"><a id="magicparlabel-5286"></a><a id="magicparlabel-5287"><span class="float-caption-Standard float-caption float-caption-standard">Figure D.0.17:GoogleAppEngineLauncher</span></a></div>

<a id="magicparlabel-5287"></a></div>

<a id="magicparlabel-5287"></a>

<div class="standard"><a id="magicparlabel-5287"></a><a id="magicparlabel-5292">Les boutons "Run" et "Deploy" permettent respectivement de lancer l'application en local (exactement comme le ferait un serveur Apache) et de déployer sur le web l'application. Elle reçoit dès lors l'adresse https://naturalcorner-1.appspot.com.</a></div>

<a id="magicparlabel-5292"></a>

<div class="float float-figure"><a id="magicparlabel-5292"></a>

<div class="plain_layout" style="text-align: center;"><a id="magicparlabel-5292"></a><a id="magicparlabel-30811">![image: 92_Volumes_USB_TFE_Screen_Shot_2016-05-19_at_10_04_26.png](./naturalcorner_files/92_Volumes_USB_TFE_Screen_Shot_2016-05-19_at_10_04_26.png)</a></div>

<a id="magicparlabel-30811"></a>

<div class="plain_layout"><a id="magicparlabel-30811"></a><a id="magicparlabel-5298"><span class="float-caption-Standard float-caption float-caption-standard">Figure D.0.18:Choix du runtime PHP</span></a></div>

<a id="magicparlabel-5298"></a></div>

<a id="magicparlabel-5298"></a></div>

</div>

</div>

</div>

</div>

</div>

</div>

</div>

</div>

</div>

</div>

</div>

</div>

</div>

</div>

</div>

</div>

</div>

</div>

</div>

</div>

</div>

</div>

</div>
